/*! For license information please see player.v2.modern.js.LICENSE.txt */
(()=>{function e(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={7050:(e,t,r)=>{function n(e){var t=i(e);return r(t)}function i(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}var o={"./be.ts":5506,"./en.ts":7520,"./id.ts":823,"./kk.ts":2987,"./ru.ts":4072,"./tr.ts":1578,"./tt.ts":4606,"./uk.ts":2468,"./uz.ts":6185};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=7050},4661:(e,t,r)=>{(t=e.exports=r(6805)(!1)).push([e.id,"._1gZJUfw{user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;position:relative;background:#000;background-position:center;background-size:contain;background-repeat:no-repeat;width:100%;height:100%;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;overflow:hidden;text-align:left;outline:0}._2jlIyxK{width:100%;height:100%;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;overflow:hidden;user-select:none;text-align:left;outline:0;position:absolute;top:0;left:0;pointer-events:none;background:0 0}._1gZJUfw ._17DR8Wz{display:none!important}._1gZJUfw>iframe.KNlHF8r{position:absolute;width:100%;height:100%;border:0}._1gZJUfw .xDBHr4L{position:absolute;width:100%;height:100%;pointer-events:none}._1gZJUfw video{width:100%;height:100%}._1gZJUfw video::-webkit-media-controls-start-playback-button{z-index:2147483647!important}._1gZJUfw video._33stY3F::-webkit-media-controls-start-playback-button{display:none!important}",""]),t.locals={StreamPlayer:"_1gZJUfw",StreamPlayer_ui:"_2jlIyxK",hidden:"_17DR8Wz",container:"KNlHF8r",adSkin:"xDBHr4L","hide-native-play-button":"_33stY3F"}},8024:(e,t,r)=>{var n=r(3379),i=r(866);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o={injectType:"singletonStyleTag",attributes:{"data-ya-player-style":"data-ya-player-style"},insert:"head",singleton:!0};n(i,o);e.exports=i.locals||{}},3379:(e,t,r)=>{"use strict";function n(e){for(var t=-1,r=0;r<f.length;r++)if(f[r].identifier===e){t=r;break}return t}function i(e,t){for(var r={},i=[],o=0;o<e.length;o++){var a=e[o],s=t.base?a[0]+t.base:a[0],d=r[s]||0,c="".concat(s," ").concat(d);r[s]=d+1;var u=n(c),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(f[u].references++,f[u].updater(h)):f.push({identifier:c,updater:l(h,t),references:1}),i.push(c)}return i}function o(e){var t=document.createElement("style"),n=e.attributes||{};if("undefined"===typeof n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"===typeof e.insert)e.insert(t);else{var o=h(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}function a(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function s(e,t,r){var n=r.css,i=r.media,o=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function l(e,t){var r,n,i;if(t.singleton){var l=v++;r=g||(g=o(t)),n=a.bind(null,r,l,!1),i=a.bind(null,r,l,!0)}else r=o(t),n=s.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}var d,c,u=function(){return"undefined"===typeof d&&(d=Boolean(window&&document&&document.all&&!window.atob)),d},h=function(){var e={};return function(t){if("undefined"===typeof e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}e[t]=r}return e[t]}}(),f=[],p=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")}),g=null,v=0;e.exports=function(e,t){(t=t||{}).singleton||"boolean"===typeof t.singleton||(t.singleton=u());var r=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<r.length;o++){var a=n(r[o]);f[a].references--}for(var s=i(e,t),l=0;l<r.length;l++){var d=n(r[l]);0===f[d].references&&(f[d].updater(),f.splice(d,1))}r=s}}}},5506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{be:()=>n});const n={TRACK_AUTO:"\u0410\u045e\u0442\u0430"}},7520:(e,t,r)=>{"use strict";r.r(t),r.d(t,{en:()=>n});const n={TRACK_AUTO:"Auto"}},823:(e,t,r)=>{"use strict";r.r(t),r.d(t,{id:()=>n});const n={TRACK_AUTO:"Otomatis"}},2987:(e,t,r)=>{"use strict";r.r(t),r.d(t,{kk:()=>n});const n={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},4072:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ru:()=>n});const n={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},1578:(e,t,r)=>{"use strict";r.r(t),r.d(t,{tr:()=>n});const n={TRACK_AUTO:"Oto"}},4606:(e,t,r)=>{"use strict";r.r(t),r.d(t,{tt:()=>n});const n={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},2468:(e,t,r)=>{"use strict";r.r(t),r.d(t,{uk:()=>n});const n={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},6185:(e,t,r)=>{"use strict";r.r(t),r.d(t,{uz:()=>n});const n={TRACK_AUTO:"Avto"}},7369:(e,t,r)=>{"use strict";function n(e){return"string"===typeof e?e.split(";"):[]}var i=r(5135),o=r(5357),a=r(4519);const s=Math.random()<=.05;!function(){const e=window;if(!e.Ya||!e.Ya.Rum){r(7323),r(8058),r(7790),r(4491),r(1917),r(6260),r(2927),r(6212);try{const e={project:"video-player-iframe-api",env:"production",platform:i.b?"touch":"desktop",version:"1.0-9279".replace("1.0-",""),from:"unknown"},t=location.hash.indexOf("#",1),r=location.hash.substr(1,-1===t?location.hash.length:t).split("&");for(let n=0;n<r.length;n++){const t=r[n].split("=");e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}(e=>{const{project:t,env:r,platform:s,version:l,from:d,from_block:c,reqid:u,vsid:h,use_friendly_frame:f}=e;(0,a.I8)({useFriendlyFrame:f,vsid:h,from_block:c}),window.Ya.Rum.init({sendClientUa:!0,sendUrlInResTiming:!0,sendFirstRaf:!0,beacon:!0,clck:"https://yandex.ru/clck/click",slots:n(e.slots),crossOrigin:"",reqid:u||h,longTaskMetric:!0,maxLongTaskCounters:1/0},{"-project":t,"-version":l,"-env":r,"-platform":s,"-service":d,"-page":"stream-player/main",143:i.b?"28.3413.584.64":"28.3413.2048.64","-blocker":o.I?1:void 0,"-additional":decodeURIComponent((0,a.B6)())})})(e),(e=>{const{project:t,env:r,platform:i,version:l,from:d,slots:c,reqid:u,vsid:h}=e;window.Ya.Rum.initErrors({project:t,env:r,platform:i,version:l,slots:n(c),unhandledRejection:!0,traceUnhandledRejection:s,debug:!1,reqid:u||h,service:d,page:"stream-player/main",blocker:o.I?1:void 0,additional:(0,a.Vk)(),filters:{message:{0:/window\.webkit\.messageHandlers/,1:/Unhandled\srejection:\sFetch\sis\saborted/}}})})(e)}catch(t){}}}()},5809:(e,t,r)=>{"use strict";r.d(t,{q:()=>i,z:()=>n});const n="https://strm.yandex.net/int/enc/srvr.xml",i="int/enc/srvr.xml"},5357:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});var n=r(5809);const i=-1===n.z.indexOf(n.q)},4519:(e,t,r)=>{"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(){return v||(!function(){try{g=encodeURIComponent(JSON.stringify(n({},f,p)))}catch(e){}}(),v=!0),g}function o(){return n({},f,p)}function a(){try{return JSON.parse(window.Ya.Rum._vars["-additional"])}catch(e){return{}}}function s(){try{return window.Ya.Rum.setVars({"-additional":JSON.stringify(f)})}catch(e){}}function l(){try{return window.Ya.Rum.updateErrors({additional:n({},f)})}catch(e){}}function d(e){return void 0===e||void 0===e.additional?i():encodeURIComponent(JSON.stringify(n({},f,p,e.additional)))}function c(e){f=n({},a(),e),s(),l(),v=!1}function u(e,t){f=n({},a(),{[e]:t}),s(),l(),v=!1}function h(e){p=e,v=!1}r.d(t,{B6:()=>d,I8:()=>c,Pj:()=>h,Vk:()=>o,Z$:()=>u});let f={},p={},g="",v=!1},6197:(e,t)=>{"use strict";t.Z=function(e,t,r){for(var n=e.length+t.length,i=new Array(n),o=0,a=0,s=0;s<n;){var l=o>=e.length,d=a>=t.length;!l&&(d||r(e[o],t[a])<0)?(i[s]=e[o],o++):(i[s]=t[a],a++),s++}return i}},5983:e=>{e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r]);return e})},5791:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});const n=r(6386),i=function(e){void 0===e&&(e=window);const t=n(e);return"boolean"===typeof t?-1:t}},5135:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});const n=(0,r(9816).b)()},9816:(e,t,r)=>{"use strict";function n(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:r,maxTouchPoints:n}=t;return r||n||0}(e)>0&&!function(e){void 0===e&&(e=window);return(0,a.N)(e)>11}(e)}function i(e,t){if(!(0,l.m)(e.matchMedia))return!1;const r=e.matchMedia(t);return(0,d.K)(r)&&Boolean(r.matches)}function o(e){return void 0===e&&(e=window),n(e)||function(e){return i(e,u)}(e)||function(e){return i(e,h)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}r.d(t,{b:()=>o});var a=r(5791);var s=r(8558),l=r(6351),d=r(3770),c=r(2370);const u=(0,s.U)(c.p,e=>"("+e+"any-pointer:coarse)").join(","),h=(0,s.U)(c.p,e=>"("+e+"touch-enabled)").join(",")},3770:(e,t,r)=>{"use strict";function n(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:()=>n})},8558:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});const n=(e,t,r)=>{const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=t.call(r,e[i],i,e);return n}},2370:(e,t,r)=>{"use strict";r.d(t,{p:()=>i,q:()=>n});const n=["","webkit","moz","o","ms"],i=["","-webkit-","-ms-","-moz-","-o-"]},8062:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});const n={}.toString,i=/\[object (\w+)\]/,o=e=>{const t=n.call(e);if(!t)return null;const r=t.match(i);if(!r)return null;const o=r[1];return o||null}},6351:(e,t,r)=>{"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:()=>n});var i=r(8062)},6260:()=>{!function(e){function t(e,t){if(e&&t){var r=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"string"==typeof i&&(i=new RegExp(i)),i instanceof RegExp&&i.test(e)&&r.push(n)}return r.join("_")}}function r(e,r){var i,o=[];for(var a in n)n.hasOwnProperty(a)&&(i=t(e[a],r[a]))&&o.push(a+"~"+i);return o.join(";")}var n={url:{0:/(miscellaneous|extension)_bindings/,1:/^chrome:/,2:/kaspersky-labs\.com\//,3:/^(?:moz|chrome|safari)-extension:\/\//,4:/^file:/,5:/^resource:\/\//,6:/webnetc\.top/,7:/local\.adguard\.com/},message:{0:/__adgRemoveDirect/,1:/Content Security Policy/,2:/vid_mate_check/,3:/ucapi/,4:/Access is denied/i,5:/^Uncaught SecurityError/i,6:/__ybro/,7:/__show__deepen/,8:/ntp is not defined/,9:/Cannot set property 'install' of undefined/,10:/NS_ERROR/,11:/Error loading script/,12:/^TypeError: undefined is not a function$/,13:/__firefox__\.(?:favicons|metadata|reader|searchQueryForField|searchLoginField)/},stack:{0:/(?:moz|chrome|safari)-extension:\/\//,1:/adguard.*\.user\.js/i}};e._isExternalError=function(t,i,o){var a=e._errorSettings.filters||{},s={url:(t||"")+"",message:(i||"")+"",stack:(o||"")+""},l=r(s,n),d=r(s,a);return{common:l,custom:d,hasExternal:!(!l&&!d)}}}(Ya.Rum)},1917:()=>{!function(e,t){function r(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function n(e){return"boolean"==typeof e&&(e=+e),"number"==typeof e?e+"":null}var i={client:["690.2354",1e3,100,0],uncaught:["690.2361",100,10,0],external:["690.2854",100,10,0],script:["690.2609",100,10,0]},o={};t.ERROR_LEVEL={INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error",FATAL:"fatal"},t._errorSettings={clck:"https://yandex.ru/clck/click",beacon:!0,project:"unknown",page:"",env:"",experiments:[],additional:{},platform:"",region:"",dc:"",host:"",service:"",level:"",version:"",yandexuid:"",loggedin:!1,coordinates_gp:"",referrer:!0,preventError:!1,unhandledRejection:!1,traceUnhandledRejection:!1,uncaughtException:!0,debug:!1,limits:{},silent:{},filters:{},pageMaxAge:864e6,initTimestamp:+new Date};var a=!1;t.initErrors=function(n){var i=r(t._errorSettings,n);a||(i.uncaughtException&&function(){var r=t._errorSettings;if(e.addEventListener)e.addEventListener("error",s),r.resourceFails&&e.addEventListener("error",l,!0),"Promise"in e&&r.unhandledRejection&&e.addEventListener("unhandledrejection",(function(e){var r,n,i=e.reason,o={};i&&(i.stack&&i.message?(r=i.message,n=i.stack):(r=String(i),n=t._parseTraceablePromiseStack(e.promise),"[object Event]"===r?r="event.type: "+i.type:"[object Object]"===r&&(o.unhandledObject=i)),i.target&&i.target.src&&(o.src=i.target.src),s({message:"Unhandled rejection: "+r,stack:n,additional:o}))}));else{var n=e.onerror;e.onerror=function(e,t,r,i,o){s({error:o||new Error(e||"Empty error"),message:e,lineno:r,colno:i,filename:t}),n&&n.apply(this,arguments)}}}(),i.unhandledRejection&&i.traceUnhandledRejection&&t._traceUnhandledRejection&&t._traceUnhandledRejection(),a=!0)},t.updateErrors=function(e){r(t._errorSettings,e)},t.updateAdditional=function(e){t._errorSettings.additional=r(t._errorSettings.additional||{},e)},t._handleError=function(e,n,a){var s,l,d=t._errorSettings;if(d.preventError&&e.preventDefault&&e.preventDefault(),n)s=e,l="client";else{s=t._normalizeError(e),l=s.type;var c=d.onError;"function"==typeof c&&c(s);var u=d.transform;if("function"==typeof u&&(s=u(s)),!s)return;s.settings&&(a=s.settings)}var h=+new Date,f=d.initTimestamp,p=d.pageMaxAge;if(!(-1!==p&&f&&f+p<h)){var g=i[l][1];"number"==typeof d.limits[l]&&(g=d.limits[l]);var v=i[l][2];"number"==typeof d.silent[l]&&(v=d.silent[l]);var m=i[l][3];if(m<g||-1===g){s.path=i[l][0];var E=t._getErrorData(s,{silent:m<v||-1===v?"no":"yes",isCustom:Boolean(n)},r(r({},d),a)),y=function(e){o[s.message]=!1,t._sendError(e.path,e.vars),i[l][3]++}.bind(this,E);if(void 0===d.throttleSend)y();else{if(o[s.message])return;o[s.message]=!0,setTimeout(y,d.throttleSend)}}}},t._getReferrer=function(t){var r=t.referrer,n=typeof r;return"function"===n?r():"string"===n&&r?r:!1!==r&&e.location?e.location.href:void 0},t.getErrorSetting=function(e){return t._errorSettings[e]},t._buildExperiments=function(e){return e instanceof Array?e.join(";"):""},t._buildAdditional=function(e,t){var n="";try{var i=r(r({},e),t);0!==Object.keys(i).length&&(n=JSON.stringify(i))}catch(e){}return n},t._getErrorData=function(r,i,o){i=i||{};var a=t._buildExperiments(o.experiments),s=t._buildAdditional(o.additional,r.additional),l={"-stack":r.stack,"-url":r.file,"-line":r.line,"-col":r.col,"-block":r.block,"-method":r.method,"-msg":r.message,"-env":o.env,"-external":r.external,"-externalCustom":r.externalCustom,"-project":o.project,"-service":r.service||o.service,"-page":r.page||o.page,"-platform":o.platform,"-level":r.level,"-experiments":a,"-version":o.version,"-region":o.region,"-dc":o.dc,"-host":o.host,"-yandexuid":o.yandexuid,"-loggedin":o.loggedin,"-coordinates_gp":r.coordinates_gp||o.coordinates_gp,"-referrer":t._getReferrer(o),"-source":r.source,"-sourceMethod":r.sourceMethod,"-type":i.isCustom?r.type:"","-additional":s,"-adb":n(Ya.blocker)||n(o.blocker),"-cdn":e.YaStaticRegion,"-ua":navigator.userAgent,"-silent":i.silent,"-ts":+new Date,"-init-ts":o.initTimestamp};return o.debug&&e.console&&console[console[r.level]?r.level:"error"]("[error-counter] "+r.message,l,r.stack),{path:r.path,vars:l}},t._baseNormalizeError=function(e){var t=(e=e||{}).error,r=e.filename||e.fileName||"",n=t&&t.stack||e.stack||"",i=e.message||"",o=t&&t.additional||e.additional;return{file:r,line:e.lineno||e.lineNumber,col:e.colno||e.colNumber,stack:n,message:i,additional:o}},t._normalizeError=function(e){var r=t._baseNormalizeError(e),n="uncaught",i=t._isExternalError(r.file,r.message,r.stack),o="",a="";return i.hasExternal?(n="external",o=i.common,a=i.custom):/^Script error\.?$/.test(r.message)&&(n="script"),r.external=o,r.externalCustom=a,r.type=n,r},t._createVarsString=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&(e[r]||0===e[r])&&t.push(r+"="+encodeURIComponent(e[r]).replace(/\*/g,"%2A"));return t.join(",")},t._sendError=function(e,r){t.send(null,e,t._createVarsString(r),null,null,null,null)};var s=function(e){t._handleError(e,!1)},l=function(e){var r=e.target;if(r){var n=r.srcset||r.src;if(n||(n=r.href),n){var i=r.tagName||"UNKNOWN";t.logError({message:i+" load error",additional:{src:n}})}}};t._parseTraceablePromiseStack=function(){}}("undefined"!=typeof self?self:window,Ya.Rum)},4491:()=>{!function(e){if(!("undefined"!=typeof self?self:window).Ya||!Ya.Rum)throw new Error("Rum: interface is not defined");var t=Ya.Rum;t.getSetting=function(e){var r=t._settings[e];return null===r?null:r||""}}()},2927:()=>{!function(){"use strict";var e;(e=Ya.Rum).logError=function(t,r,n){t=t||{},"string"!=typeof r&&void 0!==r||((r=new Error(r)).justCreated=!0);var i=t.message||"",o=e._baseNormalizeError(r);o.message&&!t.ignoreErrorMessage&&(i&&(i+="; "),i+=o.message),o.message=i||"Empty error";for(var a=["service","source","type","block","additional","level","page","method","sourceMethod","coordinates_gp"],s=0;s<a.length;s++){var l=a[s];t[l]?o[l]=t[l]:r&&r[l]&&(o[l]=r[l])}e._handleError(o,!0,n)}}()},6212:()=>{!function(){"use strict";var e,t;e=Ya.Rum,t="__RumTraceablePromise",e._parseTraceablePromiseStack=function(e){if(e&&e.__stack){for(var r=e.__stack.split("\n"),n=[],i=0;i<r.length;i++)-1===r[i].indexOf(t)&&n.push(r[i].trim());return n.join("\n")}},e._traceUnhandledRejection=function(){function e(e){var n,i,o=new r((function(e,t){n=e,i=t}));o.__stack=new Error(t).stack;try{e(n,i)}catch(r){i(r)}return o}if("Promise"in window&&window.Promise.name!==t){var r=window.Promise;try{e.prototype=r.prototype,e.prototype.constructor=e,Object.setPrototypeOf(e,r),Object.defineProperty(e,"name",{value:t}),window.Promise=e}catch(r){}}}}()},8533:function(e,t,r){"use strict";function n(e){return-1===["tr","id","fi","lt","pl","et","lv"].indexOf(e)?"ru":"en"}function i(e,t){for(var r=[],n=e.length,i=0;i<n;){var o=e.indexOf("{",i);if(-1===o)return r.push(e.substring(i)),r;var a=e.indexOf("}",o);if(-1===a)return r.push(e.substring(i)),r;r.push(e.substring(i,o),t[e.substring(o+1,a)]),i=a+1}return r}function o(e,t,r){void 0===r&&(r={});var o=function(e,t){var r,n,i;try{for(var o=a(D),s=o.next();!s.done;s=o.next()){if((i=e[s.value])&&t in i)return i[t]}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return t}(e,t);return"string"===typeof o?i(o,r):function(e,t){var r=D.find((function(e){return Boolean(k[e])}))||n(D[0]);return i((0,k[r])(t.count,e),t)}(o,r)}var a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveI18nLang=t.getI18nLang=t.setI18nLang=t.i18nRaw=void 0;var l=s(r(6606)),d=s(r(701)),c=s(r(5480)),u=s(r(6587)),h=s(r(9753)),f=s(r(650)),p=s(r(205)),g=s(r(7228)),v=s(r(599)),m=s(r(8275)),E=s(r(2598)),y=s(r(7424)),A=s(r(3175)),S=s(r(6187)),T=s(r(4120)),R=s(r(4701)),_=s(r(9254)),w=s(r(9970)),b=s(r(3878)),P=s(r(3397)),I=s(r(1778)),O=s(r(3025)),C=s(r(4256)),k={be:l.default,en:d.default,id:c.default,kk:u.default,ru:h.default,tr:f.default,tt:p.default,uk:g.default,uz:v.default,de:m.default,es:E.default,hy:y.default,ka:A.default,ky:S.default,sr:T.default,fr:R.default,lv:_.default,lt:w.default,ro:b.default,fi:P.default,az:I.default,zh:O.default,he:C.default},D=["ru"];t.default=function(e){return function(t,r){return void 0===r&&(r={}),o(e,t,r).join("")}},t.i18nRaw=function(e){return function(t,r){return void 0===r&&(r={}),o(e,t,r)}},t.setI18nLang=function(e){D="string"===typeof e?[e,n(e),"ru"]:e},t.getI18nLang=function(){return D[0]},t.resolveI18nLang=function(e,t,r){var n=t;if(-1===e.indexOf(n))switch(r){case"com":n="en";break;case"com.tr":n="tr";break;default:n="ru"}return n}},1778:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},6606:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},8275:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},701:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?1===e?t.one:t.some:t.none||""}},2598:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},3397:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},4701:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},4256:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},7424:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},5480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?t.some:t.none||""}},3175:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},6587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,n=e%100;return e?1===r&&11!==n?t.one:r>1&&r<5&&(n<10||n>20)?t.some:t.many||"":t.none||""}},6187:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},9970:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},9254:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},3878:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},9753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,n=e%100;return e?1===r&&11!==n?t.one:r>=2&&r<=4&&12!==n&&13!==n&&14!==n?t.some:t.many||"":t.none||""}},4120:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,n=e%100;return e?1===r&&11!==n?t.one:r>1&&r<5&&(n<10||n>20)?t.some:t.many||"":t.none||""}},205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,n=e%100;return e?1===r&&11!==n?t.one:r>1&&r<5&&(n<10||n>20)?t.some:t.many||"":t.none||""}},7228:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(9753));t.default=i.default},599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,n=e%100;return e?1===r&&11!==n?t.one:r>1&&r<5&&(n<10||n>20)?t.some:t.many||"":t.none||""}},3025:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(701));t.default=i.default},5235:()=>{!function(e,t){function r(){b=e.getVarsList(),e.getSetting("sendClientUa")&&b.push("1042="+encodeURIComponent(navigator.userAgent))}function n(){P=b.concat(["143.2129="+K])}function i(e){function t(){removeEventListener("DOMContentLoaded",t),removeEventListener("load",t),e()}"loading"===document.readyState?(addEventListener("DOMContentLoaded",t),addEventListener("load",t)):e()}function o(){var t;e.getSetting("disableOnLoadTasks")||(removeEventListener("load",o),(t=e.getSetting("periodicStatsIntervalMs"))||null===t||(t=15e3),t&&(W=setInterval(h,t)),addEventListener("beforeunload",h),function(){if(L){f(M.getEntriesByType("navigation")),f(M.getEntriesByType("resource"));try{new L((function(e){f(e.getEntries())})).observe({entryTypes:["resource","navigation"]})}catch(e){}e._periodicTasks.push(g)}}(),function(){if(L)try{new L((function(e,t){var r=e.getEntries()[0];r&&(c("first-input",r.processingStart-r.startTime),t.disconnect())})).observe({type:"first-input",buffered:!0})}catch(e){}}(),function(){if(L){var e=new L((function(e){var t=e.getEntries();null==X&&(X=0);for(var r=0;r<t.length;r++){var n=t[r];n.hadRecentInput||(X+=n.value)}}));try{e.observe({type:"layout-shift",buffered:!0})}catch(e){}addEventListener("visibilitychange",(function t(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",t);try{"function"==typeof e.takeRecords&&e.takeRecords(),e.disconnect()}catch(e){}v()}})),addEventListener("beforeunload",v)}}(),function(){if(L&&(e.getSetting("forcePaintTimeSending")||!e.isVisibilityChanged())){var t=new L((function(e){for(var t=e.getEntries(),r=0;r<t.length;r++){var n=t[r];J=n.renderTime||n.loadTime}Z||(s("largest-loading-elem-paint",J),Z=!0)}));try{t.observe({type:"largest-contentful-paint",buffered:!0})}catch(e){}addEventListener("visibilitychange",(function e(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",e);try{"function"==typeof t.takeRecords&&t.takeRecords(),t.disconnect()}catch(e){}m()}})),addEventListener("beforeunload",m)}}())}function a(){var t=V.domContentLoadedEventStart,r=V.domContentLoadedEventEnd;if(0!==t||0!==r){var n=0===V.responseStart?K:V.responseStart,i=0===V.domainLookupStart?K:V.domainLookupStart,o=b.concat(["2129="+K,"1036="+(i-K),"1037="+(V.domainLookupEnd-V.domainLookupStart),"1038="+(V.connectEnd-V.connectStart),V.secureConnectionStart&&"1383="+(V.connectEnd-V.secureConnectionStart),"1039="+(V.responseStart-V.connectEnd),"1040="+(V.responseEnd-n),"1040.906="+(V.responseEnd-i),"1310.2084="+(V.domLoading-n),"1310.2085="+(V.domInteractive-n),"1310.1309="+(r-t),"1310.1007="+(t-n),navigator.deviceMemory&&"3140="+navigator.deviceMemory,navigator.hardwareConcurrency&&"3141="+navigator.hardwareConcurrency]);Object.keys(I).forEach((function(e){e in V&&V[e]&&o.push(I[e]+"="+_(V[e],K))})),e.vsStart?(o.push("1484="+(O[e.vsStart]||2771)),e.vsChanged&&o.push("1484.719=1")):o.push("1484="+O.visible),x&&(x.redirectCount&&o.push("1384.1385="+x.redirectCount),1!==x.type&&2!==x.type||o.push("770.76="+x.type)),y(o),w("690.1033",o)}else setTimeout(a,50)}function s(r,n,i,o){n===t&&(n=N()),i!==t&&!0!==i||e.mark(r,n);var a=T(r);if(a.push("207="+_(n)),l(a,o)){w("690.2096.207",a),U[r]=U[r]||[],U[r].push(n);var s=e._markListeners[r];s&&s.length&&s.forEach((function(e){e(n)}))}}function l(e,r){if(r){if(r.isCanceled&&r.isCanceled())return!1;var n=e.reduce((function(e,t,r){return"string"==typeof t&&(e[t.split("=")[0]]=r),e}),{});Object.keys(r).forEach((function(i){if("function"!=typeof r[i]){var o=n[i],a=i+"="+r[i];o===t?e.push(a):e[o]=a}}))}return!0}function d(e,t){var r=H[e];r&&0!==r.length&&(r.push(N(),t),c(e))}function c(r,n,i){var o,a,s,d=H[r];if(void 0!==n?o=(a=e.getTime())-n:d&&(o=d[0],a=d[1],s=d[2]),o!==t&&a!==t){var c=T(r);c.push("207.2154="+_(o),"207.1428="+_(a),"2877="+_(a-o)),l(c,i)&&l(c,s)&&(w("690.2096.2877",c),delete H[r])}}function u(t,r){A(r,(function(n){if(n){var i=T(t);e.getSetting("sendUrlInResTiming")&&i.push("13="+encodeURIComponent(r)),R(i,n[0]),w("690.2096.2044",i)}}))}function h(){var t=!1;e._periodicTasks.forEach((function(e){e()&&(t=!0)})),t||clearInterval(W)}function f(e){if(e&&e.length)for(var t=B,r=0;r<e.length;r++){var n=p(e[r]);if(n){var i=n.domain+"-"+n.extension,o=t[i]=t[i]||{count:0,size:0};o.count++,o.size+=n.size}}}function p(e){var t=e.transferSize;if(null!=t){Y.href=e.name;var r=Y.pathname;if(0!==r.indexOf("/clck")){var n=r.lastIndexOf("."),i="";return-1!=n&&r.lastIndexOf("/")<n&&r.length-n<=5&&(i=r.slice(n+1)),{size:t,domain:Y.hostname,extension:i}}}}function g(){var t=e.getSetting("maxTrafficCounters")||250;if(Q>=t)return!1;for(var r=Object.keys(B),n="",i=0;i<r.length;i++){var o=r[i],a=B[o];n+=encodeURIComponent(o)+"!"+a.count+"!"+a.size+";"}n.length&&(Q++,w("690.2096.361",b.concat(["d="+n,"t="+_(N())])));return B={},Q<t}function v(){if(null!=X){var e=Math.round(1e6*X)/1e6;w("690.2096.4004",b.concat("s="+e)),X=null}}function m(){null!=J&&(s("largest-contentful-paint",J),J=null)}function E(t,r,n){if(e._tti){var i=N(),o=function(t,o,a){var l={2796.2797:S(a,r),689.2322:_(i)};n&&Object.keys(n).forEach((function(e){l[e]=n[e]})),s(t||"2795",o,!0,l),e._tti.fired=!0};!function n(){var a,s=r||i,l=N(),d=e._tti.events||[],c=d.length;0!==c&&(a=d[c-1],s=Math.max(s,Math.floor(a.startTime+a.duration))),l-s>=3e3?o(t,s,d):l-s>=2e4?o(t,(r||i)+2e4,d):setTimeout(n,1e3)}()}}function y(e){F&&e.push("2437="+(C[F.type]||2771),F.downlinkMax!==t&&"2439="+F.downlinkMax,F.effectiveType&&"2870="+F.effectiveType,F.rtt!==t&&"rtt="+F.rtt,F.downlink!==t&&"dwl="+F.downlink)}function A(e,t){if(!G)return t(null);j.href=e;var r=j.href,n=0,i=100;setTimeout((function e(){var o=M.getEntriesByName(r);if(o.length)return t(o);n++<10?(setTimeout(e,i),i+=i):t(null)}),0)}function S(e,t){return t=t||0,(e=e||[]).filter((function(e){return e.startTime-t>=-50})).map((function(e){var t=e.name?e.name.split("-").map((function(e){return e[0]})).join(""):"u",r=Math.floor(e.startTime);return t+"-"+r+"-"+Math.floor(r+e.duration)})).join(".")}function T(t){return P.concat(["1701="+t,e.ajaxStart&&"1201.2154="+_(e.ajaxStart),e.ajaxComplete&&"1201.2052="+_(e.ajaxComplete)])}function R(e,t){Object.keys(I).forEach((function(r){if(r in t){var n=t[r];(n||0===n)&&e.push(I[r]+"="+_(n))}}))}function _(e,t){return"string"==typeof e?encodeURIComponent(e):Math.round(1e3*(e-(t||0)))/1e3}function w(t,r){var n=encodeURIComponent(window.YaStaticRegion||"unknown");r.push("-cdn="+n);var i=r.filter(Boolean).join(",");e.send(null,t,i)}if(!e)throw new Error("Rum: interface is not included");if(!e.enabled)return e.getSetting=function(){return""},e.getVarsList=function(){return[]},void(e.getResourceTimings=e.pushConnectionTypeTo=e.pushTimingTo=e.normalize=e.sendCounter=e.sendDelta=e.sendTimeMark=e.sendResTiming=e.sendTTI=e.makeSubPage=e.sendHeroElement=e.onReady=function(){});e.getVarsList=function(){var t=e._vars;return Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e]).replace(/\*/g,"%2A")}))},e.setVars=function(t){Object.keys(t).forEach((function(r){e._vars[r]=t[r]})),r(),n()};var b,P,I={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137},O={visible:1,hidden:2,prerender:3},C={bluetooth:2064,cellular:2065,ethernet:2066,none:1229,wifi:2067,wimax:2068,other:861,unknown:836,0:836,1:2066,2:2067,3:2070,4:2071,5:2768},k={"first-paint":2793,"first-contentful-paint":2794},D=Object.keys(k).length,N=e.getTime,L=window.PerformanceObserver,M=window.performance||{},V=M.timing||{},x=M.navigation||{},F=navigator.connection,U={},B={},H=e._deltaMarks,j=document.createElement("link"),Y=document.createElement("a"),G="function"==typeof M.getEntriesByType,K=V.navigationStart;if(r(),n(),e.ajaxStart=0,e.ajaxComplete=0,L)try{new L((function(e,t){var r=e.getEntriesByType("navigation")[0];if(r){t&&t.disconnect();var n=[];R(n,r),y(n),w("690.2096.2892",b.concat(n))}})).observe({entryTypes:["navigation"]})}catch(e){}i((function(){K&&setTimeout((function(){e.sendTimeMark=s,e.sendResTiming=u,e.timeEnd=d;for(var t=e._defRes;t.length;){var r=t.shift();u(r[0],r[1])}for(var n=e._defTimes;n.length;){var i=n.shift();s(i[0],i[1],!1,i[2])}Object.keys(H).forEach((function(e){c(e)})),a(),function t(){if(G&&(e.getSetting("forcePaintTimeSending")||!e.isVisibilityChanged())){for(var r=M.getEntriesByType("paint"),n=0;n<r.length;n++){var i=r[n],o=k[i.name];o&&!q[i.name]&&(q[i.name]=!0,z++,s("1926."+o,i.startTime))}if(z<D)try{new L((function(e,r){t(),r&&r.disconnect()})).observe({entryTypes:["paint"]})}catch(e){}}}(),e.getSetting("sendAutoElementTiming")&&$(),E(),"complete"===document.readyState?o():addEventListener("load",o)}),0)})),e._getCommonVars=function(){return b};var W,q={},z=0;e.getTimeMarks=function(){return U},e._periodicTasks=[];var X,Q=0,J=null,Z=!1,$=L?function(){if(e.getSetting("forcePaintTimeSending")||!e.isVisibilityChanged())try{new L((function(e){for(var t=e.getEntries(),r=0;r<t.length;r++){var n=t[r];s("element-timing."+n.identifier,n.startTime)}})).observe({type:"element",buffered:!0})}catch(e){}}:function(){};e.sendTTI=E,e.sendHeroElement=function(e){s("2876",e)},e._subpages={},e.makeSubPage=function(t,r){var n=e._subpages[t];e._subpages[t]=void 0===n?n=0:++n;var i=!1;return{689.2322:_(void 0!==r?r:N()),2924:t,2925:n,isCanceled:function(){return i},cancel:function(){i=!0}}},e._getLongtasksStringValue=S,e.getResourceTimings=A,e.pushConnectionTypeTo=y,e.pushTimingTo=R,e.normalize=_,e.sendCounter=w,e.sendDelta=c,e.sendTrafficData=g,e.finalizeLayoutShiftScore=v,e.finalizeLargestContentfulPaint=m,e.onReady=i}(Ya.Rum)},7873:()=>{Ya.Rum.enabled&&addEventListener("load",(function e(){removeEventListener("load",e);var t=Ya.Rum;if(t.sendTimeMark("1724"),t.getSetting("sendAutoResTiming"))for(var r=document.querySelectorAll("script[data-rCid], div[data-rCid]"),n=0,i=r.length;n<i;n++){var o=r[n],a=o.src;if(!a){var s=getComputedStyle(o).backgroundImage;if(s){var l=s.match(/^url\(["']?(.*?)["']?\)$/);l&&(a=l[1])}}a&&t.sendResTiming(o.getAttribute("data-rCid"),a)}}))},9418:()=>{!function(e){function t(e){for(var t=0,r=0;r<e.length;++r)t+=e[r]*e[r];return Math.sqrt(t/e.length)}var r,n,i,o=0,a=[],s=[];e.enabled&&(e.getSetting("longTaskMetric")&&e._tti&&e._periodicTasks.push((function(){if(!e._tti.fired)return!0;var t=e.getSetting("maxLongTaskCounters")||10;if(++o>t)return!1;if(e._tti.eventsAfterTTI.length){var r=e._getCommonVars().slice();r.push("2796.2797="+e._getLongtasksStringValue(e._tti.eventsAfterTTI)),r.push("689.2322="+e.normalize(e.getTime())),e.sendCounter("690.2096.2796",r),e._tti.eventsAfterTTI=[]}return!0})),e.getSetting("scrollMetric")&&(i=!1,e.getTime(),500,addEventListener("scroll",(function(){var t=e.getTime();i?a.push(t-r):(i=!0,e.getTime()),r=t,clearTimeout(n),n=setTimeout((function(){i=!1}),500)})),e._periodicTasks.push((function(){if(a.length){var r=e._getCommonVars().concat(["d="+t(a)]);e.sendCounter("690.2096.768",r),a=[]}return!0}))),e.getSetting("scrollLatencyMetric")&&function(){try{if(!window.PerformanceScrollUpdateLatency)return!1;new PerformanceObserver((function(e){e.getEntries().forEach((function(e){s.push(e.duration)}))})).observe({entryTypes:["scrollUpdateLatency"]})}catch(e){return!1}return!0}()&&e._periodicTasks.push((function(){if(s.length){var r=e._getCommonVars().concat(["d="+t(s)]);e.sendCounter("690.2096.768.2373",r),s=[]}return!0})))}(Ya.Rum)},8058:()=>{!function(){function e(){var e=Ya.Rum.getSetting("clck"),n=r.join("\r\n");if(r=[],t=null,e&&!(navigator.sendBeacon&&Ya.Rum.getSetting("beacon")&&navigator.sendBeacon(e,n))){var i=new XMLHttpRequest;i.open("POST",e),i.send(n)}}var t,r=[];Ya.Rum.send=function(n,i,o,a,s,l,d){clearTimeout(t);var c=Ya.Rum.getSetting("slots"),u=Ya.Rum.getSetting("experiments"),h=["/reqid="+Ya.Rum.getSetting("reqid"),d?"/"+d.join("/"):"",i?"/path="+i:"",s?"/events="+s:"",c?"/slots="+c.join(";"):"",u?"/experiments="+u.join(";"):"",o?"/vars="+o:"","/cts="+(new Date).getTime(),"/*"];r.push(h.join("")),r.length<42?t=setTimeout(e,15):e()}}()},7323:()=>{!function(e,t){if(e.Ya=e.Ya||{},Ya.Rum)throw new Error("Rum: interface is already defined");var r=e.performance,n=r&&r.timing&&r.timing.navigationStart||Ya.startPageLoad||+new Date,i=e.requestAnimationFrame;Ya.Rum={enabled:!!r,vsStart:document.visibilityState,vsChanged:!1,_defTimes:[],_defRes:[],_deltaMarks:{},_markListeners:{},_settings:{},_vars:{},init:function(e,t){this._settings=e,this._vars=t},getTime:r&&r.now?function(){return r.now()}:Date.now?function(){return Date.now()-n}:function(){return new Date-n},time:function(e){this._deltaMarks[e]=[this.getTime()]},timeEnd:function(e,t){var r=this._deltaMarks[e];r&&0!==r.length&&r.push(this.getTime(),t)},sendTimeMark:function(e,t,r,n){void 0===t&&(t=this.getTime()),this._defTimes.push([e,t,n]),this.mark(e,t)},sendResTiming:function(e,t){this._defRes.push([e,t])},sendRaf:function(e){var t=this.getSetting("forcePaintTimeSending");if(i&&(t||!this.isVisibilityChanged())){var r=this,n="2616."+e;i((function(){!t&&r.isVisibilityChanged()||(r.getSetting("sendFirstRaf")&&r.sendTimeMark(n+".205"),i((function(){!t&&r.isVisibilityChanged()||r.sendTimeMark(n+".1928")})))}))}},isVisibilityChanged:function(){return this.vsStart&&("visible"!==this.vsStart||this.vsChanged)},mark:r&&r.mark?function(e,t){r.mark(e+(t?": "+t:""))}:function(){},getSetting:function(e){var t=this._settings[e];return null===t?null:t||""},on:function(e,t){"function"==typeof t&&(this._markListeners[e]=this._markListeners[e]||[]).push(t)},sendTrafficData:function(){},finalizeLayoutShiftScore:function(){},finalizeLargestContentfulPaint:function(){}},document.addEventListener&&document.addEventListener("visibilitychange",(function e(){Ya.Rum.vsChanged=!0,document.removeEventListener("visibilitychange",e)}))}(window)},7790:()=>{!function(){if(window.PerformanceLongTaskTiming){var e=function(e,t){return(e=e.concat(t)).length>300&&(e=e.slice(e.length-300)),e},t=Ya.Rum._tti={events:[],eventsAfterTTI:[],fired:!1,observer:new PerformanceObserver((function(r){var n=r.getEntries();t.events=e(t.events,n),t.fired&&(t.eventsAfterTTI=e(t.eventsAfterTTI,n))}))};t.observer.observe({entryTypes:["longtask"]})}}()},2074:(e,t)=>{"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function n(e,t,r){for(var n,o,a=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(i[(o=n)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}t.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=r(e),s=i[0],l=i[1],d=new a(function(e,t,r){return 3*(t+r)/4-r}(0,s,l)),c=0,u=l>0?s-4:s;for(n=0;n<u;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],d[c++]=t>>16&255,d[c++]=t>>8&255,d[c++]=255&t;return 2===l&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,d[c++]=255&t),1===l&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,d[c++]=t>>8&255,d[c++]=255&t),d},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,a=[],s=0,l=r-o;s<l;s+=16383)a.push(n(e,s,s+16383>l?l:s+16383));return 1===o?(t=e[r-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),a.join("")};for(var i=[],o=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,d=s.length;l<d;++l)i[l]=s[l],o[s.charCodeAt(l)]=l;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},2306:(e,t,r)=>{"use strict";function n(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,i.prototype),t}function i(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}return o(e,t,r)}function o(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|u(e,t);let o=n(r);const a=o.write(e,t);a!==r&&(o=o.slice(0,a));return o}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return i.from(o,t,r);const a=function(e){if(i.isBuffer(e)){const t=0|c(e.length),r=n(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||Y(e.length)?n(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(a)return a;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return a(e),n(e<0?0:0|c(e))}function l(e){const t=e.length<0?0:0|c(e.length),r=n(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,i.prototype),n}function c(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function u(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(o)return n?-1:U(e).length;t=(""+t).toLowerCase(),o=!0}}function h(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return w(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return _(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function f(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function p(e,t,r,n,o){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"===typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,o);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}let a,s=1,l=e.length,d=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,l/=2,d/=2,r/=2}if(i){let n=-1;for(a=r;a<l;a++)if(o(e,a)===o(t,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===d)return n*s}else-1!==n&&(a-=a-n),n=-1}else for(r+d>l&&(r=l-d),a=r;a>=0;a--){let r=!0;for(let n=0;n<d;n++)if(o(e,a+n)!==o(t,n)){r=!1;break}if(r)return a}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(Y(n))return a;e[r+a]=n}return a}function m(e,t,r,n){return H(U(t,e.length-r),e,r,n)}function E(e,t,r,n){return H(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function y(e,t,r,n){return H(B(t),e,r,n)}function A(e,t,r,n){return H(function(e,t){let r,n,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?W.fromByteArray(e):W.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128===(192&r)&&(l=(31&t)<<6|63&r,l>127&&(o=l));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){const t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function R(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function _(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function w(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=J[e[o]];return i}function b(e,t,r){const n=e.slice(t,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,r,n,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n,i){V(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function C(e,t,r,n,i){V(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function k(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,i){return t=+t,r>>>=0,i||k(e,0,r,4),q.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,i){return t=+t,r>>>=0,i||k(e,0,r,8),q.write(e,t,r,n,52,8),r+8}function L(e,t,r){X[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=this.name+" ["+e+"]",this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return this.name+" ["+e+"]: "+this.message}}}function M(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t="_"+e.slice(r-3,r)+t;return""+e.slice(0,r)+t}function V(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?">= 0"+n+" and < 2"+n+" ** "+8*(o+1)+n:">= -(2"+n+" ** "+(8*(o+1)-1)+n+") and < 2 ** "+(8*(o+1)-1)+n:">= "+t+n+" and <= "+r+n,new X.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){x(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||F(t,e.length-(r+1))}(n,i,o)}function x(e,t){if("number"!==typeof e)throw new X.ERR_INVALID_ARG_TYPE(t,"number",e)}function F(e,t,r){if(Math.floor(e)!==e)throw x(e,r),new X.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new X.ERR_BUFFER_OUT_OF_BOUNDS;throw new X.ERR_OUT_OF_RANGE(r||"offset",">= "+(r?1:0)+" and <= "+t,e)}function U(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function B(e){return W.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function H(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!==e}function G(e){return"undefined"===typeof BigInt?K:e}function K(){throw new Error("BigInt not supported")}const W=r(2074),q=r(1518),z="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=i,t.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},t.INSPECT_MAX_BYTES=50;t.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(e,t,r){return o(e,t,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(e,t,r){return function(e,t,r){return a(e),e<=0?n(e):void 0!==t?"string"===typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}(e,t,r)},i.allocUnsafe=function(e){return s(e)},i.allocUnsafeSlow=function(e){return s(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(j(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=i.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(j(t,Uint8Array))o+t.length>n.length?(i.isBuffer(t)||(t=i.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!i.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},i.byteLength=u,i.prototype._isBuffer=!0,i.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)f(this,t,t+1);return this},i.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},i.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},i.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):h.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},z&&(i.prototype[z]=i.prototype.inspect),i.prototype.compare=function(e,t,r,n,o){if(j(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const l=Math.min(a,s),d=this.slice(n,o),c=e.slice(t,r);for(let i=0;i<l;++i)if(d[i]!==c[i]){a=d[i],s=c[i];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return y(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};i.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=G((function(e){x(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),i.prototype.readBigUInt64BE=G((function(e){x(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=G((function(e){x(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),i.prototype.readBigInt64BE=G((function(e){x(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),i.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),q.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),q.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),q.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),q.read(this,e,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){I(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){I(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeBigUInt64LE=G((function(e,t){return void 0===t&&(t=0),O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),i.prototype.writeBigUInt64BE=G((function(e,t){return void 0===t&&(t=0),C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeBigInt64LE=G((function(e,t){return void 0===t&&(t=0),O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),i.prototype.writeBigInt64BE=G((function(e,t){return void 0===t&&(t=0),C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),i.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},i.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(o=t;o<r;++o)this[o]=e;else{const a=i.isBuffer(e)?e:i.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};const X={};L("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),L("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'+e+'" argument must be of type number. Received type '+typeof t}),TypeError),L("ERR_OUT_OF_RANGE",(function(e,t,r){let n='The value of "'+e+'" is out of range.',i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=M(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=M(i)),i+="n"),n+=" It must be "+t+". Received "+i,n}),RangeError);const Q=/[^+/0-9A-Za-z-_]/g,J=function(){const e=new Array(256);for(let t=0;t<16;++t){const r=16*t;for(let n=0;n<16;++n)e[r+n]="0123456789abcdef"[t]+"0123456789abcdef"[n]}return e}()},1518:(e,t)=>{t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,d=l>>1,c=-7,u=r?i-1:0,h=r?-1:1,f=e[t+u];for(u+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+u],u+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+u],u+=h,c-=8);if(0===o)o=1-d;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=d}return(f?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,d=8*o-i-1,c=(1<<d)-1,u=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=c?(s=0,a=c):a+u>=1?(s=(t*l-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,d+=i;d>0;e[r+f]=255&a,f+=p,a/=256,d-=8);e[r+f-p]|=128*g}},1299:(e,t)=>{"use strict";function r(e,t){try{return t(e)}catch(r){return e}}t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var i={},a=t||{},s=e.split(o),l=a.decode||n,d=0;d<s.length;d++){var c=s[d],u=c.indexOf("=");if(!(u<0)){var h=c.substr(0,u).trim(),f=c.substr(++u,c.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==i[h]&&(i[h]=r(f,l))}}return i},t.serialize=function(e,t,r){var n=r||{},o=n.encode||i;if("function"!==typeof o)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var s=o(t);if(s&&!a.test(s))throw new TypeError("argument val is invalid");var l=e+"="+s;if(null!=n.maxAge){var d=n.maxAge-0;if(isNaN(d))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(d)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return l};var n=decodeURIComponent,i=encodeURIComponent,o=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},6805:e=>{function t(e,t){var r,n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"===typeof btoa){var o=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(a).concat([o]).join("\n")}return[n].join("\n")}e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var n=t(r,e);return r[2]?"@media "+r[2]+"{"+n+"}":n})).join("")},r.i=function(e,t){"string"===typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"===typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"===typeof a[0]&&n[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),r.push(a))}},r}},6386:e=>{e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return parseInt(t.substring(r+5,t.indexOf(".",r)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},6048:e=>{"use strict";var t=Array.isArray,r=Object.keys,n=Object.prototype.hasOwnProperty;e.exports=function e(i,o){if(i===o)return!0;if(i&&o&&"object"==typeof i&&"object"==typeof o){var a,s,l,d=t(i),c=t(o);if(d&&c){if((s=i.length)!=o.length)return!1;for(a=s;0!==a--;)if(!e(i[a],o[a]))return!1;return!0}if(d!=c)return!1;var u=i instanceof Date,h=o instanceof Date;if(u!=h)return!1;if(u&&h)return i.getTime()==o.getTime();var f=i instanceof RegExp,p=o instanceof RegExp;if(f!=p)return!1;if(f&&p)return i.toString()==o.toString();var g=r(i);if((s=g.length)!==r(o).length)return!1;for(a=s;0!==a--;)if(!n.call(o,g[a]))return!1;for(a=s;0!==a--;)if(!e(i[l=g[a]],o[l]))return!1;return!0}return i!==i&&o!==o}},6394:e=>{function t(){var e,t,r,n,i=document.createElement("canvas");try{e=i.getContext("webgl")||i.getContext("experimental-webgl")}catch(o){}return e&&(t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t.UNMASKED_VENDOR_WEBGL),n=e.getParameter(t.UNMASKED_RENDERER_WEBGL)),{debugInfo:t,vendor:r,renderer:n}}e.exports=t,e.exports.getGpu=t},7179:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ErrorDetails:()=>i,ErrorTypes:()=>n});const n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},1673:(e,t,r)=>{"use strict";function n(){const e=function(){if("undefined"!==typeof window)return window.MediaSource||window.WebKitMediaSource}(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!r&&!!n}r.r(t),r.d(t,{isSupported:()=>n})},8118:e=>{"use strict";e.exports={TALB:"album",TBPM:"bpm",TCOM:"composer",TCON:"genre",TCOP:"copyright",TDEN:"encoding-time",TDLY:"playlist-delay",TDOR:"original-release-time",TDRC:"recording-time",TDRL:"release-time",TDTG:"tagging-time",TENC:"encoder",TEXT:"writer",TFLT:"file-type",TIPL:"involved-people",TIT1:"content-group",TIT2:"title",TIT3:"subtitle",TKEY:"initial-key",TLAN:"language",TLEN:"length",TMCL:"credits",TMED:"media-type",TMOO:"mood",TOAL:"original-album",TOFN:"original-filename",TOLY:"original-writer",TOPE:"original-artist",TOWN:"owner",TPE1:"artist",TPE2:"band",TPE3:"conductor",TPE4:"remixer",TPOS:"set-part",TPRO:"produced-notice",TPUB:"publisher",TRCK:"track",TRSN:"radio-name",TRSO:"radio-owner",TSOA:"album-sort",TSOP:"performer-sort",TSOT:"title-sort",TSRC:"isrc",TSSE:"encoder-settings",TSST:"set-subtitle",TXXX:"user-defined-text-information",TYER:"year",WCOM:"url-commercial",WCOP:"url-legal",WOAF:"url-file",WOAR:"url-artist",WOAS:"url-source",WORS:"url-radio",WPAY:"url-payment",WPUB:"url-publisher",WAF:"url-file",WAR:"url-artist",WAS:"url-source",WCM:"url-commercial",WCP:"url-copyright",WPB:"url-publisher",COMM:"comments",USLT:"lyrics",APIC:"image",PIC:"image"}},6107:e=>{"use strict";e.exports=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"]},3243:function(e,t,r){var n;"object"===typeof window&&window.window===window?(n=window).ID3={}:n="object"===typeof r.g&&r.g.global===r.g?r.g:this,"slice"in Uint8Array.prototype||(Uint8Array.prototype.slice=Uint8Array.prototype.subarray),e.exports=n},3944:e=>{"use strict";e.exports=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"]},4432:(e,t,r)=>{"use strict";function n(e,t,r){var n,i,s,l,h={tag:null,value:null},v=a(e,4,0),m=a(e,1,0);r||o(e.slice(4));if(0!==[e[8],e[9]][1])return!1;if(!(v in c))return!1;if(h.tag=c[v],"T"===m){if(0===(i=e[10]))h.value=g(e.slice(11));else if(3===i)h.value=p(e.slice(11));else{if(1!==i&&2!==i)return!1;h.value=f(e.slice(11))}"TCON"===v&&parseInt(h.value)&&(h.value=d[parseInt(h.value)])}else if("W"===m)h.value=p(e.slice(10));else if("COMM"===v||"USLT"===v){for(i=e[10],l=0,n=s=14;;n++)if(1===i||2===i){if(0===e[n]&&0===e[n+1]){s=n+2;break}n++}else if(0===e[n]){s=n+1;break}if(0===i||3===i)h.value=p(e.slice(s));else{if(1!==i&&2!==i)return!1;h.value=f(e.slice(s))}}else if("APIC"===v){i=e[10];var E={type:null,mime:null,imageType:null,description:null,data:null};for(l=0,n=s=11;;n++)if(0===e[n]){l=n-s;break}for(E.mime=p(e.slice(s),l),E.type=u[e[s+l+1]]||"other",s+=l+2,l=0,n=s;;n++)if(0===e[n]){l=n-s;break}for(E.description=0===l?null:f(e.slice(s),l),n=s+=l+1;0===e[n];n++)s++;E.data=e.slice(s),h.value=E}return!!h.tag&&h}function i(e){return 2097152*(127&e[0])+16384*(127&e[1])+128*(127&e[2])+(127&e[3])}function o(e){return e.length<4?0:16777216*e[0]+65536*e[1]+256*e[2]+e[3]}function a(e,t,r,n){r=r||0,t<0&&(t+=e.length);var i="";if(m)return(e=e.slice(r,r+t))instanceof s?e.toString():new s(e).toString();for(var o=r;o<r+t;o++)i+=String.fromCharCode(e[o]);return n?i:decodeURIComponent(encodeURIComponent(i))}var s=r(2306).Buffer,l=r(3243),d=r(6107),c=r(8118),u=r(3944),h=r(218),f=h.readUTF16String,p=h.readUTF8String,g=h.readISO8859String,v=void 0!==l.File&&void 0!==l.FileReader,m=void 0!==l.Buffer;e.exports={parse:function(e){return new Promise((function(t,r){var n;v&&e instanceof File?((n=new FileReader).onload=function(r){e=new Uint8Array(r.target.result),t(e)},n.readAsArrayBuffer(e)):e instanceof s||e instanceof Uint8Array?t(e):r(new TypeError("argument should be instance of Buffer|Uint8Array|File"))})).then((function(e){var t,r=function(e){if(!e||e.length<128)return!1;e=e.slice(e.length-128);var t={version:{major:1,minor:0}},r=p(e,3),n=/(^[\s\u0000]+|[\s\u0000]+$)/;if("TAG"!==r)return!1;t.title=p(e.slice(3),30).replace(n,""),t.artist=p(e.slice(33),30).replace(n,""),t.album=p(e.slice(63),30).replace(n,""),t.year=p(e.slice(93),4).replace(n,""),0===e[125]?(t.comment=p(e.slice(97),28).replace(n,""),t.version.minor=1,t.track=e[126]):t.comment=p(e.slice(97),30).replace(n,"");return t.genre=d[e[127]]||"",t}(e),a=function(e){if(!e||e.length<20)return!1;var t,r,a,s=function(e,t){if(!e||e.length<10)return!1;var r,n,i;if(t=t||{},"ID3"!==p(e,3))return!1;return r=t.version||(t.version={major:2}),n=t.version.flags||(t.version.flags={}),r.minor=e[3],r.revision=e[4],i=e[5],n.unsync=!0&i,n.xheader=!0&i,n.experimental=!0&i,t}(e.slice(0,14));if(!s)return!1;if(t=s.version.flags,r=10,t.unsync)throw new Error("not support unsynchronisation");t.xheader&&(r+=i(e.slice(10,14)));return a=i(e.slice(6,10)),function(e,t){var r=0,i=t.version;for(;r<e.length;){var a,s,l=o(e.slice(r+4));if(0===l)break;if(!(s=e.slice(r,r+10+l)).length)break;(a=n(s,i.minor,l))&&(t[a.tag]=a.value),r+=s.length}}(e.slice(r,a+r),s),s}(e);if(a){for(t in r)t in a&&""!==a[t]||(a[t]=r[t]);return a.version={v1:r&&r.version,v2:a.version},a}return r?(r.version={v1:r.version,v2:!1},r):{version:!1}}))}}},218:e=>{"use strict";var t={readUTF16String:function(e,t,r){var n=0,i=1,o=0;r=Math.min(r||e.length,e.length),254===e[0]&&255===e[1]?(t=!0,n=2):255===e[0]&&254===e[1]&&(t=!1,n=2),t&&(i=0,o=1);var a,s,l,d,c,u=[];for(c=0;n<r&&(a=e[n+i],s=e[n+o],n+=2,0!==(l=(a<<8)+s));c++)a<216||a>=224?u[c]=String.fromCharCode(l):(d=(e[n+i]<<8)+e[n+o],n+=2,u[c]=String.fromCharCode(l,d));return u.join("")},readUTF8String:function(e,t){var r=0;t=Math.min(t||e.length,e.length),239===e[0]&&187===e[1]&&191===e[2]&&(r=3);for(var n=[],i=0;r<t;i++){var o,a,s,l=e[r++];if(0===l)break;l<128?n[i]=String.fromCharCode(l):l>=194&&l<224?(o=e[r++],n[i]=String.fromCharCode(((31&l)<<6)+(63&o))):l>=224&&l<240?(o=e[r++],a=e[r++],n[i]=String.fromCharCode(((15&l)<<12)+((63&o)<<6)+(63&a))):l>=240&&l<245&&(s=((7&l)<<18)+((63&(o=e[r++]))<<12)+((63&(a=e[r++]))<<6)+(63&e[r++])-65536,n[i]=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return n.join("")},readNullTerminatedString:function(e,t){var r,n,i=[];for(t=t||e.length,r=0;r<t&&0!==(n=e[r++]);)i[r-1]=String.fromCharCode(n);return i.join("")},readISO8859String:function(e,t){var r,n,i=[];for(t=t||e.length,r=0;r<t;)n=e[r++],i[r-1]=String.fromCharCode(n);return i.join("")}};e.exports=t},502:(e,t,r)=>{"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=function(){var e=new c;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(r){return!1}};var a,s=r(1299),l=(a=s)&&a.__esModule?a:{default:a},d="lS_",c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cookieOptions=n({path:"/"},t),d=t.prefix||d}return o(e,[{key:"getItem",value:function(e){var t=l.default.parse(document.cookie);return t&&t.hasOwnProperty(d+e)?t[d+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=l.default.serialize(d+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=n({},this.cookieOptions,{maxAge:-1});return document.cookie=l.default.serialize(d+e,"",t),null}},{key:"clear",value:function(){var e=l.default.parse(document.cookie);for(var t in e)0===t.indexOf(d)&&this.removeItem(t.substr(d.length));return null}}]),e}();t.default=c},4585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=n},2741:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=n(r(1402)),o=n(r(502)),a=n(r(4585)),s=null;s=(0,i.default)("localStorage")?window.localStorage:(0,i.default)("sessionStorage")?window.sessionStorage:(0,i.default)("cookieStorage")?new o.default:new a.default,t.ZP=s,i.default,o.default,a.default},1402:(e,t,r)=>{"use strict";function n(e){try{var t=window[e];return t.setItem("__test","1"),t.removeItem("__test"),!0}catch(r){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=r(502)},5264:(e,t)=>{"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.S=function(e){function t(){s===a&&(s=a.slice())}function n(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var r=!0;return t(),s.push(e),function(){if(r){r=!1,t();var n=s.indexOf(e);s.splice(n,1)}}}function i(){for(var e=a=s,t=0;t<e.length;t++)e[t]()}function o(){e(i)}if("function"!==typeof e)throw new Error("Expected batch to be a function.");var a=[],s=a;return function(e){return function(){function t(){var e=i.dispatch.apply(i,arguments);return o(),e}var i=e.apply(void 0,arguments),a=i.subscribe;return r({},i,{dispatch:t,subscribe:n,subscribeImmediate:a})}}}},8139:e=>{"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e})},4957:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n}),e=r.hmd(e);const n=function(e){var t,r=e.Symbol;return"function"===typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:e)},866:(e,t,r)=>{(t=e.exports=r(6805)(!1)).push([e.id,"video._20Eh5WL::-webkit-media-controls{display:none!important}video._1ll4Zna::-webkit-media-controls-current-time-display,video._1ll4Zna::-webkit-media-controls-time-remaining-display{visibility:hidden!important}video._3D52tih::-webkit-media-controls-timeline{visibility:hidden!important}video._2yNfXKt::-webkit-media-controls-toggle-closed-captions-button{display:none}",""]),t.locals={video_hiddenControls:"_20Eh5WL",videoHiddenControls:"_20Eh5WL",video_hiddenTime:"_1ll4Zna",videoHiddenTime:"_1ll4Zna",video_hiddenTimeline:"_3D52tih",videoHiddenTimeline:"_3D52tih",video_hiddenSubtitlesBtn:"_2yNfXKt",videoHiddenSubtitlesBtn:"_2yNfXKt"}}},r={};e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),e.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";function t(e){e&&"function"===typeof e.catch&&e.catch(e=>{})}function r(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}function n(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}function i(e,t){let{content:r,size:n}=void 0===t?{}:t;const i=e.ownerDocument.createElement("iframe");i.scrolling="no",i.setAttribute("allowfullscreen",""),i.style.display="block",n&&(i.height=n.height,i.width=n.width),e.appendChild(i);const o=i.contentDocument;return o.open(),r&&o.write(r),o.close(),o.body.style.margin="0",i.style.borderWidth="0",i}function o(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function a(e){return void 0===e&&(e=window),void 0===ql&&(ql=function(e){void 0===e&&(e=window);return e.JSON&&n(e.JSON.stringify)&&n(e.JSON.parse)}(e)?e.JSON:{stringify:Xl("stringify"),parse:Xl("parse")}),ql}function s(e){return"string"===typeof e}function l(e){return a().stringify(e,function(){const e=[],t=function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(r,n)=>{if(void 0!==e)try{e.set(r,n)}catch(i){t.push({path:n,value:r})}else t.push({path:n,value:r})},get:r=>{const n=Kl(t,e=>e.value===r);return void 0!==e&&void 0===n?e.get(r):n?n.path:void 0}}}();return(r,n)=>{if((0,Wl.m)(n))return s(n.name)?n.name:"[Function]";if(!(0,Ql.K)(n))return n;const i=t.get(n);if(i)return"[Circular "+i+"]";for(;e.length>0&&e[e.length-1].value[r]!==n;)e.pop();const o=(e.length>0?e[e.length-1].path:"")+(r?"/"+r:"~");return e.push({path:o,value:n}),t.set(n,o),n}}())}function d(){}function c(e){const t=e.document;let r=t.getElementsByTagName("head")[0];return r||(r=t.createElement("head"),t.documentElement.appendChild(r)),r}function u(e,t){void 0===e&&(e="a"),void 0===t&&(t="z");const r=function(e,t){let r=e+hd()*(t+1-e);return r=Math.floor(r),r}(e.charCodeAt(0),t.charCodeAt(0));return String.fromCharCode(r)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:r=d,retries:n=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let i=r,a=0;return t&&n>0&&(i=e=>{if(r(e),a>0){const t=-1===e.src.indexOf("?")?"?":"&",r=function(e){const t=[];for(let r=0;r<e;r++)t.push(u());return t.join("")}(4);e.src+=t+r}a++}),function e(t){const{src:r,win:n=window,charset:i=fd,async:a=!0,retries:s=0,onRetry:l=d,retryDelay:u=0,checkLoad:f=pd,onBeforeLoad:p=d,onLoad:g=d,onError:v=d}=t,m=n.document.createElement("script"),E=n=>{s>0?(l(n),e(h({},t,{src:r,retries:s-1}))):v(n),o(m)};m.type="text/javascript",m.async=a,m.onload=()=>f(m)?g():E(new Error("checkLoad for "+r+" failed")),m.onerror=e=>{try{n.setTimeout(()=>{E(e)},u)}catch(e){}},m.src=r,m.charset=i,p(m),c(n).appendChild(m)}(h({},e,{onBeforeLoad:i}))}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e){const{win:t=window,src:r,retries:n=0,onError:i=d}=e,o=new nd({id:jl.LOAD_SCRIPT_ERROR,message:"Failed to load script ["+r+"]",details:{src:r,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:n}});f(p({},e,{win:t,onError:()=>i(o)}))}function v(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}function m(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(t){return""}}function E(e){if(void 0===e)return yd.DEFAULT;const t=function(e){switch(e){case Ad.DEFAULT_ERROR:return yd.DEFAULT;case Ad.BROADCAST_AD_BLOCK_INIT_ERROR:case Ad.AD_TYPE_IS_NOT_RECOGNIZED:case Ad.AD_IS_ALREADY_PLAYING:case Ad.MULTIROLL_INIT_ERROR:case Ad.PLAY_AD_VIEWERS_ERROR:return yd.ADS;case Ad.INVALID_METADATA:case Ad.NO_STREAMS:return yd.CONFIG;case Ad.YANDEX_RPC_ERROR:case Ad.ON_TICK_ERROR:case Ad.SAGA_ERROR:case Ad.SHAKA_FILTER_ERROR:case Ad.SHAKA_CONFIGURE_ERROR:case Ad.SHAKA_LOAD_SOURCE_ERROR:case Ad.REFRESH_SUBTITLES_ERROR:case Ad.NO_HLS_JS_INSTANCE:case Ad.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case Ad.RECOVER_TASK_ERROR:case Ad.PRELOAD_SOURCE_FAILED:case Ad.MEDIA_ERR_ABORTED:return yd.EXCEPTION;case Ad.UNSUPPORTED_MEDIA_TYPE:case Ad.NATIVE_HLS_NOT_SUPPORTED_ERROR:case Ad.HLS_JS_NOT_SUPPORTED_ERROR:case Ad.MEDIA_ERR_SRC_NOT_SUPPORTED:case Ad.MEDIA_ERR_CUSTOM:case Ad.MEDIA_ERR_DECODE:case Ad.REPRESENTATION_CHANGE:return yd.MEDIA;case Ad.SCRIPT_INIT_ERROR:case Ad.MPD_SHAKA_INIT_ERROR:case Ad.META_INFO_REQUEST_FAILED:case Ad.STRM_ABD_INVALID_RESPONSE:return yd.NETWORK_PLAYER;case Ad.MEDIA_ERR_NETWORK:return yd.NETWORK_MEDIA;case Ad.MPD_WIDEVINE_CERT_LOAD_ERROR:case Ad.FAIRPLAY_CERT_LOAD_ERROR:case Ad.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case Ad.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case Ad.FAIRPLAY_SPC_LOAD_ERROR:case Ad.FAIRPLAY_CREATE_KEY_ERROR:case Ad.FAIRPLAY_INVALID_CONTENT_ID:case Ad.DRM_PROXY_ERROR:case Ad.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case Ad.MEDIA_ERR_ENCRYPTED:case Ad.FAIRPLAY_NOT_SUPPORTED:case Ad.NO_DRM:return yd.DRM;case Ad.REGIONAL_LIMITATION_MANIFEST:case Ad.REGIONAL_LIMITATION_LEVEL:case Ad.REGIONAL_LIMITATION_SEGMENT:return yd.REGIONAL;case Ad.SIGNATURE_EXPIRED_MANIFEST:case Ad.SIGNATURE_EXPIRED_LEVEL:case Ad.SIGNATURE_EXPIRED_SEGMENT:return yd.ACCESS;case Ad.NO_CODECS:return yd.NO_CODECS;case Ad.NO_PLAYABLE_STREAMS:return yd.CANNOT_PLAY;case Ad.NO_MSE:return yd.UNSUPPORTED_ENV;case Ad.INVALID_STREAM_URL:return yd.INVALID_STREAM_URL}return yd.DEFAULT}(e);if(t!==yd.DEFAULT)return t;switch(e){case Sd.BUFFER_FULL_ERROR:case Sd.BUFFER_NUDGE_ON_STALL:case Sd.BUFFER_STALLED_ERROR:case Sd.SHAKA_VIDEO_ERROR_3016:case Sd.FRAG_PARSING_ERROR:case Sd.BUFFER_SEEK_OVER_HOLE:case Sd.BUFFER_APPENDING_ERROR:case Sd.PIPELINE_ERROR_DECODE:case Sd.DECODER_ERROR_NOT_SUPPORTED:case Sd.BUFFER_APPEND_ERROR:case Sd.SHAKA_MEDIA_SOURCE_OPERATION_THREW_3015:case Sd.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case Sd.REMUX_ALLOC_ERROR:case Sd.BUFFER_ADD_CODEC_ERROR:case Sd.DEMUXER_ERROR_COULD_NOT_OPEN:case Sd.NS_ERROR_DOM_INVALID_STATE_ERR:case Sd.SHAKA_DASH_INVALID_XML_4001:case Sd.SHAKA_QUOTA_EXCEEDED_ERROR_3017:case Sd.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case Sd.FAILED_TO_INIT_DECODER:case Sd.PIPELINE_ERROR_INITIALIZATION_FAILED:case Sd.NS_ERROR_FAILURE:case Sd.SHAKA_MEDIA_SOURCE_OPERATION_FAILED_3014:case Sd.REQUEST_FAILED:case Sd.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case Sd.PIPELINE_ERROR_COULD_NOT_RENDER:case Sd.NS_ERROR_DOM_MEDIA_METADATA_ERR:case Sd.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case Sd.NS_ERROR_DOM_MEDIA_FATAL_ERR:case Sd.SHAKA_RESTRICTIONS_CANNOT_BE_MET_4012:case Sd.MANIFEST_PARSING_ERROR:return yd.MEDIA;case Sd.FRAG_LOAD_ERROR:case Sd.SHAKA_BAD_HTTP_STATUS_1001_MANIFEST:case Sd.SHAKA_HTTP_ERROR_1002_SEGMENT:case Sd.MANIFEST_LOAD_ERROR:case Sd.LEVEL_LOAD_ERROR:case Sd.SHAKA_HTTP_ERROR_1002_MANIFEST:case Sd.SHAKA_BAD_HTTP_STATUS_1001_SEGMENT:case Sd.SHAKA_UNSUPPORTED_SCHEME_1000:case Sd.AUDIO_TRACK_LOAD_ERROR:return yd.NETWORK_MEDIA;case Sd.SHAKA_TIMEOUT_1003_SEGMENT:case Sd.FRAG_LOAD_TIME_OUT:case Sd.MANIFEST_LOAD_TIME_OUT:case Sd.LEVEL_LOAD_TIME_OUT:case Sd.SHAKA_TIMEOUT_1003_MANIFEST:case Sd.SHAKA_TIMEOUT_1003_LICENSE:case Sd.AUDIO_TRACK_LOAD_TIME_OUT:return yd.NETWORK_TIMEOUT;case Sd.INTERNAL_EXCEPTION:case Sd.SHAKA_OPERATION_ABORTED_7001:case Sd.ON_PLAYER_INIT_ERROR_INTERNAL:case Sd.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case Sd.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case Sd.LOAD_SKIN_ERROR:case Sd.INSERT_INTO_WITH_SECURE_FRAME:case Sd.ERROR_SCREEN_LOAD_ERROR:return yd.EXCEPTION;case Sd.UNABLE_TO_LOAD_PLAYER_IFRAME:case Sd.ON_PLAYER_INIT_ERROR:case Sd.LOADER_INIT_ERROR:case Sd.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case Sd.FAILED_TO_DOWNLOAD_DEBUG_INFO:case Sd.SHAKA_REQUEST_FILTER_ERROR_1006:return yd.NETWORK_PLAYER;case Sd.PLAYER_CONTAINER_NOT_FOUND:case Sd.KEY_LOAD_ERROR:case Sd.FEATURE_HANDLER_ERROR:case Sd.SHAKA_NO_LICENSE_SERVER_GIVEN_6012:case Sd.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case Sd.INVALID_CONFIG_LANG_IN_CREATE_PLAYER:case Sd.INVALID_CONFIG_IN_CREATE_PLAYER:case Sd.INVALID_CONFIG_IN_SET_SOURCE:case Sd.INVALID_CONFIG_IN_SOURCE_UPDATE:case Sd.ELEMENT_NOT_IN_DOM:return yd.CONFIG;case Sd.SHAKA_FAILED_TO_CREATE_CDM_6002:case Sd.SHAKA_HTTP_ERROR_1002_LICENSE:case Sd.SHAKA_LICENSE_REQUEST_FAILED_6007:case Sd.SHAKA_FAILED_TO_GENERATE_LICENSE_REQUEST_6006:case Sd.SHAKA_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001:case Sd.SHAKA_FAILED_TO_ATTACH_TO_VIDEO_6003:case Sd.SHAKA_LICENSE_RESPONSE_REJECTED_6008:case Sd.SHAKA_INVALID_SERVER_CERTIFICATE_6004:case Sd.SHAKA_EXPIRED_6014:case Sd.SHAKA_BAD_HTTP_STATUS_1001_LICENSE:return yd.DRM;case Sd.SHAKA_CONTENT_UNSUPPORTED_BY_BROWSER_4032:return yd.NO_CODECS}return yd.DEFAULT}function y(e,t){if(void 0===t&&(t=!1),e===Ad.NO_CODECS&&md&&Ed>6)return{title:"NO_CODECS_TITLE",message:"NO_CODECS_MESSAGE",helpLink:"https://yandex.ru/support/video-player/player-issues.html#no-codecs",helpLinkButtonText:"NO_CODECS_HELP_LINK_TITLE"};const r=E(e);return t&&function(e){return[yd.NETWORK_PLAYER,yd.NETWORK_MEDIA,yd.NETWORK_TIMEOUT,yd.DRM,yd.ADS].indexOf(e)>-1}(r)?{title:"ADBLOCK_DETECTED_TITLE",message:"ADBLOCK_DETECTED_MESSAGE",helpLink:"https://yandex.ru/support/video-player/blocker-settings.html",helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:function(e){return{title:Rd[e],message:_d[e],helpLink:Td[e],helpLinkButtonText:wd[e]||"ERROR_SCREEN_DEFAULT_HELP_LINK"}}(r)}function A(e,t){void 0===t&&(t=!0);const r=Od(e);if(!r)return t;return!e[r]}function S(e,t){let r=e[t];if(!n(r)){const n=r;try{delete e[t];const i=e[t];"function"===typeof i&&(r=i),e[t]=n}catch(i){}}return r}function T(e,t,r,n){const i=function(e){let t=!1,r=!1,n=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),r=Boolean(e.passive),n=Boolean(e.once)),{capture:t,passive:r,once:n}}(n),o=Ld?i:i.capture,a=i.once&&!Dd?function(e){s(),r.call(this,e)}:r,s=()=>{kd(e,t,a,o)};return Cd(e,t,a,o),s}function R(e,t){const r=function(e){const t=Od(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);return r?T(e,r,()=>{t(A(e))}):d}function _(){return Md}function w(e){xd=window.Ya.Rum.makeSubPage(e?"Init":"SetSource"),Fd++}function b(){return xd}function P(){return Fd}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function C(e){r(()=>{window.Ya.Rum.time(e)})}function k(e,t){void 0===t&&(t={}),_()&&r(()=>{const r=O(t,Ud);window.Ya.Rum.timeEnd(e,I({},r,{"-additional":(0,Id.B6)(t)}))})}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function N(e,t,n,i){void 0===i&&(i={}),r(()=>{const{additional:r={}}=i,o=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(i,Hd);window.Ya.Rum.sendTimeMark(e,t,n,D({},o,{"-additional":(0,Id.B6)(i)}))})}function L(e,t,r){return e>r?r:e<t?t:e}function M(e,t){const r=e.style;for(const n in t)if(t.hasOwnProperty(n)){r[ec(n)]=t[n]}}function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e){if("function"===typeof Object.keys)return Object.keys(e);{const t=[];for(const r in e)V(e,r)&&t.push(r);return t}}function F(e){const t=[...e],r=t.pop();if(!r||0===t.length)throw new Error("memoizeSingle need at least 2 functions as arg");return{preparers:t,resolver:r}}function U(e,t,r){for(const n in e)V(e,n)&&t.call(r,e[n],n,e)}function B(e){return s(e.className)?e.className:e.namespaceURI===oc.svg&&e.getAttribute("class")||""}function H(e,t){s(e.className)?e.className=t:e.namespaceURI===oc.svg&&e.setAttributeNS("","class",t)}function j(e,t){void 0===t&&(t=""),0!==e.className.length?lc(e)?uc(e,t):function(e,t){let r=B(e).split(" ").concat(t.split(" "));r=function(e){const t={};for(let r=0;r<e.length;r++)t[e[r]]=r;return x(t)}(Yl(r,(function(e){return""!==e}))),H(e,r.join(" "))}(e,t):e.className=t}function Y(e){let t="";for(let r=0;r<e;r++)t+=(16*hd()|0).toString(16);return t}function G(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];vc(e)&&e.forEach(e=>{"function"===typeof e&&e(...r)})}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function W(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function q(e,t){e.forEach(e=>{W(e,t)})}function z(e){return 0===wc.length&&(_c=window.setInterval(()=>{wc.forEach(e=>e())},250)),wc.push(e),()=>{const t=wc.indexOf(e);t>-1&&wc.splice(t,1),0===wc.length&&clearInterval(_c)}}function X(e){return Math.max(e,0)}function Q(e){return X(e)}function J(e){return X(function(e){return Math.floor(e)}(e))}function Z(e){return e}function $(e){return e}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function te(e,t){const r=function(e){void 0===e&&(e=window);const{document:t={}}=e;return kc.filter(e=>{let{enabled:r}=e;return r in t})}(e);if(r.length>0)return r[0];const n=function(e,t){return void 0===e&&(e=window),void 0===t&&(t=e.HTMLVideoElement&&e.HTMLVideoElement.prototype||{}),kc.filter(e=>{let{enabled:r}=e;return r in t})}(e,t);return n.length>0?n[0]:void 0}function re(e,t){const r=te(e,t);if(!r)return null;let n=e.document[r.element];return t&&t[r.element]&&(n=t),n||null}function ne(e){let t=function(){t=()=>r;const r=e.apply(this,arguments);return r};return function(){return t.apply(this,arguments)}}function ie(e){return"number"===typeof e&&isFinite(e)}function oe(e){void 0===e&&(e=cd);const t=e();return()=>Math.max(0,e()-t)}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function se(e){Mc.href=e;let t=Mc.pathname||"";"/"!==t.charAt(0)&&(t="/"+t);const r=(Mc.search||"")+(Mc.hash||""),n=e.lastIndexOf(r),i=-1===n?e:e.slice(0,n);if(Vc.test(e)){const t=se(e.replace(Vc,"https:"));return Mc.href=e,ae({},t,{originalPath:i,protocol:e.slice(0,e.indexOf(":")+1),href:Mc.href})}const o=Mc.protocol&&/^[a-z\-]+:/i.test(Mc.protocol)?Mc.protocol:"";return{originalPath:i,href:Mc.href,protocol:o,host:Mc.host,hostname:Mc.hostname,port:Mc.port,pathname:t,search:Mc.search,hash:Mc.hash}}function le(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,r="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(r?"/":"")+e.search+e.hash}const r="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+r+e.pathname+e.search+e.hash}function de(e){const t={},r=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let n=0;n<r.length;n++){const e=r[n].indexOf("=");let i,o;if(-1===e?(i=xc(r[n]),o=""):(i=xc(r[n].slice(0,e)),o=r[n].slice(e+1)),i){const e=Boolean(/(\[\])$/.exec(i));i=i.replace(/\[\]$/,""),e?void 0===t[i]?t[i]=[xc(o)]:t[i]=[].concat(t[i],xc(o)):t[i]=xc(o)}}return t}function ce(e){const t=[];for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];vc(n)?t.push(Fc(r,n)):void 0!==n&&t.push(r+"="+encodeURIComponent(n))}return"?"+t.join("&")}function ue(e,t,r){if(void 0===r)return e;const n=se(e),i=de(n.search);return i[t]=r,le(ae({},n,{search:ce(i)}))}function he(e,t,r){let{override:n=!0,saveOriginalPath:i=!1}=void 0===r?{}:r;const o=se(e),a=de(o.search);U(t,(e,t)=>{(void 0===a[t]||n)&&(a[t]=e)});return le(ae({},o,{search:ce(a)}),i)}function fe(e){return se(e).pathname.split("/").pop()||""}function pe(e){const t=fe(e).split(".");return t.length>1?t.pop():""}function ge(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!function(e){void 0===e&&(e=window);return e.navigator.userAgent.indexOf("UCBrowser")>-1}(e)}function ve(e){if(void 0===e&&(e=window),!e.navigator)return zc;const{connection:t={}}=e.navigator;return ie(t.rtt)?t.rtt:zc}function me(e){if(!e)return[];const t=[];for(let r=0;r<e.length;r++)t.push(e[r]);return t}function Ee(e){return me(e).map(e=>{let{screenX:t,screenY:r}=e;return{screenX:t,screenY:r}})}function ye(e,t,r){function n(e){let{touches:t}=e;return(0,Ql.K)(t)&&t.length===h}function i(){return p>0}function o(){i()&&(window.clearTimeout(p),p=0,s=[])}function a(e){o(),f=!1}let s,{threshold:l=Xc,delay:c=Qc,handleContextmenu:u=!1,touchesCount:h=1}=void 0===r?{}:r,f=!1,p=0;const g=T(e,"touchstart",(function(e){n(e)&&(s=Ee(e.touches),o(),p=window.setTimeout(()=>{i()&&t()},c),f=!0)}),{passive:!0}),v=T(e,"touchend",a,{passive:!0}),m=T(e,"touchcancel",a,{passive:!0}),E=T(e,"touchmove",(function(e){i()&&(n(e)?function(e){if(e.length!==s.length)return!0;for(let t=0;t<e.length;t++){if(Math.abs(s[t].screenX-e[t].screenX)>l)return!0;if(Math.abs(s[t].screenY-e[t].screenY)>l)return!0}return!1}(Ee(e.touches))&&o():o())}),{passive:!0}),y=u?T(e,"contextmenu",(function(e){!i()&&f||(o(),t(e))}),{passive:!1}):d;return()=>{o(),g(),v(),m(),E(),y()}}function Ae(e){void 0===e&&(e=window);const{userAgent:t=""}=e.navigator,r=/Android/.test(t),n=function(e){void 0===e&&(e=window);return/Windows Phone/i.test(e.navigator.userAgent)}(e),i=/com\.yandex\.mobile\.metrica\.ads\.sdk.*?Android/.test(t);return r&&!n||i}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Te(e){let{event:t}=e;const r=t.touches[0]||t.changedTouches[0];return{clientX:r?r.clientX:-1,clientY:r?r.clientY:-1}}function Re(e,t){return e.map(e=>({adViewer:e,additionalData:{},adType:t}))}function _e(e){try{return JSON.stringify(e,function(){const e=[],t=function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(r,n)=>{if(void 0!==e)try{e.set(r,n)}catch(i){t.push({path:n,value:r})}else t.push({path:n,value:r})},get:r=>{const n=Kl(t,e=>e.value===r);return void 0!==e&&void 0===n?e.get(r):n?n.path:void 0}}}();return(r,n)=>{if((0,Wl.m)(n))return s(n.name)?n.name:"[Function]";if(!(0,Ql.K)(n))return n;if(i=n,"[object Window]"===Object.prototype.toString.call(i))return"[object Window]";var i;if(function(e){return s(e.tagName)}(n))return"[DOMNode "+n.tagName+"]";const o=t.get(n);if(o)return"[Circular "+o+"]";for(;e.length>0&&e[e.length-1].value[r]!==n;)e.pop();const a=(e.length>0?e[e.length-1].path:"")+(r?"/"+r:"~");return e.push({path:a,value:n}),t.set(n,a),n}}())}catch({message:t,stack:r}){return JSON.stringify({__stringifyError:{message:t,stack:r}})}}function we(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map(be),i="YA PLAYER: "+(new Date).toString()+" "+n.join(" ");return i}function be(e){return e&&"object"===typeof e?JSON.stringify(e,Object.getOwnPropertyNames(e)):e}function Pe(e){const t=e;return t.Ya||(t.Ya={}),t.Ya.streamPlayer||(t.Ya.streamPlayer={}),t.Ya.streamPlayer}function Ie(e){return ke(e),wu[e]}function Oe(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0}function Ce(e){const t=Oe(Ie(e));if("undefined"===typeof t){return Oe(_u[e])}return t}function ke(e){if(Ru.flagsInited)return;const t=new Error(e?"Unexpected usage of player's flag "+e+" before any flag configuration":"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout(()=>{throw t})}function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ne(e){return!!Ou[e]}function Le(e,t,r){function n(){var e=t.apply(void 0,arguments);return r?{type:a,payload:e,error:e instanceof Error,meta:r.apply(void 0,arguments)}:{type:a,payload:e,error:e instanceof Error}}function i(){return l(s,!1).apply(void 0,arguments)}"function"===typeof e&&(r=t,t=e,e=void 0),"function"!==typeof t&&(t=Du),"function"!==typeof r&&(r=void 0);var o="string"===typeof e&&/^[0-9A-Z_]+$/.test(e);o?(!function(e){if(Cu.checkExisting&&Ne(e))throw new TypeError("Duplicate action type: ".concat(e))}(e),Ou[e]=!0):++ku;var a=o?e:"[".concat(ku,"]").concat(e?" "+e:""),s=void 0,l=function(e,t){return function(){var r=n.apply(void 0,arguments);return r.error||(r.error=t),Array.isArray(e)?e.map((function(e){return e(r)})):e?e(r):r}};return i.asError=function(){return l(s,!0).apply(void 0,arguments)},i.getType=function(){return a},i.toString=function(){return a},i.raw=n,i.assignTo=function(e){return s=Lu(e),i},i.assigned=function(){return!!s},i.bound=function(){return!1},i.dispatched=i.assigned,i.bindTo=function(e){var t=l(Lu(e));return t.asError=l(Lu(e)),t.raw=n,t.getType=i.getType,t.toString=i.toString,t.assignTo=function(){return t},t.bindTo=function(){return t},t.assigned=function(){return!1},t.bound=function(){return!0},t.dispatched=t.bound,t},i}function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ve(e){return e&&e.getType?e.toString():e}function xe(){function e(e){return!!o[Ve(e)]}function t(e,r){return Array.isArray(e)?e.forEach((function(e){t(e,r)})):o[Ve(e)]=r,l}function r(e){return Array.isArray(e)?e.forEach(r):delete o[Ve(e)],l}function n(e){return Object.keys(e).forEach((function(t){return s[t]=e[t]})),l}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;if(!t||"string"!==typeof t.type)return e;if(t.type.startsWith("@@redux/"))return e;var r=o[t.type]||s.fallback;return r?s.payload?r(e,t.payload,t.meta):r(e,t):e}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s={payload:!0,fallback:null},l=Me(i,{has:e,on:t,off:r,options:n});if("function"===typeof o){var d=o;o={},d(t,r)}return e(Mu)||t(Mu,(function(e,t){return s.payload?t.reduce(i,e):t.payload.reduce(i,e)})),l}function Fe(e){return e&&e.type===Vu?(e.payload.type=Vu,e.payload):e}function Ue(e,t){const r=e.height||0;return(t.height||0)-r}function Be(e){return Boolean(e&&e.adType===mu.inroll)}function He(e,t){const{ad:{originalBroadcastAdCues:r}}=e,n=r[t];if(n){const{start:e}=n;if(void 0===e)return;const{end:t=e+df}=n;return{start:Z(e),end:Z(t)}}}function je(e){const{ad:{originalBroadcastAdCues:t,adInfo:r}}=e;return Be(r)?r.params.cueId:x(t).find(t=>function(e,t){const{controller:{currentTime:r,programDateTime:n}}=e;if(void 0===n)return!1;const i=n/1e3+r,o=He(e,t);if(!o)return!1;const{start:a,end:s}=o;return a<=i&&i<=s}(e,t))}function Ye(e){const{controller:{currentTime:t,programDateTime:r}}=e;return void 0===r?r:bc(r,Ic(t,1e3))}function Ge(e,t){return Math.max(e+vf,t+gf)}function Ke(e){let{cue_id:t,pts:r,offset:n,cutoff:i}=e;const o=bc(r,n);return{start:o,isEndReceived:void 0!==i,cueId:t,end:void 0!==i?bc(r,i):Ge(r,o),isValid:!0,invalidateReason:void 0}}function We(e,t){const r=[],n=[];return((e,t,r)=>{for(let n=0;n<e.length;n++)t.call(r,e[n],n,e)})(e,(i,o)=>{t(i,o,e)?r.push(i):n.push(i)}),[r,n]}function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ze(e){return e.reduce((e,t)=>bc(e,Z(t.getAdDuration())),Z(0))}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qe(e){void 0===e&&(e=window);try{return e.ya.videoAd.getBundleVersion()}catch(t){return"none"}}function Je(e){void 0===e&&(e=window);try{return e.ya.videoAd.getModuleVersion()}catch(t){return"none"}}function Ze(e,t){if(void 0===t&&(t=!0),Kc&&t)return[];{const t=[];let n=e;for(;;)try{if(n=n.ownerDocument.defaultView.frameElement,!n)return t;t.push(n)}catch(r){return t}}}function $e(e){const t=Ze(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:v(e.defaultView),referrer:e.referrer}))}function et(e){return s(e)&&e.length>0}function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rt(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const r in e)tt(e,r)&&t.push(r);return t}function nt(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}function it(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}function ot(e){return"function"===typeof Object.entries?Object.entries(e):((e,t,r)=>{const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=t.call(r,e[i],i,e);return n})(rt(e),t=>[t,e[t]])}function at(e,t){const r={UrlParams:()=>Pf[t],SessionStorage:()=>e.sessionStorage.getItem(t),LocalStorage:()=>e.localStorage.getItem(t),GlobalVariable:()=>{var r,n;for(const i of jd(e)){const e=null===(n=null===(r=i.Ya)||void 0===r?void 0:r.hardcodedParams)||void 0===n?void 0:n[t];if(e)return String(e)}}};for(const[i,o]of ot(r)){const e=nt(o);if(et(e))return n="VAS WARNING! Hardcoded parameter=["+t+"] with value=["+e+"] found in ["+i+"]",it(console)&&(0,Wl.m)(console.warn)&&console.warn(n),e}var n}function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lt(e){return Lf||function(e){return Uf+"1.0-"+e+"/"}(e)}function dt(e){return"number"===typeof e&&isFinite(e)&&e>=0}function ct(e){let t=function(){let r;return t=()=>r,r=e.apply(this,arguments),r};return function(){return t.apply(this,arguments)}}function ut(e){if(void 0!==e){if(!s(e))throw new Error("testIdsString is not a string or undefined ["+e+"]");if(0!==e.length){for(const t of e.split(";")){const r=t.split(",");if(3!==r.length)throw new Error("testIdParts length error ["+e+"]");const[n,,i]=r;if(0===n.trim().length)throw new Error("testId length error ["+e+"]");if(0===i.trim().length)throw new Error("testId bucket length error ["+e+"]")}return e}}}function ht(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=Qf(t,Boolean);if(0!==n.length)return n.join(";")}function gt(e,t,r){void 0===r&&(r=" ");const n=t-e.length;if(n>0){let t=r;for(;t.length<n;)t+=t;return(t.length>n?t.substr(0,n):t)+e}return e}function vt(e){var t;const r=(hp||window).console;if(!pp||void 0===r)return;const n="AdSDKJS["+Mf+"]:";null===(t=r.log)||void 0===t||t.call(r,n,e)}function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Et(e){const t=Number(e);return dt(t)?L(t,0,1):void 0}function yt(e){return function(e){return void 0===e&&(e=window),void 0===Ep&&(Ep=e.JSON),Ep}().stringify(e,function(){const e=[],t=function(){const e="undefined"===typeof WeakMap?void 0:new WeakMap,t=[];return{set:(r,n)=>{if(void 0!==e)try{e.set(r,n)}catch(i){t.push({path:n,value:r})}else t.push({path:n,value:r})},get:r=>{const n=ep(t,e=>e.value===r);return void 0!==e&&void 0===n?e.get(r):n?n.path:void 0}}}();return(r,n)=>{if((0,Wl.m)(n))return s(n.name)?n.name:"[Function]";if(Bf(n))return{name:(i=n).name,message:i.message,stack:i.stack};var i;if(!it(n))return n;const o=t.get(n);if(o)return"[Circular "+o+"]";for(;e.length>0&&e[e.length-1].value[r]!==n;)e.pop();const a=(e.length>0?e[e.length-1].path:"")+(r?"/"+r:"~");return e.push({path:a,value:n}),t.set(n,a),n}}())}function At(){return(At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function St(){}function Tt(e){let t="",r="";if(e){$e(e).reverse().forEach(e=>{let{location:n,referrer:i}=e;t=t||n,r=r||i})}return{location:t,referrer:r}}function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _t(e){const{method:t,url:r,async:n=!0,data:i,responseType:o="text",onBeforeSend:a=d,onRetry:s=d,checkStatus:l=(e=>Op===e),headers:c={},xhrConstructor:u=XMLHttpRequest,retries:h=0,timeout:f=0,withCredentials:p,onAbort:g,onSetup:v}=e,m=e.onSuccess?ne(e.onSuccess):d,E=e.onError?ne(e.onError):d;let y,A=!1,S=0,T=e=>{A=!0,T=d,y=e,R(new Error("Abort request")),"function"===typeof g&&g(e)};const R=t=>{_.onerror=null,_.onreadystatechange=null,S&&clearTimeout(S);if(S&&4!==_.readyState||A)try{_.abort()}catch(t){}if(!A)if(h>0){const r=s(t,_);if("boolean"!==typeof r||Boolean(r)||T(),A)return;_t(Rt({},e,{onSetup:e=>{let{abort:t}=e;T=e=>t(e),A&&t(y)},retries:h-1}))}else T=d,E(t,_)},_=new u;try{_.open(t,r,n)}catch(w){return void R(w)}if(_.responseType=o,_.withCredentials=Boolean(p),U(c,(e,t)=>{try{_.setRequestHeader(t,e)}catch(w){}}),f>0&&isFinite(f)&&(S=window.setTimeout(()=>{R(new Error("Request timeout, "+r))},f)),_.onerror=R,_.onreadystatechange=()=>{if(4===_.readyState){const{status:e}=_;l(e)?(T=d,clearTimeout(S),m(_)):R(new Error("Invalid request status "+e+", "+r))}},("function"!==typeof v||(v({abort:e=>T(e)}),!A))&&(a(_,e),!A))try{_.send(i)}catch(w){R(w)}}function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Pt(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function It(e){return"number"===typeof(t=e)&&isFinite(t)&&t>0&&function(e){return ie(e)&&Math.floor(e)===e}(e);var t}function Ot(e,t){var r,n,i;return null===(i=null===(n=null===(r=t.ya)||void 0===r?void 0:r.videoAd)||void 0===n?void 0:n.loadedModules)||void 0===i?void 0:i[e]}function Ct(e){return function(e){const{src:t,win:r,onBeforeLoad:n=St}=e,i=new wp({});let o=St;return{promise:new Promise((e,a)=>{const s=r.document.createElement("script");let l=!1;o=()=>{l=!0,Pt(s)};s.type="text/javascript",s.async=!0,s.onload=()=>{l||e()},s.onerror=e=>{l||(a(new wp(i,{message:"Failed to load script ["+t+"]",details:{src:t,isSelfWindow:r===window,event:e}})),o())},s.src=t,s.charset=fd,n(s),c(r).appendChild(s)}),teardown:o}}(e)}function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dt(e){const t=P();return Mp.subpageIndex!==t?(Mp.subpageIndex=t,Mp.deltas={},!1):Boolean(Mp.deltas[e])}function Nt(e){Vd&&(Dt(e)||C(e))}function Lt(e,t){var r;(void 0===t&&(t={}),Vd)&&(Dt(e)||(k(e,t),r=e,Mp.deltas[r]=!0))}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}async function Vt(e,t,r){var n;void 0===e&&(e=window);const i=e===window;i&&Nt("adsdk.multiroll.full");const o=(e=>{var t,r,n,i,o,a;const{win:s,config:{vasUaasConfig:l,additionalCustomRootFields:d,vh_sid:c},moduleName:u,vasLoaderUrl:h,serviceName:f,serviceVersion:p}=e,g=null!==(t=null===d||void 0===d?void 0:d.vsid)&&void 0!==t?t:vp.VSID,v=(e=>{let{serviceName:t,serviceVersion:r,vsid:n}=e;const i=new kp({rnd:vp.VAS_USER_SESSION_RANDOM,vsid:n,defaultProbability:Dp}),o=(e,n)=>{const i=t||"unknown",o=r||"unknown";return{tags:{[e+"_"+n+"_"+i+"_"+o]:1},labels:{version:"loadVasModule_"+i+"_"+o}}};return{event:e=>i.event(bt({getTagsAndLabels:o},e)),error:e=>i.error(bt({getTagsAndLabels:o},e))}})({serviceName:f,serviceVersion:p,vsid:g}),m=(e=>{var t;const{error:r,config:n}=zf(e);if(!r){const e=n.flags,r=null!==(t=e.ADSDKVER)&&void 0!==t?t:e.VAS_STABLE_VERSION,i=et(r)?parseInt(r,10):void 0;if(dt(i))return{resolveType:"UAAS Config",version:i,parsedUaasConfig:n,parseUaasConfigError:void 0}}return{resolveType:"none",version:void 0,parsedUaasConfig:void 0,parseUaasConfigError:r}})(l);l?m.parseUaasConfigError?v.error({error:new bp({code:"LOAD_VAS_MODULE_PARSE_UAAS_CONFIG_ERROR",details:{message:m.parseUaasConfigError.message,vasUaasConfig:l}})}):void 0===(null===(n=null===(r=m.parsedUaasConfig)||void 0===r?void 0:r.flags)||void 0===n?void 0:n.VAS_STABLE_VERSION)&&v.error({error:new bp({code:"LOAD_VAS_MODULE_NO_VAS_STABLE_VERSION_IN_AB_FLAGS",details:{vasUaasConfig:l}})}):v.event({name:"LoadVasModule_NoUAAS",data:{}});const E=kt({},d),y=et(c)?c:void 0;!et(E.vh_sid)&&y&&(E.vh_sid=y);const A=nt(()=>ut(null===E||void 0===E?void 0:E.testIds),e=>{v.error({error:new bp({code:"LOAD_VAS_MODULE_INVALID_TEST_IDS",details:{message:e.message}})})}),S=null===(i=m.parsedUaasConfig)||void 0===i?void 0:i.testIds,T=null!==y&&void 0!==y?y:mp,R={AB_FLAGS:null!==(a=null===(o=m.parsedUaasConfig)||void 0===o?void 0:o.flags)&&void 0!==a?a:{},ICOOKIE:null===l||void 0===l?void 0:l.iCookie,TEST_IDS:pt(A,S),VAS_UAAS_CONFIG:m.parsedUaasConfig,AdditionalStatsRootFields:E,VSID:g,SID:T,VAS_USER_SESSION_RANDOM:vp.VAS_USER_SESSION_RANDOM,LOADER_LOADED_FROM_AN_YANDEX_RU:void 0,STATS_ROOT_PARAMS:{}};return Ip(e=>{let{resolve:t,reject:r,subscribeForTeardown:n}=e;const i=e=>{v.event({name:"LoadVasModule_ModuleLoaded",probability:Dp,data:{bundleName:u}}),t(e)};m.version?(e=>{let{version:t,win:r,moduleName:n,vasLoaderUrl:i,scriptSessionParams:o,resolve:a,reject:s,subscribeForTeardown:l,loaderFunctionsStatsWrapper:d}=e;const{promise:c,teardown:u}=(e=>{let{moduleName:t,version:r,win:n,scriptSessionParams:i}=e;const o=Ot(t,n);if(o)return{promise:Promise.resolve(o),teardown:St};const a=(e=>{let{bundleName:t,win:r,ecmaVersion:n,version:i}=e;const o=Df[n],a=qd(r),s=(e=>Nf[e]+".bundle.js")(t),l=""+lt(i)+o+"/"+s;return(0,Wl.m)(a)?a(l):l})({version:r,bundleName:t,win:n,ecmaVersion:kf}),{promise:s,teardown:l}=Ct({src:a,win:n,onBeforeLoad:e=>{(e=>{e.crossOrigin="anonymous"})(e),Zf(e,i)}});return{promise:s.then(()=>Ot(t,n)),teardown:l}})({moduleName:n,scriptSessionParams:o,version:t,win:r});let h=!1;l(()=>h=!0),l(u),c.then(a).catch(e=>{h?s(e):Lp({vasLoaderUrl:i,win:r,moduleName:n,scriptSessionParams:o,resolve:a,reject:s,subscribeForTeardown:l,loaderFunctionsStatsWrapper:d})})})({version:m.version,vasLoaderUrl:h,win:s,moduleName:u,scriptSessionParams:R,resolve:i,reject:r,subscribeForTeardown:n,loaderFunctionsStatsWrapper:v}):Lp({vasLoaderUrl:h,win:s,moduleName:u,scriptSessionParams:R,resolve:i,reject:r,subscribeForTeardown:n,loaderFunctionsStatsWrapper:v})})})({serviceName:"player",serviceVersion:"1.0-9279",vasLoaderUrl:"https://yandex.ru/ads/system/adsdk.js",config:Mt({},t,{additionalCustomRootFields:{vsid:r,contentPlayerVersion:"1.0-9279",testIds:null==(n=t.additionalParams)?void 0:n.slots}}),win:e,moduleName:"Multiroll"}).promise;return o.then(()=>{i&&Lt("adsdk.multiroll.full")}).catch(d),o}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ft(e){return new Promise((t,r)=>{_t(xt({},e,{onSuccess:t,onError:r}))})}function Ut(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Bt(e,t,r){function n(){f===h&&(f=h.slice())}function i(){if(p)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function o(e){if("function"!==typeof e)throw new Error("Expected the listener to be a function.");if(p)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return n(),f.push(e),function(){if(t){if(p)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,n();var r=f.indexOf(e);f.splice(r,1),h=null}}}function a(e){if(!Ut(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,u=c(u,e)}finally{p=!1}for(var t=h=f,r=0;r<t.length;r++){(0,t[r])()}return e}function s(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,a({type:Up.REPLACE})}function l(){var e,t=o;return(e={subscribe:function(e){function r(){e.next&&e.next(i())}if("object"!==typeof e||null===e)throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}})[xp.Z]=function(){return this},e}var d;if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error("Expected the enhancer to be a function.");return r(Bt)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var c=e,u=t,h=[],f=h,p=!1;return a({type:Up.INIT}),(d={dispatch:a,subscribe:o,getState:i,replaceReducer:s})[xp.Z]=l,d}function Ht(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function jt(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];0,"function"===typeof e[i]&&(r[i]=e[i])}var o,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if("undefined"===typeof r(void 0,{type:Up.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof r(void 0,{type:Up.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Up.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(s){o=s}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var n=!1,i={},s=0;s<a.length;s++){var l=a[s],d=r[l],c=e[l],u=d(c,t);if("undefined"===typeof u){var h=Ht(l,t);throw new Error(h)}i[l]=u,n=n||u!==c}return(n=n||a.length!==Object.keys(e).length)?i:e}}function Yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(r,!0).forEach((function(t){Yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function zt(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function Xt(e,t,r){void 0===t&&(t=pg),void 0===r&&(r="iterator");var n={meta:{name:r},next:e,throw:t,return:gg,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(n[Symbol.iterator]=function(){return n}),n}function Qt(e,t){var r=t.sagaStack;console.error(e),console.error(r)}function Jt(e,t){var r=Object.keys(e),n=r.length;var i,o=0,a=rg(e)?vg(n):{},s={};return r.forEach((function(e){var r=function(r,s){i||(s||Ag(r)?(t.cancel(),t(r,s)):(a[e]=r,++o===n&&(i=!0,t(a))))};r.cancel=ug,s[e]=r})),t.cancel=function(){i||(i=!0,r.forEach((function(e){return s[e].cancel()})))},s}function Zt(e){return{name:e.name||"anonymous",location:$t(e)}}function $t(e){return e[Jp]}function er(e,t){void 0===e&&(e=10);var r=new Array(e),n=0,i=0,o=0,a=function(t){r[i]=t,i=(i+1)%e,n++},s=function(){if(0!=n){var t=r[o];return r[o]=null,n--,o=(o+1)%e,t}},l=function(){for(var e=[];n;)e.push(s());return e};return{isEmpty:function(){return 0==n},put:function(s){var d;if(n<e)a(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:r[i]=s,o=i=(i+1)%e;break;case 4:d=2*e,r=l(),n=r.length,i=r.length,o=0,r.length=d,e=d,a(s)}},take:s,flush:l}}function tr(e,t){return void 0===e&&(e="*"),og(e)?Tg("TAKE",{pattern:e}):ag(r=e)&&r[Kp]&&$p(t)&&og(t)?Tg("TAKE",{channel:e,pattern:t}):ag(e)?Tg("TAKE",{channel:e}):void 0;var r}function rr(e,t){return Zp(t)&&(t=e,e=void 0),Tg("PUT",{channel:e,action:t})}function nr(e){var t=Tg("ALL",e);return t.combinator=!0,t}function ir(e,t){var r,n=null;return eg(e)?r=e:(rg(e)?(n=e[0],r=e[1]):(n=e.context,r=e.fn),n&&tg(r)&&eg(n[r])&&(r=n[r])),{context:n,fn:r,args:t}}function or(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Tg("CALL",ir(e,r))}function ar(e,t,r){void 0===r&&(r=[]);return Tg("CALL",ir([e,t],r))}function sr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Tg("FORK",ir(e,r))}function lr(e){return void 0===e&&(e=qp),Tg("CANCEL",e)}function dr(e){void 0===e&&(e=hg);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Tg("SELECT",{selector:e,args:r})}function cr(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}function ur(e){try{pr(),e()}finally{gr()}}function hr(e){bg.push(e),Pg||(pr(),vr())}function fr(e){try{return pr(),e()}finally{vr()}}function pr(){Pg++}function gr(){Pg--}function vr(){var e;for(gr();!Pg&&void 0!==(e=bg.shift());)ur(e)}function mr(e){var t="*"===e?Dg:tg(e)?Cg:rg(e)?Ig:sg(e)?Cg:eg(e)?Og:lg(e)?kg:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}function Er(e){void 0===e&&(e=Sg());var t=!1,r=[];return{take:function(n){t&&e.isEmpty()?n(Ng):e.isEmpty()?(r.push(n),n.cancel=function(){zt(r,n)}):n(e.take())},put:function(n){if(!t){if(0===r.length)return e.put(n);r.shift()(n)}},flush:function(r){t&&e.isEmpty()?r(Ng):r(e.flush())},close:function(){if(!t){t=!0;var e=r;r=[];for(var n=0,i=e.length;n<i;n++){(0,e[n])(Ng)}}}}}function yr(){var e,t,r,n,i,o,a=(t=!1,n=r=[],i=function(){n===r&&(n=r.slice())},o=function(){t=!0;var e=r=n;n=[],e.forEach((function(e){e(Ng)}))},(e={})[Kp]=!0,e.put=function(e){if(!t)if(Lg(e))o();else for(var i=r=n,a=0,s=i.length;a<s;a++){var l=i[a];l[Gp](e)&&(l.cancel(),l(e))}},e.take=function(e,r){var o,a;void 0===r&&(r=Dg),t?e(Ng):(e[Gp]=r,i(),n.push(e),e.cancel=(o=function(){i(),zt(n,e)},a=!1,function(){a||(a=!0,o())}))},e.close=o,e),s=a.put;return a.put=function(e){e[Wp]?s(e):hr((function(){s(e)}))},a}function Ar(e,t){var r=e[Hp];eg(r)&&(t.cancel=r),e.then(t,(function(e){t(e,!0)}))}function Sr(e){e.isRunning()&&e.cancel()}function Tr(e,t){return e+"?"+t}function Rr(e){var t=e.name,r=e.location;return r?t+"  "+Tr(r.fileName,r.lineNumber):t}function _r(e){var t,r,n,i=(t=function(e){return e.cancelledTasks},r=e,(n=[]).concat.apply(n,r.map(t)));return i.length?["Tasks cancelled due to error:"].concat(i).join("\n"):""}function wr(e,t,r,n,i,o,a){function s(t,r){if(r){if(u=2,Bg({meta:i,cancelledTasks:f}),v.isRoot){var n=jg();Hg(),e.onError(t,{sagaStack:n})}c=t,h&&h.reject(t)}else t===Xp?u=1:1!==u&&(u=3),d=t,h&&h.resolve(t);v.cont(t,r),v.joiners.forEach((function(e){e.cb(t,r)})),v.joiners=null}var l;void 0===a&&(a=ug);var d,c,u=0,h=null,f=[],p=Object.create(r),g=function(e,t,r){function n(e){t(),o(),r(e,!0)}function i(t){s.push(t),t.cont=function(i,o){l||(zt(s,t),t.cont=ug,o?n(i):(t===e&&(a=i),s.length||(l=!0,r(a))))}}function o(){l||(l=!0,s.forEach((function(e){e.cont=ug,e.cancel()})),s=[])}var a,s=[],l=!1;return i(e),{addTask:i,cancelAll:o,abort:n,getTasks:function(){return s}}}(t,(function(){f.push.apply(f,g.getTasks().map((function(e){return e.meta.name})))}),s),v=((l={})[zp]=!0,l.id=n,l.meta=i,l.isRoot=o,l.context=p,l.joiners=[],l.queue=g,l.cancel=function(){0===u&&(u=1,g.cancelAll(),s(Xp,!1))},l.cont=a,l.end=s,l.setContext=function(e){fg(p,e)},l.toPromise=function(){return h||(h=_g(),2===u?h.reject(c):0!==u&&h.resolve(d)),h.promise},l.isRunning=function(){return 0===u},l.isCancelled=function(){return 1===u||0===u&&1===t.status},l.isAborted=function(){return 2===u},l.result=function(){return d},l.error=function(){return c},l);return v}function br(e,t,r,n,i,o,a){function s(e,r){try{var i;r?(i=t.throw(e),Hg()):yg(e)?(c.status=1,s.cancel(),i=eg(t.return)?t.return(Xp):{done:!0,value:Xp}):i=Eg(e)?eg(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==c.status&&(c.status=3),c.cont(i.value)):l(i.value,n,s)}catch(o){if(1===c.status)throw o;c.status=2,c.cont(o,!0)}}function l(t,r,n,i){function o(r,i){a||(a=!0,n.cancel=ug,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(s,r):e.sagaMonitor.effectResolved(s,r)),i&&function(e){Fg=e}(t),n(r,i))}void 0===i&&(i="");var a,s=Vg();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:s,parentEffectId:r,label:i,effect:t}),o.cancel=ug,n.cancel=function(){a||(a=!0,o.cancel(),o.cancel=ug,e.sagaMonitor&&e.sagaMonitor.effectCancelled(s))},d(t,s,o)}var d=e.finalizeRunEffect((function(t,r,n){if(ng(t))Ar(t,n);else if(ig(t))br(e,t,u.context,r,i,!1,n);else if(t&&t[Yp]){(0,xg[t.type])(e,t.payload,n,h)}else n(t)}));s.cancel=ug;var c={meta:i,cancel:function(){0===c.status&&(c.status=1,s(Xp))},status:0},u=wr(e,c,r,n,i,o,a),h={task:u,digestEffect:l};return a&&(a.cancel=u.cancel),s(),u}function Pr(e,t){var r=e.channel,n=void 0===r?yr():r,i=e.dispatch,o=e.getState,a=e.context,s=void 0===a?{}:a,l=e.sagaMonitor,d=e.effectMiddlewares,c=e.onError,u=void 0===c?Qt:c;for(var h=arguments.length,f=new Array(h>2?h-2:0),p=2;p<h;p++)f[p-2]=arguments[p];var g=t.apply(void 0,f);var v,m=Vg();if(l&&(l.rootSagaStarted=l.rootSagaStarted||ug,l.effectTriggered=l.effectTriggered||ug,l.effectResolved=l.effectResolved||ug,l.effectRejected=l.effectRejected||ug,l.effectCancelled=l.effectCancelled||ug,l.actionDispatched=l.actionDispatched||ug,l.rootSagaStarted({effectId:m,saga:t,args:f})),d){var E=Wt.apply(void 0,d);v=function(e){return function(t,r,n){return E((function(t){return e(t,r,n)}))(t)}}}else v=hg;var y={channel:n,dispatch:mg(i),getState:o,sagaMonitor:l,onError:u,finalizeRunEffect:v};return fr((function(){var e=br(y,g,s,m,Zt(t),!0,void 0);return l&&l.effectResolved(m,e),e}))}function Ir(e){return ag(e)?"channel":sg(e)?String(e):eg(e)?e.name:String(e)}function Or(e,t,r){function n(t,r){if(s===Kg)return Gg(t);if(r&&!o)throw s=Kg,r;i&&i(t);var n=r?e[o](r):e[s]();return s=n.nextState,a=n.effect,i=n.stateUpdater,o=n.errorState,s===Kg?Gg(t):a}var i,o,a,s=t;return Xt(n,(function(e){return n(null,e)}),r)}function Cr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o,a={done:!1,value:tr(e)},s=function(e){return{done:!1,value:sr.apply(void 0,[t].concat(n,[e]))}},l=function(e){return o=e};return Or({q1:function(){return{nextState:"q2",effect:a,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeEvery("+Ir(e)+", "+t.name+")")}function kr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o,a,s={done:!1,value:tr(e)},l=function(e){return{done:!1,value:sr.apply(void 0,[t].concat(n,[e]))}},d=function(e){return{done:!1,value:lr(e)}},c=function(e){return o=e},u=function(e){return a=e};return Or({q1:function(){return{nextState:"q2",effect:s,stateUpdater:u}},q2:function(){return o?{nextState:"q3",effect:d(o)}:{nextState:"q1",effect:l(a),stateUpdater:c}},q3:function(){return{nextState:"q1",effect:l(a),stateUpdater:c}}},"q1","takeLatest("+Ir(e)+", "+t.name+")")}function Dr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o,a={done:!1,value:tr(e)},s=function(e){return{done:!1,value:or.apply(void 0,[t].concat(n,[e]))}},l=function(e){return o=e};return Or({q1:function(){return{nextState:"q2",effect:a,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeLeading("+Ir(e)+", "+t.name+")")}function Nr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return sr.apply(void 0,[Cr,e,t].concat(n))}function Lr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return sr.apply(void 0,[kr,e,t].concat(n))}function Mr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return sr.apply(void 0,[Dr,e,t].concat(n))}function Vr(e,t){return e.volume===t.volume&&e.muted===t.muted}function xr(e,t){return{reason:e,details:t,getElapsedTime:oe()}}function*Fr(e){const{ad:{adInfo:t}}=yield dr();t||(yield or([e,e.updateVideoControllerNativeControlsVisibility]))}function*Ur(e){const t=function(e){const{ad:{nextAdInfo:t},controller:{videoType:r}}=e;if(void 0!==t&&("postroll"!==t.adBreakType||r===Uc.VOD))return Z(t.remainingTime)}(yield dr());yield or(e.callbacks.onNextAdRemainingTimeChange,t)}function*Br(e){let{payload:{cueId:t,start:r,end:n}}=e;const{ad:{originalBroadcastAdCues:i}}=yield dr(),o=rv(i),a=o[t]||{start:r,end:n};void 0!==r&&(a.start=r),void 0!==n&&(a.end=n),o[t]=a,yield rr(Ku(o))}function Hr(e){return av.indexOf(se(e).hostname)>-1}function jr(e){const t=function(e){return Hr(e)&&se(e).pathname.slice(1).split("/")[1]||""}(e);return{channel:t,metaInfoUrl:"https://strm.yandex.net/kal/"+t+"/break/last?start_ts={{video-timestamp}}"}}function*Yr(e,t,r){yield Rg(ov);const n=yield dr(),{ad:{adInfo:i},controller:{stream:o}}=n,a=function(e){const{controller:{stream:t}}=e;if(t)return void 0!==t.metaInfoUrl?t.metaInfoUrl:Hr(t.url)?jr(t.url).metaInfoUrl:void 0}(n);if(!i||!Be(i)||i.params.startTimestamp!==e.params.startTimestamp||!o||!a)return;const{startProgramDateTime:l,startVideoTime:d,startTimestamp:c}=i.params,u=bc(l,d),h=bc(u,sv),f=Math.round(1e3*(u+(Date.now()/1e3-c))),p=function(e,t,r){return e.replace(new RegExp("{{"+t+"}}","gm"),encodeURIComponent(r))}(a,"video-timestamp",String(f));let g;try{g=yield t({method:"GET",url:p})}catch(A){return r.callbacks.onError(new gu({code:Ad.META_INFO_REQUEST_FAILED,details:{url:p},fatal:!1})),void(yield rr(Wu({end:h,cueId:i.params.cueId})))}const v=function(e){try{return s(e)?JSON.parse(e):void 0}catch(t){return}}(g.responseText);if(!(0,Ql.K)(v))return;const{cutoff:m,cue_id:E}=v;if(E!==i.params.cueId)return;const y=ie(m)?Oc(bc(f,m),1e3):h;yield rr(Wu({end:y,cueId:E})),yield Yr(e,t,r)}function*Gr(e,t){let{payload:r}=t;const{ad:{adInfo:n}}=yield dr();yield rr(ju(r)),n&&r&&n.adType!==r.adType?(yield or(e.callbacks.onAdStateChange,{state:nv.NOT_PLAYING,type:n.adType,adParams:{}}),yield or(e.callbacks.onAdStateChange,{state:nv.PLAYING,type:r.adType,adParams:{}})):n&&!r?yield or(e.callbacks.onAdStateChange,{state:nv.NOT_PLAYING,type:n.adType,adParams:{}}):!n&&r&&(yield or(e.callbacks.onAdStateChange,{state:nv.PLAYING,type:r.adType,adParams:{}})),void 0!==r&&Be(r)&&(yield Yr(r,Ft,e))}function*Kr(e){const t=yield dr(),{ad:{adInfo:r,originalBroadcastAdCueId:n},controller:{watchedTime:i}}=t,o=je(t);if(o&&Be(r)){const n=He(t,o);if(n){const{startProgramDateTime:t,startVideoTime:i,startTimestamp:o}=r.params,a=n.end+Af,s=Pc(Oc(Date.now(),1e3),o),l=bc(t,i);if(a<bc(s,l)){const t={utc:bc(l,s),videoTime:ie(i)?bc(i,s):void 0};return void e.stopAd({stopAdReason:yu.CutOff,data:{loadPositionAfterAd:t}})}}}if(o===n)return;yield rr(Yu(o));let a;void 0!==o?lv=i:a=Pc(i,lv),yield or(e.callbacks.onOriginalBroadcastAdStateChange,{cueId:o,originalBroadcastAdDuration:a})}function*Wr(e){const t=yield dr(),{controller:{currentTimeLowGranularity:r,duration:n,videoType:i,watchedTime:o}}=t;if(isNaN(n))return;const a=e.getMultiroll(),s={watchedTime:o,sourceWatchedTime:o,currentTime:r,duration:n,videoType:i||Uc.VOD},l=yield a.midroll.loadViewers(s),d=a.getNextAdInfo(s);yield rr(eh(d)),l.length<=0||(yield e.playAdViewers(mu.midroll,Re(l,mu.midroll),{}))}async function qr(e){await Ft({method:"GET",url:e,withCredentials:!1,timeout:dv})}function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xr(e){const t=uv[e];if(t)return t;cv.href=e;let r=cv.pathname||"";"/"!==r.charAt(0)&&(r="/"+r);const n={href:cv.href,protocol:cv.protocol,host:cv.host,hostname:cv.hostname,port:cv.port,pathname:r,search:cv.search,hash:cv.hash,baseDomain:(cv.hostname||"").split(".").slice(-2).join(".")};return uv[e]=n,zr({},n)}function Qr(e,t,r){if(void 0===t)return e;if(void 0===r)return e;const n=encodeURIComponent(t)+"="+encodeURIComponent(r);return cv.href=e,cv.search=cv.search?cv.search+"&"+n:"?"+n,cv.href}function Jr(e,t){cv.href=e;return((cv.hash||"").slice(1).split("&").map(e=>e.split("=")).map(e=>{let[t,r]=e;return[t,void 0===r?"":r]}).find(e=>{let[r]=e;return r===t})||[])[1]}function Zr(e,t,r){if(void 0===t)return e;if(void 0===r)return e;const n=encodeURIComponent(t)+"="+encodeURIComponent(r);return cv.href=e,cv.hash=cv.hash?cv.hash+"&"+n:"#"+n,cv.href}function $r(e,t,r){return e=function(e,t){if(-1===e.indexOf("#"))return e;cv.href=e;const r=tn(cv.hash.slice(1),t);return cv.hash=r?"#"+r:"",cv.href}(e,t),void 0===r?e:Zr(e,t,r)}function en(e,t){if(-1===e.indexOf("?"))return e;cv.href=e;const r=tn(cv.search.slice(1),t);return cv.search=r?"?"+r:"",cv.href}function tn(e,t){return e.split("&").filter(e=>e!==t&&0!==e.indexOf(t+"=")).join("&")}function rn(e){if(!Hr(e))return;const{protocol:t,host:r}=Xr(e);return t+"//"+r+"/ping"}function nn(e,t){const r=e.getRecoverHelper();r&&r.planTask(()=>e.recoverStream(),t)}function*on(e,t){void 0===t&&(t=hv);const r=yield dr(),{controller:{stream:n}}=r;if(!n)return;const i=function(e){const t=rn(e);if(!t)return;return ue(t,"r",""+Date.now()+Math.round(1e3*Math.random()))}(n.url);if(!i)return;let o=!1;for(;!1===o;){yield or(()=>Nc(t).promise);try{yield or(qr,i),o=!0}catch(a){}}yield rr(Rh(!0)),yield nn(e,fv)}function*an(e){const t=yield dr(),{skin:{hiddenControls:r}}=t;yield or([e,e.setHiddenControls],r)}function*sn(e){const{controller:{autoplay:r}}=yield dr();r&&(yield nr([rr(rh(!1)),or(()=>t(e.play()))]))}function ln(e,t){let{name:r,lang:n}=t;const i=e.find(e=>e.name===r);return i||(n?e.find(e=>e.lang===n):void 0)}function*dn(e){const{controller:{textTrackValue:t,textTracks:r,userTextTrackName:n,userTextTrackLang:i}}=yield dr();if(t)return void(yield or([e,e.setTextTrack],t));const o=ln(r,{name:n,lang:i})||function(e){if(0===e.length)return;const t=function(e,t){if("string"!==typeof t)return;const r=t.split("-")[0].toLowerCase();for(let n=0;n<e.length;n++){const t=e[n];if(t.name.toLowerCase()===r)return t}}(e,navigator.language);return void 0!==t?t:e[0]}(r);void 0===o?Su.error("No text tracks to enable"):yield or([e,e.setTextTrack],o.value)}function cn(e){return void 0!==e.ad.adInfo}function*un(e,t){let{payload:r}=t;const{controller:{playingState:n,watchedTime:i}}=yield dr();if(n===r||n===gd.END&&r===gd.PAUSE)return;if(r===gd.BUFFERING)return void(yield rr(fh(gd.BUFFERING)));if(n===gd.BUFFERING&&(yield function*(e){e===gd.PLAY&&(yield rr($h(xr(Eu.Other,void 0))))}(r)),n===gd.BUFFERING&&r===gd.PAUSE&&0===i||(yield rr(nh(Jg.started))),r!==gd.END)return void(yield rr(fh(r)));const o=yield dr(),{ad:{adInfo:a}}=o;cn(o)?Su.log("putPlayingState("+gd.END+") has not been dispatched because ad("+(a&&a.adType)+") is playing"):yield function*(e){const t=e.getMultiroll(),r=yield t.postroll.loadViewers({});r.length>0&&(yield e.playAdViewers(mu.postroll,Re(r,mu.postroll),{})),yield rr(fh(gd.END)),e.stop()}(e)}function*hn(e,t){let{payload:r}=t;yield or(e.callbacks.onAdblockDetected,r)}function*fn(e,t){let{payload:r}=t;yield ar(e,e.callbacks.onAudioTracksChange,[r])}function pn(e){const{audioTrackValue:t,audioTracks:r}=e.controller;return r.find(e=>{let{value:r}=e;return r===t})}function*gn(e,t){let{payload:r}=t;const n=yield dr();yield or(e.callbacks.onAudioTrackChange,pn(n))}function*vn(e,t){let{payload:r}=t;yield or(e.callbacks.onBufferingRangesChange,r)}function mn(e){return Z("number"!==typeof(t=Math.floor(2*e)/2)||isNaN(t)||!isFinite(t)?0:t);var t}function En(e){const{controller:{currentTime:t,bufferingRanges:r},skin:{skinDVRStartTime:n,skinDVRDuration:i}}=e;if(0===r.length)return!1;return i===1/0||t>n+i-pv}function yn(e){const{controller:{videoType:t}}=e;return t!==Uc.VOD&&En(e)}function*An(e){const t=yield dr(),{controller:{videoType:r,playbackRate:n,encoderState:i}}=t;r!==Uc.VOD&&i===Zg.Attached&&(cn(t)||(n>1.03?En(t)&&e.setPlaybackRate(1):!function(e){const{controller:{currentTime:t,dvrStartTime:r,dvrDuration:n}}=e;return t<r||t>r+n}(t)&&function(e){const{controller:{videoType:t}}=e;if(t!==Uc.LIVE)return!1;const{controller:{currentTime:r},skin:{skinDVRStartTime:n}}=e;return n+(0===r?0:pv)>r}(t)&&e.setPlaybackRate(1)))}function Sn(e){let{ad:{adInfo:t}}=e;return void 0!==t&&mv.includes(t.adType)}function*Tn(){const{controller:{currentTime:e,playingState:t,watchedTime:r,playbackRate:n,sourceId:i}}=yield dr();if(yv!==i&&(Ev=void 0,yv=i),void 0!==Ev){const t=function(e,t){const r=e>=0&&e<=t+.5?e:t;return Z(Math.max(0,r))}(Oc(Pc(e,Ev.videoTime),n),Oc(Ev.getElapsedTime(),1e3));yield rr(tf(bc(r,t)))}const o=yield dr(Sn);Ev=t!==gd.PLAY||o?void 0:{getElapsedTime:oe(),videoTime:e}}function*Rn(e,t){let{payload:r}=t;yield Tn(),yield An(e),yield ar(e,e.callbacks.onCurrentTimeChange,[r]),yield rr(gh(mn(r)))}function*_n(){const{controller:{encoderState:e}}=yield dr();e===Zg.Attached&&(yield rr(ah()))}function*wn(e,t){const{error:r}=t.payload;if(void 0===r)return;const{code:n,isFatal:i,details:o}=r;i?(Su.error(n,o),yield or(e.setFullscreen,!1)):Su.warn(n,o),yield or(e.callbacks.onError,r)}function*bn(e){let{payload:t}=e;const{controller:{videoTrackValue:r}}=yield dr();yield rr(Vh({videoTrackValue:r,isAbrEnabled:t}))}function*Pn(e,t){let{payload:r}=t;yield or(e.callbacks.onFullScreenChange,r)}function*In(e,t){let{payload:r}=t;const{controller:{isOnline:n}}=yield dr();n?Av.includes(r.source)&&(yield or(e.callbacks.onBandwidthEstimateChange,r)):yield or(e.callbacks.onBandwidthEstimateChange,{value:0,source:"default"})}function*On(e,t){let{payload:r}=t;r||(yield In(e,{payload:{value:0,source:"default"}})),yield or(e.callbacks.onNetworkStatusChange,{isOnline:r})}function*Cn(e,t){let{payload:r}=t;yield or(e.callbacks.onPlaybackRateChange,r)}function kn(e){return"https://"+e+"/ping?r="+Y(12)}function Dn(e){return kn(Xr(e).hostname)}function Nn(e){return e.map(e=>e&&e.name||"").filter(e=>{return Tv.includes(pe(e))&&(t=se(e).hostname,(r=".strm.yandex.net")===t.substring(t.length-r.length));var t,r})}function Ln(e,t,r){return void 0===r&&(r=0),Kl(e,e=>{let{start:n,end:i}=e;return n-r<=t&&t<=i+r})}function Mn(e,t){const r=Ln(e,t);return void 0===r?void 0:Pc(r.end,t)}function Vn(e){const{currentTime:t,bufferingRanges:r}=e.controller;return Mn(r,t)}function*xn(e){const t=yield dr(),{bufferingRanges:r,stream:n}=t.controller;if(0===r.length)return;if(!function(e){return(Vn(e)||0)<wv}(t))return;if(e.getConnectionQuality()!==Sv.OK)return;if(cn(t))return;if(!n)return;const i=rn(n.url);if(!i)return;const{resourceTimings:o}=e.getDebugInfo(),a=function(e){const t=Nn(e);if(0===t.length)return[];const[r,n]=We(t,e=>fe(e).includes("audio")),i=n[n.length-1],o=r[r.length-1],a=[];return i&&a.push(Dn(i)),o&&a.push(Dn(o)),a}(o),{controller:{isOnline:s}}=yield dr();if(!s)return;const l=ue(i,"r",Date.now().toString()),c=a.map(e=>ue(e,"r",Date.now().toString()));if(a.length<=0)return;const u=qr(l),h={reason:"ChunkServerIsNotAvailable",delay:new Promise(e=>{u.then(()=>{Promise.all(c.map(qr)).catch(e)}).catch(d)}),rawData:0};yield nn(e,h)}function*Fn(e){const{controller:{playingState:t},ad:{inStreamPlayingState:r}}=yield dr();t===gd.BUFFERING&&(yield xn(e),yield function*(e){const t=yield dr(),{controller:{isOnline:r}}=t;if(!r){const t={reason:"recoverStreamIfIsOffline",delay:0,rawData:0};yield nn(e,t)}}(e)),yield Tn(),void 0===r||r===gd.END?yield or(e.callbacks.onStateChange,t):yield or(e.callbacks.onStateChange,r)}function*Un(e,t){let{payload:r}=t;if(!r)return;yield or(e.callbacks.onResourcesIdle),e.callbacks.logEvent({event:vu.ResourcesIdle,params:{}}),yield Rg(5e3);const n=(0,bv.getGpu)();e.callbacks.logEvent({event:vu.ClientInfo,params:{gpu:{renderer:n.renderer,vendor:n.vendor}}})}function*Bn(e,t){let{payload:r}=t;yield or(e.callbacks.onStartStageChange,r)}function*Hn(e,t){let{payload:r}=t;yield or(e.callbacks.onChangeStream,r)}function*jn(e,t){let{payload:r}=t;yield or(e.callbacks.onStreamsWithSupportInfoChange,r)}function*Yn(e,t){let{payload:r}=t;yield ar(e,e.callbacks.onTextTracksChange,[r])}function*Gn(e,t){let{payload:r}=t;yield or(e.callbacks.onVideoSizeChange,r)}function Kn(){return(Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wn(e){const{videoTrackValue:t,videoTracks:r,isAbrEnabled:n}=e.controller,i=r.find(e=>{let{value:r}=e;return r===t});if(i)return Kn({},i,{auto:n})}function*qn(e,t){yield Rg(0),yield or(e.callbacks.onVideoTrackChange,yield dr(Wn))}function*zn(e,t){let{payload:r}=t;yield ar(e,e.callbacks.onVideoTracksChange,[r])}function*Xn(e,t){let{payload:r}=t;yield or(e.callbacks.onVideoTypeChange,r)}function*Qn(e,t){let{payload:{volume:r,muted:n,changeReason:i}}=t;yield or(e.callbacks.onVolumeChange,{volume:r,muted:n,changeReason:i})}function*Jn(e){const t=yield dr(),{skin:{nativeControlsVisibility:r},controller:{textTrackEnabled:n,nativeTextTrackVisible:i,isPip:o}}=t,a=void 0===i||i||o||Boolean(r&&n);yield or([e,e.toggleNativeSubtitles],a)}function Zn(e,t,r){void 0===r&&(r=Iv());let n=t;return function*(){var t;if(0===arguments.length)return;const{payload:i}=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],o=r(i,n)||Number.isNaN(i)&&Number.isNaN(n);o||(n=i,yield*e(...arguments))}}function*$n(e){const{controller:{duration:t,playingState:r,watchedTime:n}}=yield dr();if(isNaN(t)||0===n||r!==gd.PAUSE)return;if(yield dr(cn))return;const i=oe();for(;;){const t=Z(i()/1e3),r=yield e.getMultiroll().postPauseroll.loadViewers({pausedTime:t});if(0!==r.length)return void e.planAdViewers(Re(r,mu.postPauseroll));yield Rg(Ov)}}function ei(e,t){const r=function(e,t){let{controller:{volume:r,muted:n,isAbrEnabled:i,videoTrackValue:o}}=t;return[Nr(sh,Zn(Qn,{volume:r,muted:n},Vr),e),Nr(sh,Zn(an,{volume:r,muted:n},Vr),e),Nr(fh,Zn(an),e),Nr(Xh,Zn(an),e),Nr(hh,Zn(Xn),e),Nr(sf,un,e),Nr(fh,Zn(Fn,$g.playingState),e),Nr($u,Zn(Fn,qg.inStreamPlayingState),e),Nr(ph,Zn(Rn),e),Nr(oh,_n),Nr(ah,sn,e),Nr(mh,Zn(Hn),e),Nr(Sh,Zn(jn),e),Nr(Rh,Zn(On),e),Nr(Mh,Zn(bn,i)),Nr(Vh,Zn(qn,{videoTrackValue:o,isAbrEnabled:i}),e),Nr(xh,Zn(zn),e),Nr(Uh,Zn(gn),e),Nr(Bh,Zn(fn),e),Nr(jh,Zn(Yn),e),Nr(zh,dn,e),Nr(Xh,Zn(Pn),e),Nr(Dh,wn,e),Nr(Gu,Zn(hn),e),Nr(kh,Zn(vn),e),Nr(nh,Zn(Bn),e),Nr(Ch,Cn,e),Nr(uh,Zn(Gn),e),Nr(Zu,Zn(In),e),Nr(Yh,Jn,e),Nr(Qh,Jn,e),Nr(Gh,Jn,e),Nr(Xh,Zn(Jn),e),Mr([tf,fh],Wr,e),Lr(fh,$n,e),Nr(Wu,Br),Nr(Qu,Kr,e),Nr(Ku,Kr,e),Nr(Hu,Zn(Gr),e),Nr(ju,Zn(Fr),e),Nr(eh,Zn(Ur),e),Nr(rf,Zn(Un),e),Mr(Wg,on,e)]}(e,t);return function*(){yield nr(r)}}function ti(){return(ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ri(e,t,r){return function(e,t){return e===t||!(!Number.isNaN(e)||!Number.isNaN(t))}(e[t],r)?e:ti({},e,{[t]:r})}function ni(e){return function(t,r){return ri(t,e,r)}}function ii(){return(ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oi(e,t){return x(t).reduce((e,r)=>ri(e,r,t[r]),e)}function ai(){return(ai=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function si(e){return jt({controller:(n=e.controller,xe({},n).on(th,ni("engine")).on(_h,ni("fragmentDuration")).on(bh,ni("dvrStartTime")).on(Ph,ni("dvrDuration")).on(nh,ni("startStage")).on(wh,ni("programDateTime")).on(Zu,ni("lastKnownBandwidthEstimate")).on(sh,oi).on(lh,ni("autoplayImpossible")).on(dh,ni("userVolume")).on(ch,ni("duration")).on(uh,oi).on(hh,ni("videoType")).on(rh,ni("autoplay")).on(ih,ni("preload")).on(fh,ni("playingState")).on(ph,ni("currentTime")).on(gh,ni("currentTimeLowGranularity")).on(vh,ni("from")).on(mh,ni("stream")).on(Eh,ni("sourceParams")).on(yh,e=>ai({},e,{sourceId:e.sourceId+1})).on(Ah,ni("streams")).on(Sh,ni("streamsWithSupportInfo")).on(Th,ni("startPosition")).on(kh,ni("bufferingRanges")).on(oh,ni("encoderState")).on(Lh,(e,t)=>ri(ri(e,"isAbrEnabled",e.isAbrEnabled&&t),"isAbrSupported",t)).on(Mh,(e,t)=>ri(e,"isAbrEnabled",t&&e.isAbrSupported)).on(Vh,(e,t)=>{let{videoTrackValue:r,isAbrEnabled:n}=t;return oi(e,{videoTrackValue:r,isAbrEnabled:n&&e.isAbrSupported})}).on(Fh,(e,t)=>{let{name:r,height:n}=t;return oi(e,{userVideoTrackName:r,userVideoTrackHeight:n})}).on(xh,ni("videoTracks")).on(Uh,ni("audioTrackValue")).on(Bh,ni("audioTracks")).on(Hh,(e,t)=>{let{name:r,lang:n}=t;return ri(ri(e,"userAudioTrackName",r),"userAudioTrackLang",n)}).on(Yh,ni("textTrackEnabled")).on(Gh,ni("nativeTextTrackVisible")).on(Kh,ni("feed")).on(Wh,ni("textTrackValue")).on(jh,ni("textTracks")).on(qh,(e,t)=>{let{enabled:r,name:n,lang:i}=t;return oi(e,{userTextTrackEnabled:r,userTextTrackName:n,userTextTrackLang:i})}).on(Xh,ni("isFullscreen")).on(Qh,ni("isPip")).on(Jh,ni("isVisible")).on(Zh,ni("isDocumentVisible")).on($h,ni("expectedStalled")).on(Dh,(e,t)=>!t||function(e){return!x(e).length}(t)||t.error&&t.error.isFatal?ai({},e,{errorInfo:t}):e).on(Nh,ni("lastRecoverPosition")).on(Rh,ni("isOnline")).on(ef,ni("preview")).on(tf,ni("watchedTime")).on(Ch,ni("playbackRate")).on(af,ni("videoElementStyle")).on(lf,ni("preloadDetails"))),ad:(r=e.ad,xe({},r).on($u,ni("inStreamPlayingState")).on(Bu,ni("adConfig")).on(ju,ni("adInfo")).on(eh,ni("nextAdInfo")).on(Yu,ni("originalBroadcastAdCueId")).on(Ku,ni("originalBroadcastAdCues")).on(Gu,ni("adblockDetected")).on(zu,ni("hasPreroll")).on(Xu,ni("adSyncInit")).on(Ju,ni("nativeAdControlsVisibility")).on(qu,(e,t)=>{const r=rv(e.originalBroadcastAdCues);return delete r[t],ii({},e,{originalBroadcastAdCues:r})})),skin:(t=e.skin,xe({},t).on(nf,ni("hiddenControls")).on(of,ni("nativeControlsVisibility")).on(Ih,ni("skinDVRStartTime")).on(Oh,ni("skinDVRDuration")).on(Cv,ni("useNativeSubtitles")))});var t,r,n}function li(e,t){const r=Yg(),n=function(e){let t=null;return Wt(e,(0,kv.S)(e=>{t||(t=Promise.resolve().then(()=>{t=null,e()}))}))}((window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Wt)(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return Kt({},r,{dispatch:n=Wt.apply(void 0,o)(r.dispatch)})}}}(r))),i=Bt(si(t),n),o=ei(e,t);return r.run((function*(){for(;;)try{yield or(o)}catch(t){0,e.callbacks.onError(new gu(t,{code:Ad.SAGA_ERROR,isFatal:!1}))}})),i}function di(e){const{textTrackValue:t,textTracks:r}=e.controller;return r.find(e=>{let{value:r}=e;return r===t})}function ci(e){let{controller:{videoType:t,currentTime:r},skin:{skinDVRStartTime:n,skinDVRDuration:i}}=e;return function(e){let{videoType:t,currentTime:r,dvrStartTime:n,dvrDuration:i}=e;return void 0===t||t===Uc.VOD?Nv:i===1/0||r>n+i-pv?Mv:t!==Uc.LIVE?Nv:n+(0===r?0:10)>r?Lv:Nv}({videoType:t,currentTime:r,dvrStartTime:n,dvrDuration:i})}function ui(){return(ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hi(){return(hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fi(e,t){if(!e||!e.height||!e.width||!t)return"unknown";const r=t.getMaxCapAllowedVideoTrack();return r&&r.height&&r.width?r.width===e.width&&r.height===e.height?"same":r.width>e.width||r.height>e.height?"smaller":r.width<e.width||r.height<e.height?"larger":"unknown":"unknown"}function pi(){return(pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function gi(e){const t=b();return pi({},t,{additional:pi({},(0,Ql.K)(t)?t.additional:void 0,e)})}function vi(e){const t=0===nm,r=im[e];return im[e]=!0,_()&&t&&!r}function mi(){vi("sourceStart")&&N(qv.autoplayFalse)}function Ei(e){let{reason:t="unknown"}=e,r=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,zv);vi("sourceStart")&&N(qv.firstStartAdSDKFailed,void 0,void 0,pi({reason:t},r))}function yi(){nm++,im.sourceStart=!1;const e=0===nm;e?N(qv.firstLoadSource):Md=A(document);try{w(e);const t=b();(0,Id.Pj)(t.additional||{})}catch(t){}}function Ai(e,t){if(!_()||im.sourceStart)return;const r=0===nm;C(r&&t?em[e]:r?$v[e]:t?rm[e]:tm[e])}function Si(e,t,r){const n=im.sourceStart;if(im.sourceStart=!0,!_()||n)return;if(0===nm){const n=r?em[e]:$v[e];N(r?Qv[e]:Xv[e],void 0,!1,{additional:t}),k(n,{additional:t})}else k(r?rm[e]:tm[e],gi(t))}function Ti(e,t,r){vi("yaFirstFrameDecoded")&&(r&&"AD"!==e||N(Jv[e],void 0,!1,{additional:t}))}function Ri(e,t,r){vi("yaFirstFrameShown")&&(r&&"AD"!==e||N(Zv[e],void 0,!1,{additional:t}))}function _i(e){return e.supported&&void 0!==e.engine}function wi(e){return _i(e.supportInfo)}function bi(e){return!(t=e.supportInfo).supported&&void 0!==t.noSupportReason;var t}function Pi(){return(Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ii(e){const t=function(e){return e.filter(bi).map(e=>{let{supportInfo:t}=e;return t.noSupportReason})}(e),r={details:{streams:e},isFatal:!0};if(cm(t,e=>e===pm.INVALID_STREAM_URL))return new gu(Pi({},r,{code:Ad.INVALID_STREAM_URL}));if(cm(t,e=>e===pm.NO_SUPPORTED_DRM))return new gu(Pi({},r,{code:Ad.NO_DRM}));if(cm(t,e=>e===pm.NO_CODECS))return new gu(Pi({},r,{code:Ad.NO_CODECS}));const n=cm(t,e=>e===pm.NO_MSE);return new gu(Pi({},r,n?fm?{code:Ad.NO_PLAYABLE_STREAMS}:{code:Ad.NO_MSE}:{code:Ad.NO_PLAYABLE_STREAMS}))}function Oi(e,t){void 0===t&&(t=Am);const{hostname:r}=se(e),n=function(e){const{hostname:t}=se(e),r=t.split(".");return r.length<=2?t:r.slice(-2).join(".")}(e),i=t.includes(r)||t.includes(n);return i}function Ci(e){if(void 0===e||!(0,Ql.K)(e))return!1;const{servers:t,advanced:r}=e;return(0,Ql.K)(t)&&s(t["com.apple.fps.1_0"])&&(0,Ql.K)(r)&&(0,Ql.K)(r["com.apple.fps.1_0"])&&s(r["com.apple.fps.1_0"].processSPCPath)}function ki(e){void 0===e&&(e=window);const t=m(e).match(/Tizen ([\d]+)\.([\d]+)/);if(!t)return{major:-1,minor:-1};const[,r,n]=t;return{major:parseInt(r,10),minor:parseInt(n,10)}}function Di(e){return e.preferNative||km||Kc||Nm.isSmartTV()&&!Cm||Ci(e.stream.drmConfig)?Kv.NATIVE:Kv.HLS}function Ni(e,t){return-1!==function(e,t,r,n){void 0===r&&(r=0);void 0===n&&(n=xm);for(let i=r;i<e.length;i++)if(n(e[i],t))return i;return-1}(e,t)}function Li(e){const t=Object.values;if("function"===typeof t)return t(e);{const t=[];for(const r in e)V(e,r)&&t.push(e[r]);return t}}function Mi(e,t){void 0===t&&(t=window);const r=m(t),n=new RegExp("\\b"+e+"/((?:\\d+)(?:\\.\\d+)*)\\b","i"),i=r.match(n);if(i)return i[1].split(".").map(e=>parseInt(e,10))}function Vi(e){return Mi("YaBrowser",e)}function xi(){return(xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}async function Fi(){const e=[],t=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}];return await Promise.all(Wm.map(async r=>{try{await window.navigator.requestMediaKeySystemAccess(r,t),e.push(r)}catch(n){}})),e}function Ui(){const e=[];return Wm.forEach(t=>{window.MSMediaKeys.isTypeSupported(t)&&e.push(t)}),e}function Bi(e){let{video:t}=e;const r=[];return Wm.forEach(e=>{t.canPlayType("video/mp4",e)&&r.push(e)}),r}function Hi(){const e=[];return[Ym,Gm].forEach(t=>{window.WebKitMediaKeys.isTypeSupported(t,"video/mp4")&&e.push(t)}),e}async function ji(e){return Bm&&!(Um||Fm||wm||Om)?{supportedDrmSystems:[],detectionMethod:qm.YandexBrowserLinux}:function(e){if(!_m(e))return!1;const t=ge(e);if(t&&Hm(e))return!1;const r=Vi(e);if(void 0===r)return!1;const[n,i,o,a]=r;if(n<18)return!0;if(18===n){if(i>4)return!1;if(t&&o<3)return!0;if(Ae(e)&&(o<1||!a||a<=526))return!0}return!1}()?{supportedDrmSystems:[],detectionMethod:qm.OldYandexBrowser}:window.WebKitMediaKeys?{supportedDrmSystems:Hi(),detectionMethod:qm.WebKitMediaKeys}:"function"===typeof window.navigator.requestMediaKeySystemAccess?{supportedDrmSystems:await Fi(),detectionMethod:qm.requestMediaKeySystemAccess}:"function"===typeof window.MSMediaKeys?{supportedDrmSystems:Ui(),detectionMethod:qm.MSMediaKeys}:e.video.webkitGenerateKeyRequest?{supportedDrmSystems:Bi(e),detectionMethod:qm.GenerateKeyRequest}:{supportedDrmSystems:[],detectionMethod:qm.NotAvailable}}function Yi(){return $m.canPlayType('video/mp4;codecs="avc1.4D481F"')?{supported:!0,engine:Kv.MP4}:vm}function Gi(e){try{return Boolean(e.yandexPlayerSupported)}catch(t){return!1}}function Ki(){const e=r(()=>parseInt(Tm.ZP.getItem("videoplayer-yandex-player-last-fatal")||"",10))||NaN;if(isNaN(e))return!0;return Date.now()-e>tE}async function Wi(e){return!!Gi(e.video)&&(!!Ki()&&async function(e){try{return(0,Wl.m)(Tu.isYandexPlayerSupported)||await new Promise((e,t)=>{Tu.onYandexPlayerSupportedAvailable=e,setTimeout(t,5e3)}),Tu.isYandexPlayerSupported(e)}catch(t){return!1}}(e))}function qi(){return(qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}async function zi(e){const{stream:t,video:r,preferNative:n,disableAndroidPlayer:i}=e,{drmConfig:o,url:a}=t;if(!(e=>function(e){const t=e.trim();return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)}(e)&&Oi(e))(a))return ym;const s=(e=>"mpd"===pe(e.toLocaleLowerCase()))(a),l=(e=>"m3u8"===pe(e.toLocaleLowerCase()))(a);if((e=>"mp4"===pe(e.toLocaleLowerCase()))(a))return Yi();if(!s&&!l)return Em;let d;if(d=s?rE||(rE=await Im().then(()=>eE).catch(()=>gm)):await async function(e){try{0,void 0===Vm&&(Vm=await Im());return Vm.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')?fm?{supported:!0,engine:Di(e)}:Ci(e.stream.drmConfig)?mm:Mm:fm?Lm:vm}catch(t){return fm?Lm:gm}}({stream:t,preferNative:n}),!d.supported)return d;if(!i&&Gi(r)){if(await Wi({video:r,stream:t,playerVersion:"1.0-9279"})&&_i(d))return qi({},d,{engine:Kv.YANDEX})}if(void 0===o||!(0,Ql.K)(o))return d;return await async function(e,t){const{servers:r={}}=e,n=x(r);if(0===n.length)return!1;const i=await Zm({video:t});return cm(n,e=>Ni(i,e))}(o,r)?d:mm}function Xi(e){const{mpd:t,m3u8:r,mss:n}=function(e){return{mpd:e.filter(e=>{let{stream:t}=e;return"mpd"===pe(t.url)}),m3u8:e.filter(e=>{let{stream:t}=e;return"m3u8"===pe(t.url)}),mss:e.filter(e=>{let{stream:t}=e;return!["mpd","m3u8"].includes(pe(t.url))})}}(e),i=[...t,...n,...r];return i.find(e=>{let{stream:t}=e;return(0,Ql.K)(t.drmConfig)})||i[0]}function Qi(e){const t=e.filter(wi);if(0===t.length)return;if(Nm.isSmartTV())return Xi(t);const r=t.find(e=>{let{stream:t}=e;return void 0!==t.drmConfig&&(0,Ql.K)(t.drmConfig)});if(r)return r;const n=t.find(e=>{let{supportInfo:t}=e;return t.engine===Kv.NATIVE}),i=t.find(e=>{let{supportInfo:t}=e;return t.engine===Kv.MPD}),o=nE>=15&&!iE&&!((eu||oE)&&(e=>{let t=!1;e&&(t=cm(av,t=>e.startsWith("https://"+t+"/live/")||e.startsWith("https://"+t+"/kal/")));return t})(null==i?void 0:i.stream.url));if(Kc&&!o&&n)return n;if(i)return i;const a=t.find(e=>{let{supportInfo:t}=e;return t.engine!==Kv.MP4});return a||t[0]}async function Ji(e){if(0===e.streams.length)return{status:"error",error:new gu({code:Ad.NO_STREAMS,details:{},isFatal:!0}),streamsWithSupportInfo:[]};const t=await function(e){let{streams:t,video:r,preferNative:n,disableAndroidPlayer:i}=e;return Promise.all(t.map(async e=>({stream:e,supportInfo:await zi({stream:e,video:r,preferNative:n,disableAndroidPlayer:i})})))}(e),r=Qi(t);return r?{status:"success",supportedStream:r,streamsWithSupportInfo:t}:{status:"error",error:Ii(t),streamsWithSupportInfo:t}}function Zi(e,t){for(let r=0;r<e.length;++r){const{start:n,end:i}=e[r];if(n<=bc(t,Z(.1))&&t<=i)return Z(Math.max(i-t,0))}return Z(0)}function $i(e,t){return{total:Zi(e.total,t),audio:Zi(e.audio,t),video:Zi(e.video,t)}}function eo(e){return ue(e,"t",String(Date.now()))}async function to(e,t){const r=rn(e);return async function(e,t){try{return await Ft({url:e,withCredentials:t,method:"GET",checkStatus:e=>0!==e,retries:3}),!1}catch(r){return!0}}(r||ue(eo(e),"abd","1"),!s(r)&&t)}function ro(){return(ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function no(e){const{additionalParams:t=Fv}=e;if(!(0,Ql.K)(e.adConfig))return;const{partnerId:r,adBreaks:n}=e.adConfig;return r||n?ro({},e.adConfig,{additionalParams:t}):void 0}function io(e){if(void 0===e||isNaN(e))return"unknown";for(let t=0;t<sE.length;t++)if(e<sE[t].end)return sE[t].name;return"unknown"}function oo(e){const t=se(e),r=de(t.search),n=(()=>{const e=void 0!==r.start,t=void 0!==r.end;return e||t?"?"+(e?"start="+r.start:"")+(t?(e?"&":"")+"end="+r.end:""):""})();return t.originalPath+n}function ao(e,t){return t&&"boolean"===typeof t.withCredentials?t.withCredentials:!!Hr(e.url)||Uv.withCredentials}function so(e){if(void 0===e||isNaN(e))return"unknown";for(let t=0;t<lE.length;t++)if(e<lE[t].end)return lE[t].name;return"unknown"}function lo(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:r={}}=t;return Boolean(r.saveData)}function co(e){const{stream:t,sourceParams:r}=e,n=se(t.url),i=de(n.search);return JSON.stringify([n.pathname,i.start,i.end,null==r?void 0:r.startPosition])}function uo(e){return e[0]}function ho(e){return Array.isArray(e)}function fo(e){const t=hE.getItem("playerapi-numbers-session-storage-key"),n=r(()=>JSON.parse(t||""));return function(e,t){const r=e.find(e=>!!ho(e)&&uo(e)===t);return void 0===r?void 0:Z(r[1])}(Array.isArray(n)?n:[],e)}function po(e,t){const n=hE.getItem("playerapi-numbers-session-storage-key"),i=r(()=>JSON.parse(n||"")),o=Array.isArray(i)?i:[];hE.setItem("playerapi-numbers-session-storage-key",JSON.stringify(function(e,t,r){const n=function(e,t){return[e,t]}(t,r),i=e.findIndex(e=>!!ho(e)&&uo(e)===t);for(0===i?e[0]=n:(i>0&&e.splice(i,1),e.splice(0,0,n));10<e.length;)e.pop();return e}(o,e,t)))}async function go(e){let{url:t,data:r,contentType:n}=e;if(await gE(),Ce("web_gogol_fetch_keepalive")&&pE()){const e={method:"POST",body:r,keepalive:!0,priority:"low",credentials:"include"};void 0!==n&&(e.headers={"Content-Type":n});if((await fetch(t,e)).ok)return;if(!Ce("web_gogol_fetch_retry_once"))return;return await gE(),void fetch(t,e)}if(((e,t)=>{if("function"!==typeof navigator.sendBeacon)return!1;try{return navigator.sendBeacon(e,t)}catch(r){return!1}})(t,n?new Blob([r],{type:n}):r))return;const i=new XMLHttpRequest;i.open("POST",t),i.withCredentials=!0,void 0!==n&&i.setRequestHeader("Content-Type",n),i.send(r)}function vo(e,t){try{e.details||(e.details={}),e.details.stage=t}catch(r){}}function mo(e,t){return _m(e)?function(e){void 0===e&&(e=window);const t=m(e).match(/YaBrowser\/([\d.]+)/),r=t&&t[1]||"";return r?parseFloat(r):-1}(e)<18.6?"pip":"x-yandex-pip":"disablePictureInPicture"in t?"disablePictureInPicture":void 0}function Eo(e,t,r){const n=mo(e,r);n&&(t?r.removeAttribute(n):r.setAttribute(n,"true"))}function yo(e,t){return e.responseStart-t.responseStart}function Ao(e){return e.responseStart-e.requestStart}function So(){if("undefined"===typeof window.performance)return NaN;const e=PE.reduce((e,t)=>(0,bE.Z)(e,function(e){try{return e.performance.getEntriesByType("resource").filter(e=>{let{name:t,transferSize:r,responseStart:n,requestStart:i}=e;return"string"===typeof t&&r>0&&n>0&&i>0})}catch(t){return[]}}(t),yo),[]).filter(e=>{let{name:t}=e;return vE.test(t)});return 0===e.length?NaN:e.reduce((e,t)=>(1.3*e+.7*Ao(t))/2,Ao(e[0]))}function To(){return(To=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ro(e){if(isNaN(e.value))return;const t={bandwidthEstimate:Math.floor(e.value),time:od(),source:e.source};Rm.setItem("videolayer-bandwidth-estimate",JSON.stringify(t))}function _o(e,t){return e.responseEnd-t.responseEnd}function wo(){if("undefined"===typeof window.performance)return{value:NaN,source:"timing-api"};const e=PE.reduce((e,t)=>(0,bE.Z)(e,function(e){try{return e.performance.getEntriesByType("resource").filter(e=>{let{duration:t,responseEnd:r,transferSize:n}=e;return t>0&&r>0&&n>1024})}catch(t){return[]}}(t),_o),[]).filter(e=>{let{name:t}=e;return vE.test(t)});if(0===e.length)return{value:NaN,source:"timing-api"};const t=new UE;return e.forEach(e=>{let{transferSize:r,duration:n}=e;return t.sample(n,r)}),t.getBandwidthEstimate({value:NaN,source:"timing-api"})}function bo(e){const{controller:{lastKnownBandwidthEstimate:t,playerConfig:r}}=e;if(isFinite(t.value))return t;if(null!=r&&r.slowConnection)return{value:LE,source:"default-slow"};const n=function(){try{const e=Rm.getItem("videolayer-bandwidth-estimate");if(!e)return NaN;const{bandwidthEstimate:t,time:r}=JSON.parse(e);return od()-r<ME?t:NaN}catch(e){return NaN}}();if(!isNaN(n)&&n>0)return{value:n,source:"cache"};const i=wo();if(!isNaN(i.value)&&i.value>0)return i;const o=function(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:r={}}=t;if("number"===typeof r.downlink)return r.downlink;if("number"===typeof r.downlinkMax)return r.downlinkMax;if("string"===typeof r.type||"number"===typeof r.type)switch(r.type){case DE.BLUETOOTH:return 3;case kE.CELL_2G:return.384;case kE.CELL_3G:case DE.CELLULAR:return 2;case DE.WIMAX:return 37;case DE.NONE:return 0;case kE.ETHERNET:case DE.ETHERNET:case kE.WIFI:case DE.WIFI:case DE.MIXED:return 10;case kE.UNKNOWN:case DE.UNKNOWN:case DE.OTHER:}return-1}(window);return-1===o?{value:NE,source:"network-api"}:{value:Ic(Ic(o,1e3),1e3),source:"network-api"}}function Po(){return(Po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Io(){KE(),n(window.VTTCue)||(WE?window.VTTCue=WE:WE=window.VTTCue)}function Oo(e){let{win:t=window,src:r,checkLoad:n,onBeforeLoad:i=d,onLoad:o=d,withCredentials:a=!1}=e;jE["ll1.0-9279"]=jE["ll1.0-9279"]||{};const s=jE["ll1.0-9279"];var l;return s[r]||(s[r]=(l={checkLoad:n,win:t,src:r,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{a||(e.crossOrigin="anonymous"),i()}},new Promise((e,t)=>{g(Po({},l,{onLoad:e,onError:t}))})).then(o),s[r].catch(()=>delete s[r])),s[r]}function Co(){let e=!1;return Oo({src:YE,checkLoad:()=>"undefined"!==typeof Hls,onBeforeLoad:()=>{e=!0,C("lib.hlsjs")},onLoad:()=>{e&&k("lib.hlsjs")}})}function ko(){let e=!1;return Oo({src:GE,checkLoad:()=>"undefined"!==typeof shaka,onBeforeLoad:()=>{e=!0,C("lib.shaka")},onLoad:()=>{e&&k("lib.shaka")}}).then(Io)}function Do(e,t,r){if(e.length<1)return;let[n]=e,i=t(n);for(let o=1;o<e.length;o++){const a=e[o],s=t(a);r(s,i)<0&&(n=a,i=s)}return n}function No(e,t){return Do(e,t,(e,t)=>t-e)}function Lo(e,t){return Do(e,t,(e,t)=>e-t)}function Mo(e){return(0,Ql.K)(e.video)&&ie(e.video.width)&&ie(e.video.height)}function Vo(e,t){let{maxWidth:r=$(1/0),maxHeight:n=$(1/0),width:i=$(1/0),height:o=$(1/0)}=t;const a=e.filter(Mo);if(a.length<=1)return e;const s=function(e,t){let{width:r,height:n}=e;return t>r/n?{width:r,height:$(r/t)}:{width:$(n*t),height:n}}({width:i,height:o},a[0].video.width/a[0].video.height),l=[],d=s.width*s.height,c=Lo(a.slice().reverse(),e=>{let{video:{width:t,height:r}}=e;return Math.abs(d-t*r)});for(let u=0;u<a.length&&(a[u].video.width<r&&a[u].video.height<n&&l.push(a[u]),c!==a[u]);u++);return l.length<1?[a[0]]:l}function xo(e){const t=[],r=Object.create(null),n=Object.create(null);return e.forEach(e=>{const{video:i,audio:o}=e;i&&i.height&&i.width&&i.originalId&&o&&o.bandwidth?(void 0===r[i.originalId]&&(r[i.originalId]=[],n[i.originalId]=i),r[i.originalId].push(e)):t.push(e)}),U(r,(e,r)=>{const i=n[r];if(function(e){let{width:t,height:r}=e;const n=Math.max(t,r),i=Math.min(t,r);if(n<=0)return 0;let o=qE[0];for(let a=0;a<qE.length;a++){const e=qE[a],t=zE[e];if(n>=1.3*Math.floor(16*t/9)||i>=1.3*t)return o;o=e}return qE[qE.length-1]}({width:$(i.width),height:$(i.height)})<=360)t.push(...e);else{const r=No(e,e=>{var t;return(null==(t=e.audio)?void 0:t.bandwidth)||0});t.push(r)}}),t}function Fo(e){return void 0!==e&&null!==e.getManifest()}function Uo(e){if(Fo(e))try{var t;const r=e.getVariantTracks(),n=r.find($E),i=null==(t=e.getConfiguration().abr)?void 0:t.enabled,o=e.getMediaElement();if(!o||!i)return n;const{videoWidth:a=0,videoHeight:s=0}=o;return r.find(e=>e.width===a&&e.height===s&&e.originalAudioId===(null==n?void 0:n.originalAudioId))||n}catch(r){return}}function Bo(e,t){return e.getAll().find(e=>e.pathname===t)}function Ho(e){return/\/init-?.*\.mp4/.test(e)}function jo(e){const t=e.getNetworkingEngine();t&&(t.unregisterScheme("http"),t.unregisterScheme("https"))}function Yo(e){if(void 0===e)return;const t=e.getManifest();if(!t)return;const r=e.getMediaElement();if(!r)return;const{currentTime:n}=r,{periods:i=[]}=t;for(let o=0;o<i.length-1;o++)if(i[o].startTime<n&&n<i[o+1].startTime)return i[o];return i[i.length-1]}function Go(e){const t=Uo(e);if(!t)return;const r=Yo(e);return r?r.variants.find(e=>t.id===e.id):void 0}function Ko(e,t){const r=Go(e);if(!r||!r.video)return null;try{const e=r.video.findSegmentPosition(t);return ie(e)?r.video.getSegmentReference(e):null}catch(n){return null}}function Wo(e,t){let r=Z(0);if(!Fo(e))return r;if(void 0===t){const n=e.getMediaElement();if(!n)return r;t=Z(n.currentTime)}const n=Ko(e,t);if(n){const{startTime:e,endTime:t}=n;r=Pc(t,e)}return r}function qo(e,t){Um&&oy<81&&oy>77&&Z(e.duration)-t<ay&&(t=Pc(Z(e.duration),ay)),e.currentTime=t}function zo(e){if(!Fo(e))return;if(!e.isLive())return Uc.VOD;const t=function(e){const t=Go(e);if(t&&t.video)return t.video.presentationTimeOffset}(e);return void 0!==t?0===t?Uc.LIVE:Uc.EVENT:void 0}function Xo(e,t){if(void 0===e)return;if(zo(e)===Uc.LIVE)return Z(0);if(void 0===t)return;const r=t.documentElement.getAttribute("publishTime");if(!r)return;const n=Date.parse(r);return isNaN(n)?void 0:Z(n/1e3)}function Qo(e){return e?function(e){let t="",r=0;const n=e.length;let i=0,o=0,a=0;for(;r<n;)switch(i=e[r++],i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(i);break;case 12:case 13:o=e[r++],t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[r++],a=e[r++],t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}return t}(new Uint8Array(Array.from(e))):""}function Jo(e,t){if(void 0!==shaka&&e===shaka.net.NetworkingEngine.RequestType.MANIFEST&&t.data)return function(e){if(!e)return null;try{const t=(new DOMParser).parseFromString(e,"application/xml");return null===t.querySelector("parsererror")?t:null}catch(t){return null}}(Qo(new Uint8Array(t.data)))||void 0}async function Zo(e){let{shakaPlayer:t,streamUrl:r,startPosition:n}=e,i=!1;t.addEventListener("unloading",()=>i=!0);const o=ie(null==n?void 0:n.utc),a=o||null==n?void 0:n.videoTime,s=t.load(r,ie(a)?a:void 0);if(!o)return void await s;const l=null==n?void 0:n.utc,d=new sy(t);if(await s,i)throw new Error("loadShakaSource aborted");const c=d.getManifestXml()||await d.waitForManifestXml();if(i)throw new Error("loadShakaSource aborted");const u=Xo(t,c),h=void 0===u?null==n?void 0:n.videoTime:0===u?null==n?void 0:n.utc:Math.max(Pc(l,u),0);if(void 0===h)return;const f=t.getMediaElement();(function(e){if(!Fo(e))return!1;const t=e.getMediaElement();return!!t&&(Number(t.readyState)>0&&Number(t.duration)>0)})(t)||await new Promise((e,r)=>{T(f,"loadeddata",e,{once:!0}),t.addEventListener("unloading",r)}),qo(f,Z(h))}function $o(){return($o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}async function ea(e){const t=window;if(!function(e){const t=e;return!!((0,Ql.K)(t.yandex)&&(0,Ql.K)(t.yandex.mediaPlayer)&&(0,Wl.m)(t.yandex.mediaPlayer.sendDirective))&&!(!(0,Ql.K)(t.yandex.mediaPlayer.onPreloaderEvent)||!(0,Wl.m)(t.yandex.mediaPlayer.onPreloaderEvent.addListener))}(t))throw new Error("Can not use YandexPreloader");return new Promise((r,n)=>{try{t.yandex.mediaPlayer.sendDirective(e,()=>{const e=ta();e?n(new Error(e.message||"YandexPreloader sendDirective error")):r()})}catch(o){var i;n(new Error((null==(i=ta())?void 0:i.message)||"YandexPreloader sendDirective call exception"))}})}function ta(){var e,t,r;return null==(e=window)||null==(t=e.chrome)||null==(r=t.runtime)?void 0:r.lastError}function ra(e){const{error:t}=e;return new hy(t)}function na(e){const t=se(e).pathname;return 0===t.indexOf("/vod/")||0===t.indexOf("/live/")||0===t.indexOf("/kal/")}function ia(e){if(e.type===Hls.ErrorTypes.NETWORK_ERROR)return e.networkDetails?e.networkDetails.status:void 0}function oa(e){if(e.type===Hls.ErrorTypes.NETWORK_ERROR)return e.networkDetails?e.networkDetails.readyState:void 0}function aa(e){if(void 0===e)return;const{level:t,start:r,duration:n,url:i,relurl:o,sn:a,programDateTime:s,deltaPTS:l,dropped:d,endDTS:c,endPTS:u,startDTS:h,startPTS:f}=e;return{level:t,start:r,duration:n,url:i,relurl:o,sn:a,programDateTime:s,deltaPTS:l,dropped:d,endDTS:c,endPTS:u,startDTS:h,startPTS:f}}function sa(){return(sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function la(e){try{return JSON.parse(_e(sa({},e,{networkDetails:void 0,frag:aa(e.frag)})))}catch(t){return{message:r(()=>t.message)||"Cannot serialize hlsJsError"}}}function da(){return(da=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ca(e){let{details:t,networkDetails:r}=e;if(451===(r?r.status:NaN))switch(t){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:return Ad.REGIONAL_LIMITATION_MANIFEST;case Hls.ErrorDetails.LEVEL_LOAD_ERROR:return Ad.REGIONAL_LIMITATION_LEVEL;case Hls.ErrorDetails.FRAG_LOAD_ERROR:return Ad.REGIONAL_LIMITATION_SEGMENT;default:return}}function ua(e){let{details:t,networkDetails:r}=e;const n=r?r.status:NaN;if(my.includes(n))switch(t){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:return Ad.SIGNATURE_EXPIRED_MANIFEST;case Hls.ErrorDetails.LEVEL_LOAD_ERROR:return Ad.SIGNATURE_EXPIRED_LEVEL;case Hls.ErrorDetails.FRAG_LOAD_ERROR:return Ad.SIGNATURE_EXPIRED_SEGMENT;default:return}}function ha(e){return void 0!==ca(e)}function fa(e){return void 0!==ua(e)}function pa(e){const{details:t,fatal:r}=e;return t?!Ty.includes(t)&&(!(!ha(e)&&!fa(e))||Boolean(r)):Boolean(r)}function ga(e,t){return void 0===e.err||void 0===e.err.message?"MISSED_STACK__"+t:e.err.message}function va(e){if(void 0===e)return;const{details:t}=e;if(t===Hls.ErrorDetails.BUFFER_STALLED_ERROR)return;const r=pa(e)&&!ma(e),n=ca(e)||ua(e)||t||Ad.DEFAULT_ERROR,{err:{stack:i=new Error(ga(e,n)).stack}={stack:void 0}}=e;return new gu({code:n,isFatal:r,details:da({},la(e),{networkErrorStatus:ia(e),xhrReadyState:oa(e)}),stack:i})}function ma(e){return!ha(e)&&!fa(e)&&(!!e.details&&yy.includes(e.details))}function Ea(e){const{details:t}=e;return!!t&&Sy.includes(t)}function ya(e){const t=e.split("x");if(t.length<2)return;const r={rows:parseInt(t[0],10),columns:parseInt(t[1],10)};return isNaN(r.rows)||isNaN(r.columns)?void 0:r}function Aa(e,t){const{rows:r,columns:n}=e;if(!r||!n)return null;const{width:i,height:o}=t;return{width:$(i/n),height:$(o/r)}}function Sa(e,t){return 0===e.rows||0===e.columns?Z(0):Z(t/(e.rows*e.columns))}function Ta(e,t){if(0===Object.keys(e).length)return;const{uri:r,duration:n,resolution:i,tiles:o}=e;if([r,n,i,o].some(e=>!e))return void(t&&t("NonValidHLSThumbnailTileSessionData"));const a=ya(o),s=function(e){if(""===e)return;const[t,r]=e.split("x"),n={width:$(parseInt(t,10)),height:$(parseInt(r,10))};return isNaN(n.width)||isNaN(n.height)?void 0:n}(i),l=Z(parseFloat(n));if(void 0===a||void 0===s||isNaN(l))return void(t&&t("MapTileSessionDataParseError"));return{tiles:a,uriTemplate:r,spriteDuration:l,resolution:s,tileSize:Aa(a,s),tileDuration:Sa(a,l)}}function Ra(e,t,r){const n=t===Ry.LOWRES?_y:wy,{VALUE:i=""}=e[n.tiles]||{},{VALUE:o=""}=e[n.duration]||{},{VALUE:a=""}=e[n.resolution]||{},{VALUE:s=""}=e[n.uri]||{},l=[i,o,a,s];if(!l.every(e=>""===e)){if(!l.some(e=>""===e))return{tiles:i,duration:o,resolution:a,uri:s};r&&r("NonValidHLSSessionData")}}function _a(e){if(void 0!==e)return{name:e.name,value:String(e.id),lang:e.lang||""}}function wa(e){if(void 0!==e)return{name:e.name,value:String(e.id),lang:e.lang||""}}function ba(e){let{width:t,height:r,bitrate:n}=e;return t+"x"+r+"@"+n}function Pa(e){return e+"p"}function Ia(e){let{width:t,height:r}=e;const n=!ie(r)||r<=0;if(!ie(t)||t<=0||n)return n?"":Pa($(r));const i=Math.max(t,r),o=Math.min(t,r);let a=by[0];for(let s=0;s<by.length;s++){if(by[s]===o)return Pa(by[s]);if(i>=Py*Math.floor(16*by[s]/9)||o>=Py*by[s])return Pa(a);a=by[s]}return Pa(by[by.length-1])}function Oa(e,t){const{attrs:r={},width:n,height:i}=e;if(!ie(i))return"";const o=Ia(e);if(!ie(n))return o;const a=ba({width:n,height:i,bitrate:r["AVERAGE-BANDWIDTH"]?parseInt(r["AVERAGE-BANDWIDTH"],10):e.bitrate}),s=t.get(a);return void 0===s?o:s}function Ca(e,t){if(void 0===e)return;const{height:r,width:n,url:i,bitrate:o}=e;return Array.isArray(i)?{name:Oa(e,t),value:i[0],width:n,height:r,bitrate:o?Oc(o,1e3):Bv}:void 0}function ka(e,t){const r=function(e,t,r){const n={};return e.filter(e=>Boolean(r(e))).forEach(e=>{const i=t(e);(!n[i]||r(n[i])<r(e))&&(n[i]=e)}),Li(n)}(e,e=>{let{height:t}=e;return t},e=>{let{bitrate:t}=e;return t}),n=[];return r.forEach(e=>{const r=Ca(e,t);r&&n.push(r)}),n}function Da(e,t){let{name:r,lang:n}=t;const i=r?e.find(e=>e.name===r):void 0;return i||(n?e.find(e=>e.lang===n):void 0)}function Na(e,t){let{name:r,height:n}=t;const i=r?e.find(e=>e.name===r):void 0;if(i)return i;if(void 0===n)return;return Lo(e.filter(e=>{let{height:t}=e;return void 0!==t}),e=>{let{height:t}=e;return Math.abs(t-n)})}function La(e,r){const{paused:n}=e,i=r();return n||t(e.play()),i}function Ma(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function Va(e){return void 0!==e&&ie(e)&&e>=0}function xa(e){const{type:t}=e;return t===Uc.VOD||!1===e.live?Uc.VOD:t===Uc.EVENT?Uc.EVENT:Uc.LIVE}function Fa(e){const t=function(e){let t;void 0===e&&(e=window);try{t=e.devicePixelRatio}catch(r){}return t||1}();return{width:(e.width||e.clientWidth||e.offsetWidth)*t,height:(e.height||e.clientHeight||e.offsetHeight)*t}}function Ua(e){const t=e.match(Cy);if(t)return{width:$(parseInt(t[1],10)),height:$(parseInt(t[2],10)),bitrate:parseInt(t[3],10)}}function Ba(e,t){x(t).forEach(r=>{const n=t[r];null===n?e.removeAttribute(r):e.setAttribute(r,n)})}function Ha(e,t,r){void 0===t&&(t=Iv());let n=r;return function(r){if(!t(n,r))return n=r,e(r)}}function ja(e){let{skin:{hiddenControls:t}}=e;return!t.includes(Bc.TIMELINE)}function Ya(e,t){void 0===t&&(t={});let r=0;const n=[],i=(t,i)=>{n.push(T(e,t,i,Ly)),clearTimeout(r)},o=()=>G(n),a=new Promise((n,o)=>{const a=t=>{e.paused&&o(t)},s=e.play();if(a(Ny.VideoTagPaused),i("durationchange",()=>a(Ny.VideoTagPausedAfterDurationChange)),i("error",()=>a(Ny.VideoTagPausedAfterError)),i("pause",()=>o(Ny.PauseEvent)),i("playing",()=>{n(Ny.PlayingEvent)}),s)t.useProgressEvent&&i("progress",()=>{n(Ny.ProgressEvent)}),s.then(()=>n(Ny.PromiseResolve)).catch(e=>o(function(e){return e?Ny.PromiseReject+"["+e.code+"]["+e.name+"]["+e.message+"]":Ny.PromiseReject}(e)));else{const{timeoutForNonPromisePlay:e}=t;"number"===typeof e&&e>0&&(r=window.setTimeout(()=>{o(Ny.Timeout)},t.timeoutForNonPromisePlay))}});return a.then(o,o),a}function Ga(e){let{kind:t}=e;return"subtitles"===t}function Ka(e){const t=[];for(let r=0;r<e.length;r++)Ga(e[r])&&t.push(e[r]);return t}function Wa(e){return e?"showing":"hidden"}function qa(e,t){let{paused:r}=e;return r?gd.PAUSE:t?gd.BUFFERING:gd.PLAY}function za(){return(za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xa(e){if("function"===typeof e.getVideoPlaybackQuality){const{droppedVideoFrames:t,corruptedVideoFrames:r,totalVideoFrames:n}=e.getVideoPlaybackQuality();return{droppedVideoFrames:t,corruptedVideoFrames:r,totalVideoFrames:n}}const t=e;return"number"===typeof t.webkitDroppedFrameCount&&"number"===typeof t.webkitDecodedFrameCount?za({},Hy,{droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDecodedFrameCount}):Hy}function Qa(){return(Qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ja(){return(Ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Za(e,t){if(void 0===t)return e;return void 0!==function(e){const t=Jr(e,"t");return void 0===t?t:Z(Number(t))}(e)?$r(e,"t",t):Zr(e,"t",String(t))}function $a(e){if(rA(e.message))return Ad[e.message];if(rA(e.code))return Ad[e.code];const t=uy[e.code];return rA(t)?Ad[t]:Ad.DEFAULT_ERROR}function es(e){if(void 0===e)return;const{id:t,label:r,language:n}=e;return{name:r||n,value:t,lang:n||""}}function ts(e){const t=me(e.audioTracks).find(e=>e.enabled);return t?es(t):void 0}function rs(e){return"subtitles"===e.kind&&"StreamPlayerJs TextTrack"!==e.label}function ns(e,t){if(void 0===e)return;const{id:r,label:n,language:i}=e;return{name:n||i,value:"undefined"!==typeof r&&""!==r?r:"index:"+t,lang:i||""}}function is(e){const t=[];return me(e).forEach(e=>{const r=es(e);r&&t.push(r)}),t}function os(e){const t=[];return me(e).forEach((e,r)=>{if(!rs(e))return;const n=ns(e,r);n&&t.push(n)}),t}function as(e){if(void 0===e)return;const{id:t,label:r,language:n,bitrate:i=Bv,height:o=0,width:a=0}=e;return{name:r||n,value:t,bitrate:i,height:o,width:a}}function ss(e){const t=[];return me(e).forEach(e=>{const r=as(e);r&&t.push(r)}),t.filter(e=>{let{value:t}=e;return"auto"!==t})}function ls(e){let{videoTracks:t=[],videoHeight:r,videoWidth:n}=e;const i=me(t),o=i.find(e=>{let{selected:t}=e;return t});if(void 0!==o)return"auto"===o.id?(e=>{let{tracks:t,videoHeight:r,videoWidth:n}=e;return t.sort((e,t)=>{const{width:i=0,height:o=0}=e,{width:a=0,height:s=0}=t;return Math.abs(o-r)-Math.abs(s-r)||Math.abs(i-n)-Math.abs(a-n)})[0]})({tracks:i,videoHeight:r,videoWidth:n}):o}function ds(e,t){return t.code!==e.util.Error.Code.BAD_HTTP_STATUS?0:t.data[1]||0}function cs(){return(cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function us(e){return{error:String(e.error)||"",isFatal:Boolean(e.isFatal)}}function hs(e){if("string"===typeof e)try{return us(JSON.parse(e))}catch(t){return cs({},sA,{error:e})}return"object"===typeof e?us(e):sA}function fs(e){return new gu({isFatal:e.isFatal,code:e.error===dA.EXPIRED_SIGNATURE?Ad.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:Ad.DRM_PROXY_ERROR,details:{drmProxyError:e.error}})}function ps(e,t){if(!t)return;const r=t,{code:n,severity:i,category:o,data:a}=r;let s="shaka."+function(e,t){let r;for(r in e.util.Error.Code)if(e.util.Error.Code.hasOwnProperty(r)&&t.code===e.util.Error.Code[r])return r;return"ERROR"}(e,r)+"_"+n,l=a,d=i===e.util.Error.Severity.CRITICAL;switch(o){case e.util.Error.Category.NETWORK:l.networkErrorStatus=ds(e,r);const t=function(e,t){if(t.code!==e.util.Error.Code.BAD_HTTP_STATUS)return;if(451!==ds(e,t))return;switch(t.data[t.data.length-1]){case e.net.NetworkingEngine.RequestType.MANIFEST:return Ad.REGIONAL_LIMITATION_MANIFEST;case e.net.NetworkingEngine.RequestType.SEGMENT:return Ad.REGIONAL_LIMITATION_SEGMENT;default:return}}(e,r)||function(e,t){if(t.code!==e.util.Error.Code.BAD_HTTP_STATUS)return;const r=ds(e,t);if(!my.includes(r))return;switch(t.data[t.data.length-1]){case e.net.NetworkingEngine.RequestType.MANIFEST:return Ad.SIGNATURE_EXPIRED_MANIFEST;case e.net.NetworkingEngine.RequestType.SEGMENT:return Ad.SIGNATURE_EXPIRED_SEGMENT;default:return}}(e,r);void 0===t?s+=function(e,t){switch(t.code){case e.util.Error.Code.BAD_HTTP_STATUS:case e.util.Error.Code.HTTP_ERROR:case e.util.Error.Code.TIMEOUT:const r=function(e,t){const{RequestType:r}=e.net.NetworkingEngine;switch(t){case r.APP:return"APP";case r.LICENSE:return"LICENSE";case r.MANIFEST:return"MANIFEST";case r.SEGMENT:return"SEGMENT";case r.TIMING:return"TIMING";default:return}}(e,t.data[t.data.length-1]);return void 0===r?"_UNKNOWN":"_"+r;default:return""}}(e,r):(d=!0,s=t);break;case e.util.Error.Category.DRM:const i=a[0];if(!i||!aA(i))break;const o=fs(lA(i));s=o.code,l=o.details,d=d||o.isFatal;break;case e.util.Error.Category.PLAYER:if(n===e.util.Error.Code.LOAD_INTERRUPTED)return;break;case e.util.Error.Category.CAST:case e.util.Error.Category.STORAGE:}return new gu({code:s,isFatal:d,details:l,message:t.message,stack:t.stack})}function gs(e){return!!(0,Ql.K)(e)&&(!!ie(e.severity)&&(!!ie(e.category)&&(!!ie(e.code)&&!!vc(e.data))))}function vs(e,t){return function(e,t){const r=t===Ry.HIGHRES?hA:fA,n=e.querySelector(r.version);if(!n||"2"!==n.getAttribute("value"))return;const i=e.querySelector(r.tiles),o=e.querySelector(r.uriTemplate),a=e.querySelector(r.spriteDuration),s=e.querySelector(r.resolution);if(!i||!o||!a||!s)return;const l=i.getAttribute("value"),d=o.getAttribute("value"),c=Z(parseFloat(a.getAttribute("value")||"")),u=s.getAttribute("value");if(!l||!u||!d||isNaN(c))return;const h=function(e){const t=e.split("x");if(t.length<2)return;const r={width:$(parseInt(t[0],10)),height:$(parseInt(t[1],10))};return isNaN(r.width)||isNaN(r.height)?void 0:r}(u);if(!h)return;const f=ya(l);if(!f)return;const p=Aa(f,h),g=Sa(f,c);return{tiles:f,uriTemplate:d,spriteDuration:c,resolution:h,tileSize:p,tileDuration:g}}(e,t)||function(e,t){const r=me(e.querySelectorAll('AdaptationSet[mimeType="image/jpeg"]'));let n=r[0];if(!n)return;if(t===Ry.LOWRES){let e;if(r.forEach(t=>{t.querySelector('SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:type"][value="'+Ry.LOWRES+'"]')&&(e=t)}),!e)return;n=e}const i=n.querySelector("SegmentTemplate"),o=n.querySelector("Representation"),a=n.querySelector("EssentialProperty");if(!i||!o||!a)return;const s=a.getAttribute("value"),l=i.getAttribute("media"),d=Z(parseFloat(i.getAttribute("duration")||"")),c=parseFloat(o.getAttribute("width")||""),u=parseFloat(o.getAttribute("height")||""),h={width:$(c),height:$(u)};if(!s||!l||!d||!c||!u)return;const f=ya(s);if(!f)return;const p=Aa(f,h),g=Sa(f,d);return{tiles:f,uriTemplate:l,spriteDuration:d,resolution:h,tileSize:p,tileDuration:g}}(e,t)}function ms(e,t){const r=Math.pow(10,t);return Math.round((e+mA)*r)/r}function Es(e,t){const r=function(e,t){let{stream:r}=e,{audio:n=Z(0),video:i=Z(0)}=t;if(!r||!EA())return;const{type:o}=r;switch(o){case"audio":return ms(n,3);case"video":return ms(i,3);default:return}}(e,t);void 0!==r&&(e.uris=e.uris.map(e=>function(e,t){const{hostname:r}=se(e);return r.match(yA)?he(e,{bufsize:String(t)}):e}(e,r)))}function ys(e){return(e.getAttribute("id")||"")+"@"+(e.getAttribute("width")||"")+"x"+(e.getAttribute("height")||"")+";"}function As(e){return me(e.querySelectorAll("Representation")).map(ys).sort()}function Ss(e,t,r){void 0===e&&(e=[]);const n=e.find(e=>{var n,i;const o=(null==(n=e.video)?void 0:n.originalId)===t,a=(null==(i=e.audio)?void 0:i.originalId)===r;return o&&a});if(void 0!==n)return n.id;const i=function(e,t,r){void 0===t&&(t=e=>Boolean(e));void 0===r&&(r=e.length-1);for(let n=r;n>=0;n--)if(t(e[n],n,e))return n;return-1}(e,e=>{var r;return(null==(r=e.video)?void 0:r.originalId)===t});return-1===i?void 0:e[i].id}function Ts(e,t){if(!t||!e)return;const r='AdaptationSet > Representation[id="'+t+'"]',n=e.querySelector(r);if(!n)return;const i=n.parentElement;if(!i)return;const o=i.getAttribute("lang");return o?o.toLowerCase():void 0}function Rs(e){const t=function(){if(void 0!==Jm)return Jm.supportedDrmSystems}();return void 0!==e&&(0,Ql.K)(e.servers)&&void 0!==t&&t.filter(t=>V(e.servers,t)).map(e=>{for(const t in Km)if(V(Km,t)&&Km[t].includes(e))return t;return!1}).filter(Boolean).join("|")||"none"}function _s(e,t){const{width:r,height:n,bandwidth:i}=e;if(!ie(n))return"";const o=Ia(e);if(!ie(r)||!ie(i))return o;const a=ba({width:r,height:n,bitrate:i}),s=t.get(a);return void 0===s?o:s}function ws(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:r}=t;return r||void 0}function bs(e){return e&&ws(e)||window}function Ps(){return(Ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Is(){return(Is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Os(){return(Os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Cs(e){let t,r=d,n=0;const i=e=>{n=e.status,t=e.response};return{promise:new Promise((t,n)=>{_t(Os({},e,{onSuccess:e=>{i(e),t(e)},onError:(e,t)=>{i(t),n(e)},onAbort:n,onSetup:e=>{let{abort:t}=e;return r=t}}))}),abort:e=>r(e),getStatus:()=>n,getResponse:()=>t}}function ks(){return(ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ds(e){return String.fromCharCode(...Array.from(e))}function Ns(e){return e.charCodeAt(0)}function Ls(e){return Array.from(e,Ns)}function Ms(e){return void 0===e?[]:(e.testIds||"").split(",").map(e=>parseInt(e,10)).filter(ie)}function Vs(){return(Vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xs(e){return!!(0,Wl.m)(Tu.isYandexPlayerFeatureEnabled)&&Tu.isYandexPlayerFeatureEnabled(Vs({},e,{browserVersion:LA,browserType:NA,playerVersion:"1.0-9279"}))}function Fs(e){let{id:t,method:r,params:n}=e;return{jsonrpc:"2.0",id:t,method:r,params:n}}function Us(e){if(!("params"in e))return[];if(Array.isArray(e.params))return e.params;if((0,Ql.K)(e.params))return e.params;throw new Error("Expect #params to be an array or an object if present in "+JSON.stringify(e))}function Bs(e){return Hs(e)}function Hs(e){if(ie(e.id)){if(Math.floor(e.id)!==e.id)throw new Error("Expect #id to be an integer if it's a number in "+JSON.stringify(e));return e.id}if(s(e.id)||null===e.id)return e.id;throw new Error("Expect #id to be an integer, string or null (not recommended) in "+JSON.stringify(e))}function js(e){if(!("id"in e))throw new Error("Expect #id to present in rpc response "+JSON.stringify(e));return Hs(e)}function Ys(e){if("object"!==typeof e.error||null===e.error)throw new Error("Expect #error to be an object in "+JSON.stringify(e));const t=e.error;if(!ie(t.code))throw new Error("Expect #error#code to be an number in "+JSON.stringify(e));if(!s(t.message))throw new Error("Expect #error#message to be an string in "+JSON.stringify(e));return"data"in t?{code:t.code,message:t.message,data:t.data}:{code:t.code,message:t.message}}function Gs(e){const t=function(e){if(!(0,Ql.K)(e))throw new Error("Can't parse \""+e+'" as object');return e}(e);if(!function(e){return"2.0"===e.jsonrpc}(t))throw new Error("Expect "+(r(()=>JSON.stringify(e))||e)+" to be a json-rpc v2 message");if(s(t.method))return function(e){return"id"in e?{jsonrpc:e.jsonrpc,method:e.method,params:Us(e),id:Bs(e)}:{jsonrpc:e.jsonrpc,method:e.method,params:Us(e)}}(t);if("result"in t)return function(e){return{jsonrpc:e.jsonrpc,result:e.result,id:js(e)}}(t);if("error"in t)return function(e){return{jsonrpc:e.jsonrpc,error:Ys(e),id:js(e)}}(t);throw new Error("Expect "+(r(()=>JSON.stringify(e))||e)+" to be a json-rpc v2 message")}function Ks(e){if(e in YA)return YA[e];const t=document.createElement("link");return t.rel="preload",t.as="script",YA[e]=new Promise((r,n)=>{t.onload=r,t.onerror=n,t.href=e,t.crossOrigin="anonymous",jA.appendChild(t)}).then(()=>{YA[e]=Promise.resolve()}).catch(()=>{delete YA[e],jA.removeChild(t)}),YA[e]}function Ws(){return(Ws=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qs(e){return"videoplayer-iframe-api-raa-cache-"+e.autoplay+"-"+e.allowMuted+"-"+e.muted}function zs(e){return r(()=>{const t=JSON.parse(Rm.getItem(qs(e))),{time:r,cacheVersion:n}=t,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,qA);return 2!==n?null:Date.now()-r<zA?i:null})||null}function Xs(e){const t=e.navigator;if(!t)return;const{userActivation:r}=t;if(!(0,Ql.K)(r))return;const{isActive:n,hasBeenActive:i}=r;return{isActive:n,hasBeenActive:i}}function Qs(e){const t=()=>QA.forEach(e=>window.removeEventListener(e,r)),r=r=>{"pagehide"===r.type&&r.persisted||(e(r),t())};return QA.forEach(e=>window.addEventListener(e,r)),t}function Js(e){return"ya-video-player-"+e}function Zs(e,t){const r=t.getElementById(Js(e));let n=r&&r.parentElement;return n=n&&n.parentElement,n||void 0}function $s(e,t){if(void 0===t&&(t=window),!t||!t[e]||!t[e].prototype)return;const{play:r}=t[e].prototype;return r&&n(r)?r:void 0}function el(e){let{canPlayUnMuted:t,canPlayMuted:r,detectionMethod:n}=e;return{canPlayUnMuted:t,canPlayMuted:r,requireMute:!t&&r,requireUserGesture:!t&&!r,detectionMethod:n}}function tl(){return(tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function rl(e){let{canPlayUnMuted:t,canPlayMuted:r,detectionMethod:n}=e;return{canPlayUnMuted:t,canPlayMuted:r,requireMute:!t&&r,requireUserGesture:!t&&!r,detectionMethod:n}}function nl(e){if("boolean"===typeof e.allowedToPlay)return Promise.resolve(function(e){const t=tS(e);return e.muted=!1,e.volume=1,e.allowedToPlay?(t(),el({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:rS.YaBroAllowedToPlay})):(e.muted=!0,e.volume=0,e.allowedToPlay?(t(),el({canPlayUnMuted:!1,canPlayMuted:!0,detectionMethod:rS.YaBroAllowedToPlay})):(t(),el({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:rS.YaBroAllowedToPlay})))}(e));return $c&&_A<=9?Promise.resolve(tl({},oS,{detectionMethod:ZA.IOS9OrLess})):Hl?iS?Promise.resolve(tl({},aS,{detectionMethod:ZA.OldIE})):void 0:Promise.resolve(tl({},oS,{detectionMethod:ZA.HTML5VideoIsNotSupported}))}function il(e){let t,r,{videoSlot:n,autoplay:i,muted:o,allowMuted:a}=e;if(!i){const e={autoplay:!1,muted:o,detectionMethod:lS.AutoplayDisabled};return{promise:Promise.resolve(e),abort:d}}return{promise:new Promise(async e=>{t=e;const{promise:i,stop:s}=function(e,t){let{checkSoundEnabled:r=!0}=void 0===t?{}:t;const n=nl(e),i=new sS(e,{checkSoundEnabled:r,promise:n});return{promise:i.promise,stop:i.stop}}(n,{checkSoundEnabled:!o});r=s;const{requireMute:l,requireUserGesture:d,detectionMethod:c}=await i.catch(()=>aS);e(function(e){let{requireUserGesture:t,requireMute:r,muted:n,allowMuted:i,detectionMethod:o}=e;return t?{autoplay:!1,muted:n,autoplayImpossible:!0,detectionMethod:o}:r?n||i?{autoplay:!0,muted:!0,detectionMethod:o}:{autoplay:!1,muted:n,autoplayImpossible:!0,requireAllowMutedToAutoplay:!0,detectionMethod:o}:{autoplay:!0,muted:n,detectionMethod:o}}({requireUserGesture:d,requireMute:l,muted:o,allowMuted:a,detectionMethod:c}))}),abort:()=>{r(),t({autoplay:!0,muted:o,detectionMethod:lS.RASAborted})}}}function ol(e,t){return void 0===e?void 0===t:"auto"in e&&!0===e.auto?"auto"===t:e.value===t}function al(){return(al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function sl(){return(sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ll(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("")}function dl(){this.returnValue=!1}function cl(){this.cancelBubble=!0}function ul(e){return function(t){const r=function(e){return e.stopPropagation||(e.stopPropagation=cl),e.preventDefault||(e.preventDefault=dl),e.target||(e.target=e.srcElement),e}(t);e.call(this,r)}}function hl(e){e&&e.un()}function fl(e,t,r){return Math.max(Math.min(t,r)-Math.max(e,0),0)}function pl(e){const t=hc(e),r=t.width,n=t.height;let i=0;if(r>0&&n>0){const e=function(){const e=window;let t=e.innerWidth,r=e.innerHeight;if(!t){const n=e.document.documentElement;t=n.clientWidth,r=n.clientHeight}return{width:t,height:r}}();i=fl(t.left,t.right,e.width)*fl(t.top,t.bottom,e.height)/(r*n)}return i}function gl(e){void 0===e&&(e=window);const t=m(e).match(/YaBrowser\/([\d]+)\.([\d]+)/);if(!t)return{major:-1,minor:-1};const[,r,n]=t;return{major:parseInt(r,10),minor:parseInt(n,10)}}function vl(){return _m(window)&&!$c&&!eu}function ml(e,t){return kc.some(r=>{if(!e[r.element])return!1;let n=t;for(;n;){if(e[r.element]===n)return!0;n=n.parentElement}return!1})}function El(){return(El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yl(e){setTimeout(()=>{throw e},0)}function Al(){return(Al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sl(e){let{url:t,adConfig:r,additionalParams:n}=e;t=((e,t)=>{if(!e||!t)return e;const r={"partner-id":"number"===typeof t.partnerId?String(t.partnerId):t.partnerId,"video-category-id":"number"===typeof t.category?String(t.category):t.category,"imp-id":String(t.impId),gzip:"1"};return he(e,r,{override:!0,saveOriginalPath:!0})})(t,r);const{from:i,vsid:o}=n,a=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(n,FS);return t=he(t,{from:i,vsid:o},{override:!0,saveOriginalPath:!0}),he(t,a,{override:!1,saveOriginalPath:!0})}function Tl(){return(Tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Rl(e,t){if(!e.servers)return e;const r={};return function(e){return"function"===typeof Object.entries?Object.entries(e):x(e).map(t=>[t,e[t]])}(e.servers).forEach(e=>{let[n,i]=e;!function(e){const{hostname:t}=se(e);return-1!==US.indexOf(t)}(i)?r[n]=i:r[n]=ue(i,"vsid",t)}),Tl({},e,{servers:r})}function _l(){return(_l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wl(e){return e.replace(/<tld>/g,KS)}function bl(){return(bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Pl(){return(Pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Il(e){void 0===e&&(e={});const t={};for(const r in e){const n=e[r],i=typeof n;"string"!==i&&"number"!==i&&"boolean"!==i||(t[r]=n)}return t}function Ol(){const{plugins:e}=window.navigator;return void 0===e||0===e.length?[]:(0,fS.U)(e,Il)}function Cl(){const e=window.navigator||{},t=window.performance||{},{location:r,referrer:n}=Tt(document);return{navigator:Pl({},Il(e),{connection:Il(e.connection),plugins:Ol()}),performance:{memory:Il(t.memory)},playerLocation:location.href,iframeApiLocation:r,iframeApiReferrer:n}}function kl(e){return[...e.hash.substr(1).split("&"),...e.search.substr(1).split("&")].reduce((e,t)=>{const[r,n]=t.split("=");return void 0!==n&&(e[r]=decodeURIComponent(n.replace(/\+/g," "))),e},{})}function Dl(e){return(0,Wl.m)(e.toJSON)?e.toJSON():e}function Nl(){return(Nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ll(e,t,r){if(void 0===r&&(r=window),!r.history)return;if($A>-1&&$A<=15)return;const n=((e,t,r)=>{const n=Nl({},kl(e));n.mq_url=void 0,n.lq_url=void 0,n.hq_url=void 0,n.hd_url=void 0,n.stream_url=r?function(e,t){return-1===e.indexOf("?")?e:t.reduce(en,e)}(r,["vsid","partner-id","video-category-id","imp-id","gzip"]):"",n.additional_params="object"===typeof t.additionalParams?JSON.stringify(t.additionalParams):void 0;const{adConfig:i={}}=t;return n.partner_id=qS(i.partnerId),n.category=qS(i.category),n.imp_id=qS(i.impId),n.distr_id=qS(i.distrId),n.video_content_id=qS(i.videoContentId),n.video_content_name=qS(i.videoContentName),n.video_publisher_id=qS(i.videoPublisherId),n.video_publisher_name=qS(i.videoPublisherName),n.video_genre_id=qS(i.videoGenreId),n.video_genre_name=qS(i.videoGenreName),n.start_position=qS(t.startPosition),n.loop=qS(t.loop),n.with_credentials=qS(t.withCredentials),n.preview=qS(t.preview),n.host=e.hostname,n})(r.location,e,t),i=function(e,t,r){void 0===r&&(r={});for(const n in t)t.hasOwnProperty(n)&&(e=Qr(e,n,t[n]));for(const n in r)r.hasOwnProperty(n)&&(e=Zr(e,n,r[n]));return e}(r.location.href.split("?")[0].split("#")[0],n);try{r.history.replaceState(void 0,"",i)}catch(o){}}function Ml(){return(Ml=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vl(){return(Vl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xl(){return(xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Fl(){return iT?iT.getSourceId():NaN}var Ul={};e.r(Ul),e.d(Ul,{actionTransformer:()=>Fe,logger:()=>xu});e(7369);const Bl=document.createElement("video"),Hl="function"===typeof Bl.load;var jl;(function(){function e(){const e=r.apply(this);return t(e),e}if(!Hl)return;const r=HTMLMediaElement.prototype.play;e.__yaMuffleVideoPlayPromiseOriginalPlay=r,HTMLMediaElement.prototype.play=e})(),"toJSON"in Error.prototype||Object.defineProperty(Error.prototype,"toJSON",{value(){const e={};return r(()=>{Object.getOwnPropertyNames(this).forEach((function(t){e[t]=this[t]}),this)}),e},configurable:!0,writable:!0}),function(e){e.LOAD_SCRIPT_ERROR="LOAD_SCRIPT_ERROR",e.STATS_SENSOR_NAME_ERROR="STATS_SENSOR_NAME_ERROR",e.STATS_LABEL_KEY_ERROR="STATS_LABEL_KEY_ERROR",e.STATS_LABEL_VALUE_ERROR="STATS_LABEL_VALUE_ERROR"}(jl||(jl={}));const Yl=(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++){const o=e[i];t.call(r,o,i,e)&&n.push(o)}return n},Gl=[].find,Kl=n(Gl)?(e,t)=>Gl.call(e,t):(e,t)=>{for(let r=0;r<e.length;r++){const n=e[r];if(t(n,r,e))return n}};var Wl=e(6351);let ql;const zl=function(e){void 0===e&&(e=document.body);const t=function(e){const t=i(e);return t.width="0",t.height="0",t.style.position="absolute",t}(e);return{JSON:t.contentWindow.JSON,clean:()=>function(e){e.src="",o(e)}(t)}},Xl=e=>t=>{const{JSON:r,clean:n}=zl();try{return r[e](t)}finally{n()}};var Ql=e(3770);const Jl="DEFAULT_ERROR_MESSAGE",Zl=0,$l="",ed="?:?:?",td=!0,rd=e(5983);class nd extends Error{constructor(e,t){void 0===t&&(t={});const r="object"===typeof e?e:{message:String(e||Jl)};super(),rd(this,nd.prototype),this.message=t.message||r.message||Jl,this.code=t.code||r.code||r.id||Zl,this.isFatal=Boolean(function(e){const[t]=Yl(e,e=>void 0!==e);return t}([t.isFatal,r.isFatal,td])),this.details=t.details||r.details||$l;const n=t.stack||r.stack||function(e){const{url:t,line:r,col:n,fileName:i,columnNumber:o,lineNumber:a}=e;return(t||i||"?")+":"+(r||a||"?")+":"+(n||o||"?")}(r);let i=n===ed?this.stack:n;if(i&&i!==ed)this.stack=i;else if(!this.stack)try{throw new Error(this.message)}catch(o){this.stack=i=o.stack||ed}this.toString=()=>l(this.toJSON()),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,stack:i})}}const id=!n(Math.random)||Math.random()===Math.random(),od=Date&&(0,Wl.m)(Date.now)?()=>Date.now():()=>(new Date).getTime(),ad="undefined"===typeof window?void 0:window.performance,sd=ad&&(0,Wl.m)(ad.now),ld=ad&&ad.timing&&ad.timing.navigationStart?ad.timing.navigationStart:od();let dd=0;const cd=sd?()=>ad.now():()=>(()=>{const e=od()-ld;return dd=Math.max(e,dd),dd})();let ud=Date.now()*cd()%2147483647;const hd=id?function(){return ud=16807*ud%2147483647,(ud-1)/2147483646}:function(){return Math.random()},fd="utf-8",pd=e=>!0;var gd;e(5235),e(7873),e(9418),function(e){void 0===e&&(e=v(window));try{if("1"===localStorage.getItem("rumdebug"))return console&&(0,Wl.m)(console.warn)&&console.warn("using rumdebug=1 from localStorage"),!0}catch(t){}return/[?&#]rumdebug=1(?:[&#]|$)/.test(e)}()&&g({win:window,src:"https://yastatic.net/s3/home/rum/debug/blockstat.js"}),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(gd||(gd={}));var vd=e(5357);const md=function(e){void 0===e&&(e=window);const t=m(e).toLowerCase();return/windows/.test(t)}(),Ed=function(e){void 0===e&&(e=window);const t=m(e).toLowerCase(),r=/windows nt (\d+\.\d+)/.exec(t);if(r){const e=Number(r[1]);return e>0?e:-1}return-1}();let yd,Ad,Sd;!function(e){e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_MEDIA="NETWORK_MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS",e.INVALID_STREAM_URL="INVALID_STREAM_URL"}(yd||(yd={})),function(e){e.DEFAULT_ERROR="DEFAULT_ERROR",e.YANDEX_RPC_ERROR="YANDEX_RPC_ERROR",e.BROADCAST_AD_BLOCK_INIT_ERROR="BROADCAST_AD_BLOCK_INIT_ERROR",e.AD_TYPE_IS_NOT_RECOGNIZED="AD_TYPE_IS_NOT_RECOGNIZED",e.INVALID_METADATA="INVALID_METADATA",e.INVALID_STREAM_URL="INVALID_STREAM_URL",e.UNSUPPORTED_MEDIA_TYPE="UNSUPPORTED_MEDIA_TYPE",e.SCRIPT_INIT_ERROR="SCRIPT_INIT_ERROR",e.MPD_WIDEVINE_CERT_LOAD_ERROR="MPD_WIDEVINE_CERT_LOAD_ERROR",e.MPD_SHAKA_INIT_ERROR="MPD_SHAKA_INIT_ERROR",e.NATIVE_HLS_NOT_SUPPORTED_ERROR="NATIVE_HLS_NOT_SUPPORTED_ERROR",e.HLS_JS_NOT_SUPPORTED_ERROR="HLS_JS_NOT_SUPPORTED_ERROR",e.REFRESH_SUBTITLES_ERROR="REFRESH_SUBTITLES_ERROR",e.ON_TICK_ERROR="ON_TICK_ERROR",e.FAIRPLAY_NOT_SUPPORTED="FAIRPLAY_NOT_SUPPORTED",e.FAIRPLAY_CERT_LOAD_ERROR="FAIRPLAY_CERT_LOAD_ERROR",e.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR="FAIRPLAY_CREATE_MEDIA_KEYS_ERROR",e.FAIRPLAY_CREATE_KEY_SESSION_ERROR="FAIRPLAY_CREATE_KEY_SESSION_ERROR",e.FAIRPLAY_SPC_LOAD_ERROR="FAIRPLAY_SPC_LOAD_ERROR",e.FAIRPLAY_CREATE_KEY_ERROR="FAIRPLAY_CREATE_KEY_ERROR",e.FAIRPLAY_INVALID_CONTENT_ID="FAIRPLAY_INVALID_CONTENT_ID",e.DRM_PROXY_ERROR="DRM_PROXY_ERROR",e.DRM_PROXY_ERROR_SIGNATURE_EXPIRED="DRM_PROXY_ERROR_SIGNATURE_EXPIRED",e.NO_HLS_JS_INSTANCE="NO_HLS_JS_INSTANCE",e.AD_IS_ALREADY_PLAYING="AD_IS_ALREADY_PLAYING",e.META_INFO_REQUEST_FAILED="META_INFO_REQUEST_FAILED",e.MULTIROLL_INIT_ERROR="MULTIROLL_INIT_ERROR",e.REACT_COMPONENT_DID_CATCH_ERROR_INFO="REACT_COMPONENT_DID_CATCH_ERROR_INFO",e.PLAY_AD_VIEWERS_ERROR="PLAY_AD_VIEWERS_ERROR",e.SAGA_ERROR="SAGA_ERROR",e.STRM_ABD_INVALID_RESPONSE="STRM_ABD_INVALID_RESPONSE",e.REPRESENTATION_CHANGE="REPRESENTATION_CHANGE",e.RECOVER_TASK_ERROR="RECOVER_TASK_ERROR",e.PRELOAD_SOURCE_FAILED="PRELOAD_SOURCE_FAILED",e.REGIONAL_LIMITATION_MANIFEST="REGIONAL_LIMITATION_MANIFEST",e.REGIONAL_LIMITATION_LEVEL="REGIONAL_LIMITATION_LEVEL",e.REGIONAL_LIMITATION_SEGMENT="REGIONAL_LIMITATION_SEGMENT",e.SIGNATURE_EXPIRED_MANIFEST="SIGNATURE_EXPIRED_MANIFEST",e.SIGNATURE_EXPIRED_LEVEL="SIGNATURE_EXPIRED_LEVEL",e.SIGNATURE_EXPIRED_SEGMENT="SIGNATURE_EXPIRED_SEGMENT",e.NO_STREAMS="NO_STREAMS",e.NO_CODECS="NO_CODECS",e.NO_MSE="NO_MSE",e.NO_DRM="NO_DRM",e.NO_PLAYABLE_STREAMS="NO_PLAYABLE_STREAMS",e.SHAKA_FILTER_ERROR="SHAKA_FILTER_ERROR",e.SHAKA_CONFIGURE_ERROR="SHAKA_CONFIGURE_ERROR",e.SHAKA_LOAD_SOURCE_ERROR="SHAKA_LOAD_SOURCE_ERROR",e.MEDIA_ERR_CUSTOM="MEDIA_ERR_CUSTOM",e.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",e.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",e.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",e.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",e.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED"}(Ad||(Ad={})),function(e){e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.BUFFER_STALLED_ERROR="bufferStalledError",e.SHAKA_VIDEO_ERROR_3016="shaka.VIDEO_ERROR_3016",e.FRAG_PARSING_ERROR="fragParsingError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.PIPELINE_ERROR_DECODE="PIPELINE_ERROR_DECODE",e.DECODER_ERROR_NOT_SUPPORTED="DECODER_ERROR_NOT_SUPPORTED",e.SHAKA_CONTENT_UNSUPPORTED_BY_BROWSER_4032="shaka.CONTENT_UNSUPPORTED_BY_BROWSER_4032",e.BUFFER_APPEND_ERROR="bufferAppendError",e.SHAKA_MEDIA_SOURCE_OPERATION_THREW_3015="shaka.MEDIA_SOURCE_OPERATION_THREW_3015",e.MEDIA_ELEMENT_ERROR_FORMAT_ERROR="MEDIA_ELEMENT_ERROR: Format error",e.REMUX_ALLOC_ERROR="remuxAllocError",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.DEMUXER_ERROR_COULD_NOT_OPEN="DEMUXER_ERROR_COULD_NOT_OPEN",e.NS_ERROR_DOM_INVALID_STATE_ERR="NS_ERROR_DOM_INVALID_STATE_ERR",e.SHAKA_DASH_INVALID_XML_4001="shaka.DASH_INVALID_XML_4001",e.SHAKA_QUOTA_EXCEEDED_ERROR_3017="shaka.QUOTA_EXCEEDED_ERROR_3017",e.CHUNK_DEMUXER_ERROR_APPEND_FAILED="CHUNK_DEMUXER_ERROR_APPEND_FAILED",e.FAILED_TO_INIT_DECODER="Failed to init decoder",e.PIPELINE_ERROR_INITIALIZATION_FAILED="PIPELINE_ERROR_INITIALIZATION_FAILED",e.NS_ERROR_FAILURE="NS_ERROR_FAILURE",e.SHAKA_MEDIA_SOURCE_OPERATION_FAILED_3014="shaka.MEDIA_SOURCE_OPERATION_FAILED_3014",e.REQUEST_FAILED="2147500036: Request failed",e.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED="PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED",e.PIPELINE_ERROR_COULD_NOT_RENDER="PIPELINE_ERROR_COULD_NOT_RENDER",e.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE="MEDIA_ELEMENT_ERROR: Empty src attribute",e.NS_ERROR_DOM_MEDIA_METADATA_ERR="NS_ERROR_DOM_MEDIA_METADATA_ERR",e.NS_ERROR_DOM_MEDIA_FATAL_ERR="NS_ERROR_DOM_MEDIA_FATAL_ERR",e.SHAKA_RESTRICTIONS_CANNOT_BE_MET_4012="shaka.RESTRICTIONS_CANNOT_BE_MET_4012",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.FRAG_LOAD_ERROR="fragLoadError",e.SHAKA_BAD_HTTP_STATUS_1001_MANIFEST="shaka.BAD_HTTP_STATUS_1001_MANIFEST",e.SHAKA_HTTP_ERROR_1002_SEGMENT="shaka.HTTP_ERROR_1002_SEGMENT",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.LEVEL_LOAD_ERROR="levelLoadError",e.SHAKA_HTTP_ERROR_1002_MANIFEST="shaka.HTTP_ERROR_1002_MANIFEST",e.SHAKA_BAD_HTTP_STATUS_1001_SEGMENT="shaka.BAD_HTTP_STATUS_1001_SEGMENT",e.SHAKA_UNSUPPORTED_SCHEME_1000="shaka.UNSUPPORTED_SCHEME_1000",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.SHAKA_TIMEOUT_1003_SEGMENT="shaka.TIMEOUT_1003_SEGMENT",e.FRAG_LOAD_TIME_OUT="fragLoadTimeOut",e.MANIFEST_LOAD_TIME_OUT="manifestLoadTimeOut",e.LEVEL_LOAD_TIME_OUT="levelLoadTimeOut",e.SHAKA_TIMEOUT_1003_MANIFEST="shaka.TIMEOUT_1003_MANIFEST",e.SHAKA_TIMEOUT_1003_LICENSE="shaka.TIMEOUT_1003_LICENSE",e.AUDIO_TRACK_LOAD_TIME_OUT="audioTrackLoadTimeOut",e.INTERNAL_EXCEPTION="internalException",e.SHAKA_OPERATION_ABORTED_7001="shaka.OPERATION_ABORTED_7001",e.ON_PLAYER_INIT_ERROR_INTERNAL="ON_PLAYER_INIT_ERROR_INTERNAL",e.UNABLE_TO_LOAD_PLAYER_IFRAME="UNABLE_TO_LOAD_PLAYER_IFRAME",e.ON_PLAYER_INIT_ERROR="ON_PLAYER_INIT_ERROR",e.LOADER_INIT_ERROR="LoaderInitError",e.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT="UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT",e.FAILED_TO_DOWNLOAD_DEBUG_INFO="FAILED_TO_DOWNLOAD_DEBUG_INFO",e.SHAKA_REQUEST_FILTER_ERROR_1006="shaka.REQUEST_FILTER_ERROR_1006",e.PLAYER_CONTAINER_NOT_FOUND="PLAYER_CONTAINER_NOT_FOUND",e.KEY_LOAD_ERROR="keyLoadError",e.FEATURE_HANDLER_ERROR="FEATURE_HANDLER_ERROR",e.SHAKA_NO_LICENSE_SERVER_GIVEN_6012="shaka.NO_LICENSE_SERVER_GIVEN_6012",e.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER="InvalidConfigElementInCreatePlayer",e.INVALID_CONFIG_LANG_IN_CREATE_PLAYER="InvalidConfigLangInCreatePlayer",e.INVALID_CONFIG_IN_CREATE_PLAYER="InvalidConfigInCreatePlayer",e.INVALID_CONFIG_IN_SET_SOURCE="InvalidConfigInSetSource",e.INVALID_CONFIG_IN_SOURCE_UPDATE="InvalidConfigInSourceUpdate",e.SHAKA_FAILED_TO_CREATE_CDM_6002="shaka.FAILED_TO_CREATE_CDM_6002",e.SHAKA_HTTP_ERROR_1002_LICENSE="shaka.HTTP_ERROR_1002_LICENSE",e.SHAKA_LICENSE_REQUEST_FAILED_6007="shaka.LICENSE_REQUEST_FAILED_6007",e.SHAKA_FAILED_TO_GENERATE_LICENSE_REQUEST_6006="shaka.FAILED_TO_GENERATE_LICENSE_REQUEST_6006",e.SHAKA_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001="shaka.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001",e.SHAKA_FAILED_TO_ATTACH_TO_VIDEO_6003="shaka.FAILED_TO_ATTACH_TO_VIDEO_6003",e.SHAKA_LICENSE_RESPONSE_REJECTED_6008="shaka.LICENSE_RESPONSE_REJECTED_6008",e.SHAKA_INVALID_SERVER_CERTIFICATE_6004="shaka.INVALID_SERVER_CERTIFICATE_6004",e.SHAKA_EXPIRED_6014="shaka.EXPIRED_6014",e.SHAKA_BAD_HTTP_STATUS_1001_LICENSE="shaka.BAD_HTTP_STATUS_1001_LICENSE",e.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.LOAD_SKIN_ERROR="LOAD_SKIN_ERROR",e.INSERT_INTO_WITH_SECURE_FRAME="INSERT_INTO_WITH_SECURE_FRAME",e.ELEMENT_NOT_IN_DOM="ELEMENT_NOT_IN_DOM",e.ERROR_SCREEN_LOAD_ERROR="ERROR_SCREEN_LOAD_ERROR"}(Sd||(Sd={}));const Td={[yd.MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[yd.NETWORK_MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[yd.NETWORK_PLAYER]:"https://yandex.ru/support/video-player/player-issues.html",[yd.NETWORK_TIMEOUT]:"https://yandex.ru/support/video-player/player-issues.html",[yd.NO_CODECS]:"https://yandex.ru/search/?text=\u043a\u043e\u0434\u0435\u043a\u0438",[yd.UNSUPPORTED_ENV]:"https://yandex.ru/soft/browsers/",[yd.EXCEPTION]:"https://yandex.ru/support/video-player/loading-issues.html",[yd.DRM]:"https://yandex.ru/support/video-player/drm.html",[yd.INVALID_STREAM_URL]:null},Rd={[yd.DEFAULT]:"DEFAULT_ERROR_CATEGORY_TITLE",[yd.MEDIA]:"MEDIA_ERROR_CATEGORY_TITLE",[yd.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_TITLE",[yd.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_TITLE",[yd.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_TITLE",[yd.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_TITLE",[yd.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_TITLE",[yd.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_TITLE",[yd.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_TITLE",[yd.CONFIG]:"CONFIG_ERROR_CATEGORY_TITLE",[yd.REGIONAL]:"REGIONAL_ERROR_CATEGORY_TITLE",[yd.DRM]:"DRM_ERROR_CATEGORY_TITLE",[yd.ACCESS]:"ACCESS_ERROR_CATEGORY_TITLE",[yd.INVALID_STREAM_URL]:"CONFIG_ERROR_CATEGORY_TITLE"},_d={[yd.DEFAULT]:"DEFAULT_ERROR_CATEGORY_MESSAGE",[yd.MEDIA]:"MEDIA_ERROR_CATEGORY_MESSAGE",[yd.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_MESSAGE",[yd.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_MESSAGE",[yd.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_MESSAGE",[yd.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_MESSAGE",[yd.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_MESSAGE",[yd.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_MESSAGE",[yd.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_MESSAGE",[yd.CONFIG]:"CONFIG_ERROR_CATEGORY_MESSAGE",[yd.DRM]:"DRM_ERROR_CATEGORY_MESSAGE",[yd.ACCESS]:"ACCESS_ERROR_CATEGORY_MESSAGE",[yd.INVALID_STREAM_URL]:"INVALID_STREAM_URL_ERROR_CATEGORY_MESSAGE"},wd={[yd.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_HELP_LINK",[yd.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_HELP_LINK"},bd="3036",Pd="2923";var Id=e(4519);const Od=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0;let Cd=function(e,t,r){e.attachEvent("on"+t,r)},kd=function(e,t,r){e.detachEvent("on"+t,r)};S(document,"addEventListener")&&S(document,"removeEventListener")&&(Cd=function(e,t,r,n){const i=e&&S(e,"addEventListener");i&&i.call(e,t,r,n)},kd=function(e,t,r,n){const i=e&&S(e,"removeEventListener");i&&i.call(e,t,r,n)});let Dd=!1,Nd=!1,Ld=!1;try{if(function(e){void 0===e&&(e=window);const t=e.Object;try{const e={};return t.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(r){return!1}}()){const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>Dd=!0}),Object.defineProperty(t,"passive",{get:()=>Nd=!0}),Object.defineProperty(t,"capture",{get:()=>Ld=!0}),Cd(e,"click",d,t)}}catch(fT){}let Md=A(document);R(document,e=>{e||(Md=e)});const Vd=Math.random()<=.1;let xd,Fd=-1;const Ud=["additional"],Bd=["additional","initSubpage","sampled"],Hd=["additional"],jd=e=>{const t=[];for(;e;)try{if(v(e),t.push(e),e.parent===e)break;e=e.parent}catch(r){break}return t},Yd=(e,t)=>{for(const r of t.split(".")){if(!(0,Ql.K)(e)){e=void 0;break}e=e[r]}return e},Gd="__ADB_CONFIG__",Kd=(0,Ql.K)(Gd)&&Gd.fn&&(0,Wl.m)(Gd.fn.encodeUrl)?Gd.fn.encodeUrl:void 0,Wd=void 0!==Kd?e=>Kd(e):void 0,qd=function(e){if(void 0===e&&(e=window),Wd)return Wd;const t=jd(e);for(;t.length;){const e=t.pop();if(!e)continue;const r=Yd(e,"ya.videoAd.encodeUrl");if((0,Wl.m)(r))return r}},zd=qd(window);let Xd;const Qd=function(e){return void 0===e&&(e=window),Xd||(Xd=e.document.createElement("div")),Xd}(window),Jd=(e,t)=>{const r="undefined"!==typeof Qd.style[e];if(r&&t&&s(t))try{Qd.style.cssText=e+": "+t+";";const r=Boolean(Qd.style.cssText);return Qd.style.cssText="",r}catch(n){return!1}return r};var Zd=e(2370);const $d={},ec=function(e){return void 0===e&&(e=""),$d[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let r=0;r<Zd.q.length;r++){const n=Zd.q[r],i=n?""+n+t:e;if(Jd(i))return $d[e]=i}return $d[e]=e}(e)};var tc=e(5791);const rc=function(e){return void 0===e&&(e=window),-1!==(0,tc.N)(e)}(),nc=function(e){return void 0===e&&(e=window),m(e).indexOf("SamsungBrowser")>-1}(),ic=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const{resolver:n,preparers:i}=F(t);let o,a=null,s=null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a&&a.every((e,r)=>t[r]===e))return o;const l=i.map(e=>e(...t));if(s&&s.every((e,t)=>l[t]===e))return a=t,o;const d=n(...l);return a=t,s=l,o=d,d}},oc={xml:"http://www.w3.org/XML/1998/namespace",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},ac={};U({xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type"},(function(e,t){const r=e.split(":"),n=oc[r[0]];n&&(ac[t]=n)}));const sc="classList"in document.documentElement,lc=ic(e=>e.classList&&e.classList.add,n),dc=(ic(e=>e.classList&&e.classList.remove,n),ic(e=>e.classList&&e.classList.toggle,n),(()=>{const e=document.createElement("p");return!!sc&&(e.classList.add("c1","c2"),!!e.classList.contains("c2")&&(e.classList.toggle("c3",!1),!e.classList.contains("c3")))})()),cc=((()=>{const e=document.createElement("p");!!sc&&(e.classList.toggle("a",!1),e.classList.contains("a"))})(),e=>e.split(" ").filter(e=>Boolean(e))),uc=dc?(e,t)=>{const r=cc(t);e.classList.add(...r)}:(e,t)=>{const r=cc(t);for(let n=0;n<r.length;n++)e.classList.add(r[n])},hc=e=>{try{const{left:t,right:r,top:n,bottom:i}=e.getBoundingClientRect();return{left:t,right:r,top:n,bottom:i,width:r-t,height:i-n}}catch(t){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},fc=function(e,t){void 0===e&&(e=document);const r=e.currentScript;if(r)return r;{const r=e.getElementsByTagName("script"),n=[];for(let e=0;e<r.length;e++)n.push(r[e]);if("function"===typeof t){const e=n.filter(t);return e[e.length-1]}return n[n.length-1]}}();fc&&fc.src;var pc=e(8062);const gc=S(Array,"isArray"),vc=Boolean(gc)?e=>gc.call(Array,e):e=>"Array"===(0,pc.M)(e),mc=d,Ec=d,yc=d,Ac=e=>{let{win:t,propertyName:r}=e;return{call:e=>mc(K({win:t,propertyName:r},e)),subscribe:e=>yc(K({win:t,propertyName:r},e)),wait:e=>(e=>{let{propertyName:t,win:r}=e;return new Promise(e=>{yc({callback:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e(r)},propertyName:t,win:r})})})(K({win:t,propertyName:r},e)),waitUntil:e=>(e=>{let{propertyName:t,win:r,comparator:n}=e;return new Promise(e=>{yc({propertyName:t,win:r,callback:function(){n(...arguments)&&e()}})})})(K({win:t,propertyName:r},e)),clear:e=>Ec(K({win:t,propertyName:r},e))}};Ac({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class Sc{constructor(){this._isDestroyed=!1,this.destroyHandlers=[]}onDestroy(e){this._addDestroyHandler(e)}addDestroyListener(e){this._addDestroyHandler(e)}addDestroyHandler(e){this._addDestroyHandler(e)}destroy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[n]=t;this._isDestroyed||(this._isDestroyed=!0,this._destroyReason=n,this.destroyHandlers.forEach(e=>e(...t)),this.destroyHandlers.length=0)}getIsDestroyed(){return this._isDestroyed}get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}ignoreAfterDestroy(e){var t=this;let r=e;return function(){t.isDestroyed&&(r=d);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];r.apply(t,n)}}_addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}}class Tc{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.on.push(...t),()=>this.remove(...t)}addOne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.once.push(...t),()=>this.remove(...t)}promise(){return new Promise(e=>this.addOne(e))}dispatch(e){const{once:t}=this;this.once=[],q(this.on,e),q(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.on=this.on.filter(e=>t.indexOf(e)<0),this.once=this.once.filter(e=>t.indexOf(e)<0)}}class Rc extends Tc{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=e}getValue(){return this.value}subscribeValueCondition(e,t){return this.add(r=>{e(r)&&W(t,r)})}subscribeValueConditionOnce(e,t){const r=this.subscribeValueCondition(e,e=>{r(),W(t,e)});return r}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}let _c=0;const wc=[],bc=function(e){let t=e;for(let r=0;r<(arguments.length<=1?0:arguments.length-1);r++)t+=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];return t},Pc=function(e){let t=e;for(let r=0;r<(arguments.length<=1?0:arguments.length-1);r++)t-=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];return t},Ic=function(e){let t=e;for(let r=0;r<(arguments.length<=1?0:arguments.length-1);r++)t*=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];return t},Oc=function(e){let t=e;for(let r=0;r<(arguments.length<=1?0:arguments.length-1);r++)t/=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];return t};class Cc extends Sc{constructor(e){super(),this.onResize=void 0,this.resizeObserverCallback=e=>{let[{contentRect:{width:t,height:r}}]=e;this.onResize.dispatch({width:$(t),height:$(r)})};const t=hc(e);if(this.onResize=new Rc({width:$(t.width),height:$(t.height)},(e,t)=>{let{width:r,height:n}=t;return!!(isNaN(r)||isNaN(n)||r<1||n<1)||e.width===r&&e.height===n}),this.addDestroyHandler(()=>{this.onResize.removeAll()}),"undefined"!==typeof ResizeObserver)try{const t=new ResizeObserver(this.resizeObserverCallback);t.observe(e),this.addDestroyHandler(()=>{t.disconnect()})}catch(fT){this.fallbackToCustomDetectionMethods(e)}else this.fallbackToCustomDetectionMethods(e)}getSize(){return ee({},this.onResize.getValue())}fallbackToCustomDetectionMethods(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:r}=t;if(!r)return;const n=()=>{const t=hc(e);this.onResize.dispatch({width:$(t.width),height:$(t.height)})};this.addDestroyHandler(T(r,"resize",n,{passive:!0})),this.addDestroyHandler(z(n))}}const kc=[{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}],Dc=e=>(e=>e instanceof Promise||"Promise"===(0,pc.M)(e)&&Boolean(r(()=>n(e.constructor))))(e)||(e=>Boolean(r(()=>(0,Wl.m)(e.then)&&(0,Wl.m)(e.catch))))(e),Nc=e=>{let t=0;return{promise:new Promise(r=>{t=window.setTimeout(r,e)}),clear(){clearTimeout(t)},timeoutId:t}};class Lc{constructor(e){this.cache=e}get(e){return this.cache[e]}has(e){return e in this.cache}set(e,t){this.cache[e]=t}}const Mc=document.createElement("a"),Vc=(function(e,t,r){void 0===t&&(t=e=>e),void 0===r&&(r=new Lc({}))}(e=>ae({},se(e))),/^(android-app:|chrome-extension:)/),xc=e=>{try{return decodeURIComponent(e)}catch(t){return e}},Fc=(e,t)=>t.map(t=>e+"[]="+encodeURIComponent(t)).join("&");var Uc;let Bc;!function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(Uc||(Uc={})),function(e){e.ALL="*",e.PLAY="play",e.START_SCREEN_PLAY="startScreenPlay",e.VOLUME="sound",e.VOLUME_SLIDER="volumeSlider",e.SETTINGS="settings",e.SETTINGS_ITEM="settingsItem",e.FULLSCREEN="fullscreen",e.TIMELINE="timeline",e.TIMELINE_PREVIEW="timelinePreview",e.LIVE="live",e.POSTER="poster",e.START_POSITION_CONFIRM="startPositionConfirm",e.TIME_DISPLAY="time",e.TITLE_DISPLAY="titleDisplay",e.REPORT="report",e.FORWARD="forward",e.BACKWARD="backward",e.LOGO="logo",e.PRELOADER="preloader",e.CONTEXT_MENU="contextMenu",e.START_SCREEN="startScreen",e.PLAYBACK_RATE="playbackRate",e.SKIPPABLE_FRAGMENTS="skippableFragments",e.EXTERNAL_PLAYBACK="externalPlayback",e.RECOMMENDATIONS="recommendations",e.CLOSE_BUTTON="closeButton",e.NEXT_AD_INFO="nextAdInfo",e.SUBTITLES_TOGGLE="subtitlesToggle",e.LOGO_WIDGET="logoWidget",e.SKIP_AD="skipAd",e.MOBILE_SEEK_BUTTONS="mobileSeekButtons",e.TITLE="title"}(Bc||(Bc={}));const Hc=x(Bc).map(e=>Bc[e]),jc=e=>Hc.every(t=>e.includes(t));var Yc=e(9816);const Gc=function(e){void 0===e&&(e=window);const t=m(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const r=t.replace(/\(.+?\)/gi,"").split(" ").map(e=>e.trim().split("/")[0]).filter(e=>e&&"mobile"!==e);return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]},Kc=function(e){return void 0===e&&(e=window),Gc(e)||ge(e)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&(0,Yc.b)(e)}(e)}(),Wc=Kc?"":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";class qc{constructor(){this.resolve=void 0,this.reject=void 0,this.promise=void 0;let e=d,t=d;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}const zc=NaN,Xc=15,Qc=1500,Jc=Ae(),Zc=function(e){void 0===e&&(e=window);const{platform:t=""}=e.navigator||{};return function(e){void 0===e&&(e=window);const{vendor:t=""}=e.navigator||{};return 0===t.indexOf("Google")}(e)&&!Ae(e)&&0===t.indexOf("Linux ")&&(0,Yc.b)(e)}(),$c=ge(),eu=navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,tu=Zc||Jc||$c||eu;let ru;!function(e){e.Space="Space",e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowRight="ArrowRight",e.ArrowLeft="ArrowLeft",e.KeyF="KeyF",e.Tab="Tab",e.Escape="Escape",e.Enter="Enter"}(ru||(ru={}));const nu={9:ru.Tab,13:ru.Enter,27:ru.Escape,32:ru.Space,37:ru.ArrowLeft,38:ru.ArrowUp,39:ru.ArrowRight,40:ru.ArrowDown,70:ru.KeyF},iu=["keyup","keydown"],ou=["mousemove","click","dblclick","mouseenter","mouseleave","contextmenu"],au=["touchstart","touchend","longtouch"];class su{constructor(){this.handlers=Object.create(null),this.onceHandlers=Object.create(null),this.maxEventListeners=10}setMaxListeners(e){!isFinite(e)||e<=0||(this.maxEventListeners=e)}on(e,t){this.getHandlers(e).push(t),this.checkSubscriptions(e)}once(e,t){this.getOnceHandlers(e).push(t),this.checkSubscriptions(e)}off(e,t){const r=this.getHandlers(e),n=this.getOnceHandlers(e);if(void 0===t)return r.length=0,void(n.length=0);this.removeHandler(t,r),this.removeHandler(t,n)}emit(e,t){const r=this.getHandlers(e),n=this.getOnceHandlers(e).slice();this.getOnceHandlers(e).length=0,r.slice().concat(n).forEach(e=>{try{e(t)}catch(fT){setTimeout(()=>{throw fT},0)}})}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}getOnceHandlers(e){return void 0===this.onceHandlers[e]&&(this.onceHandlers[e]=[]),this.onceHandlers[e]}checkSubscriptions(e){const t=this.getHandlers(e).length+this.getOnceHandlers(e).length;t>this.maxEventListeners&&console.warn("There are "+t+" subscriptions on event named "+e)}removeHandler(e,t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}class lu extends su{destroy(){this.emit("Destroy")}}class du extends lu{constructor(e){super(),this.clickElement=e,this.createKeyboardEventHandler=e=>t=>{const r="code"in(n=t)&&n.code?n.code in ru?n.code:void 0:nu[n.which||n.keyCode];var n;void 0!==r&&(r!==ru.Tab&&t.preventDefault(),this.emit("Event",{type:e,event:{keyName:r,preventDefault:d}}))},this.createMouseEventHandler=e=>"contextmenu"===e?e=>this.handleContextMenuMouseEvent(e):t=>this.handleMouseEvent(e,t),this.handleMouseEvent=(e,t)=>{if(!(r=t.target)||r.ownerDocument&&r.ownerDocument.compareDocumentPosition(r)&r.DOCUMENT_POSITION_DISCONNECTED)return;var r;const{clientX:n,clientY:i}=function(e,t){const{top:r,left:n}=e.getBoundingClientRect();return{clientX:t.clientX-n,clientY:t.clientY-r}}(this.clickElement,t);this.emit("Event",{type:e,event:{clientX:n,clientY:i,preventDefault:d}})},this.handleContextMenuMouseEvent=e=>{e.ctrlKey||e.altKey||(e.preventDefault(),this.handleMouseEvent("contextmenu",e))},this.handleLongTouch=e=>{const t=[{clientX:0,clientY:0}],r={touches:e&&"touches"in e?e.touches:t,changedTouches:e&&"changedTouches"in e?e.changedTouches:t,cancelable:!1,preventDefault:d};this.handleTouchEvent("longtouch",r)},this.createTouchEventHandler=e=>t=>this.handleTouchEvent(e,t),this.handleTouchEvent=(e,t)=>{const{touches:r,changedTouches:n}=function(e,t){const{top:r,left:n}=e.getBoundingClientRect();return{touches:Array.from(t.touches).map(e=>{let{clientX:t,clientY:i}=e;return{clientX:t-n,clientY:i-r}}),changedTouches:Array.from(t.changedTouches).map(e=>{let{clientX:t,clientY:i}=e;return{clientX:t-n,clientY:i-r}})}}(this.clickElement,t);this.emit("Event",{type:e,event:{touches:"touchend"===e?[]:r,changedTouches:"touchstart"===e?[]:n,preventDefault:()=>{try{if(!t.cancelable)return;t.preventDefault()}catch(e){}}}})},this.setMaxListeners(11),ou.forEach(t=>{"contextmenu"===t&&tu||this.once("Destroy",T(e,t,this.createMouseEventHandler(t)))}),au.forEach(t=>{"longtouch"!==t?this.once("Destroy",T(e,t,this.createTouchEventHandler(t),{capture:!0,passive:!1})):this.once("Destroy",ye(e,this.handleLongTouch,{touchesCount:2,handleContextmenu:!1}))}),iu.forEach(t=>{this.once("Destroy",T(e,t,this.createKeyboardEventHandler(t)))})}}let cu;!function(e){e.Click="click",e.DoubleClick="dblclick",e.MouseMove="mousemove",e.MouseEnter="mouseenter",e.MouseLeave="mouseleave",e.ContextMenu="contextmenu"}(cu||(cu={}));const uu=Oc(300,3/4);class hu extends su{static calculateEventSlop(e,t){let{event:r}=e,{event:n}=t;const i=r.touches[0]||r.changedTouches[0],o=n.touches[0]||n.changedTouches[0],a=Math.abs(i.clientX-o.clientX),s=Math.abs(i.clientY-o.clientY);return a*a+s*s}constructor(e){super(),this.timeoutId=void 0,this.firstTouchStartEvent=void 0,this.firstTouchStopEvent=void 0,this.secondTouchStartEvent=void 0,this.skipNextClick=!1,this.handleClickerEvent=e=>{if(function(e){return ou.includes(e.type)}(e)&&this.handleMouseEvent(e),function(e){return au.includes(e.type)}(e))switch(e.timeStamp=Date.now(),e.type){case"touchstart":this.handleTouchStart(e);break;case"touchend":this.handleTouchEnd(e);break;case"longtouch":this.dispatchEvent(Se({},e,{type:cu.ContextMenu,event:Se({},e.event,Te(e))}))}},this.handleTouchEnd=e=>{this.firstTouchStartEvent&&(this.firstTouchStopEvent||(this.firstTouchStopEvent=e))},this.handleTouchStart=e=>{if(this.skipNextClick=!0,this.firstTouchStartEvent||this.timeoutId){if(this.secondTouchStartEvent)return;{this.secondTouchStartEvent=e;const t=this.isConsideredDoubleTap();this.reset(),t&&this.dispatchEvent(Se({},e,{type:cu.DoubleClick,event:Se({},e.event,Te(e))}))}}else this.firstTouchStartEvent=e,this.timeoutId=window.setTimeout(this.handleTimeout,300)},this.handleTimeout=()=>{const e=Boolean(this.firstTouchStartEvent&&this.firstTouchStopEvent&&!this.secondTouchStartEvent),t=this.areFirstTapsInSameBox(),r=e&&this.firstTouchStopEvent.timeStamp-this.firstTouchStartEvent.timeStamp<=uu,n=e&&t&&r,i=this.firstTouchStopEvent;this.reset(),n&&this.dispatchEvent(Se({},i,{type:cu.Click,event:Se({},i.event,Te(i))}))};const{eventListener:t}=e;this.once("Destroy",()=>this.reset()),t.on("Event",this.handleClickerEvent),this.once("Destroy",()=>t.off("Event",this.handleClickerEvent))}destroy(){this.emit("Destroy")}handleMouseEvent(e){this.skipNextClick?e.type===cu.Click&&(this.skipNextClick=!1):this.dispatchEvent(e)}dispatchEvent(e){-1!==e.event.clientX&&-1!==e.event.clientY&&this.emit("Event",e)}areFirstTapsInSameBox(){if(!this.firstTouchStartEvent||!this.firstTouchStopEvent)return!1;return hu.calculateEventSlop(this.firstTouchStartEvent,this.firstTouchStopEvent)<=32}isConsideredDoubleTap(){if(!this.firstTouchStartEvent||!this.firstTouchStopEvent||!this.secondTouchStartEvent)return!1;if(!this.areFirstTapsInSameBox())return!1;if(!(hu.calculateEventSlop(this.firstTouchStartEvent,this.secondTouchStartEvent)<=300))return!1;return!(this.secondTouchStartEvent.timeStamp-this.firstTouchStartEvent.timeStamp>300)}reset(){window.clearTimeout(this.timeoutId),this.timeoutId=void 0,this.firstTouchStartEvent=void 0,this.firstTouchStopEvent=void 0,this.secondTouchStartEvent=void 0}}class fu extends Sc{constructor(e){super(),this.clickElement=e;const t=new du(this.clickElement);this.addDestroyHandler(()=>t.destroy());const r=new hu({eventListener:t});this.addDestroyHandler(()=>r.destroy());const n=e=>{e.type===cu.DoubleClick&&e.event.preventDefault()};r.on("Event",n),this.addDestroyHandler(()=>r.off("Event",n))}}class pu extends nd{constructor(e,t){super(e,t),this.category=void 0,this.toJSON=void 0,this.category=E(this.code),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:r(()=>s(this.details)?this.details:JSON.stringify(this.details))||this.details,stack:this.stack,category:this.category})}}class gu extends pu{constructor(e,t){super(e,t)}}let vu,mu,Eu,yu;!function(e){e.BroadcastAdReceived="BroadcastAdReceived",e.BroadcastAdInit="BroadcastAdInit",e.StreamPlayerReceivedMetadata="StreamPlayerReceivedMetadata",e.StreamPlayerChooseMetadata="StreamPlayerChooseMetadata",e.PlayWithoutRAAResults="PlayWithoutRAAResults",e.CanPlay="CanPlay",e.ContentImpression="ContentImpression",e.WaitForPlayCompleted="WaitForPlayCompleted",e.DrmSystemsSupportDetected="DrmSystemsSupportDetected",e.InrollAdStart="InrollAdStart",e.InrollAdPodStart="InrollAdPodStart",e.InrollAdPodEnd="InrollAdPodEnd",e.InrollAdEnd="InrollAdEnd",e.PlayAdViewers="PlayAdViewers",e.AdStart="AdStart",e.AdPodImpression="AdPodImpression",e.AdPodLoading="AdPodLoading",e.AdPodError="AdPodError",e.AdPodStart="AdPodStart",e.AdPodEnd="AdPodEnd",e.AdEnd="AdEnd",e.AdClickThru="AdClickThru",e.NoAdPodsToPlayAd="NoAdPodsToPlayAd",e.Stalled="Stalled",e.LoadSource="LoadSource",e.PrerollInit="PrerollInit",e.WaitForUserGesture="WaitForUserGesture",e.WaitForDocumentVisibility="WaitForDocumentVisibility",e.CallPublicApiAfterDestroy="CallPublicApiAfterDestroy",e.HiddenAutoplayPrevented="HiddenAutoplayPrevented",e.PlayVideoOnVisibilityChange="PlayVideoOnVisibilityChange",e.PauseVideoOnVisibilityChange="PauseVideoOnVisibilityChange",e.StreamStopWhileLoadingMultiroll="StreamStopWhileLoadingMultiroll",e.StreamStopWhileChoosingStream="StreamStopWhileChoosingStream",e.StreamStopWhileDestroyVideoController="StreamStopWhileDestroyVideoController",e.StreamStopDuringDefineAutoplaySettings="StreamStopDuringDefineAutoplaySettings",e.StreamStopWhileWaitingForPlay="StreamStopWhileWaitingForPlay",e.StreamStopWhileWaitingForDocumentVisibility="StreamStopWhileWaitingForDocumentVisibility",e.StreamStopWhileLoadingPreroll="StreamStopWhileLoadingPreroll",e.StreamStopWhilePreloadingPreroll="StreamStopWhilePreloadingPreroll",e.SkippableFragmentWidgetDrawn="SkippableFragmentWidgetDrawn",e.SkippableFragmentWidgetHidden="SkippableFragmentWidgetHidden",e.HlsJsLoadSourceCalledTwice="HlsJsLoadSourceCalledTwice",e.PreloadSource="PreloadSource",e.UsePreloadedHlsJs="UsePreloadedHlsJs",e.PlayAfterWaitingForDocumentVisibility="PlayAfterWaitingForDocumentVisibility",e.ResourcesIdle="ResourcesIdle",e.ClientInfo="ClientInfo",e.HlsJsForceCappingStart="HlsJsForceCappingStart",e.CanRenderSkinCalledBeforeSkinIsReady="CanRenderSkinCalledBeforeSkinIsReady",e.ExternalPlaybackOpenButtonClick="ExternalPlaybackOpenButtonClick",e.ExternalPlaybackCloseButtonClick="ExternalPlaybackCloseButtonClick",e.ExternalPlayerListVisibleStatusChange="ExternalPlayerListVisibleStatusChange",e.ExternalPlaybackPlayerCsrfFetching="ExternalPlaybackPlayerCsrfFetching",e.ExternalPlaybackPlayerCsrfFetchSuccess="ExternalPlaybackPlayerCsrfFetchSuccess",e.ExternalPlaybackPlayerCsrfFetchError="ExternalPlaybackPlayerCsrfFetchError",e.ExternalPlaybackPlayerListHasAnyDevice="ExternalPlaybackPlayerListHasAnyDevice",e.ExternalPlaybackPlayerListFetching="ExternalPlaybackPlayerListFetching",e.ExternalPlaybackPlayerListFetchSuccess="ExternalPlaybackPlayerListFetchSuccess",e.ExternalPlaybackPlayerListFetchError="ExternalPlaybackPlayerListFetchError",e.ExternalPlaybackPlayerListAboutInfoClick="ExternalPlaybackPlayerListAboutInfoClick",e.ExternalPlaybackPlayerListRefresh="ExternalPlaybackPlayerListRefresh",e.ExternalPlaybackPlayerActivate="ExternalPlaybackPlayerActivate",e.ExternalPlaybackPlayerActivateSucceed="ExternalPlaybackPlayerActivateSucceed",e.ExternalPlaybackPlayerActivateFailed="ExternalPlaybackPlayerActivateFailed",e.ExternalPlaybackCsrfTokenExpired="ExternalPlaybackCsrfTokenExpired",e.YandexRpcError="YandexRpcError",e.YandexAndroidVsidChanged="YandexAndroidVsidChanged",e.Seek="Seek",e.RecommendationsSetParams="RecommendationsSetParams",e.RecommendationSelect="RecommendationSelect",e.RecommendationsWidgetVisibilityChange="RecommendationsWidgetVisibilityChange",e.MediaInternalsHistoryOnFatal="MediaInternalsHistoryOnFatal",e.PlayInrollAd="PlayInrollAd",e.ShareButtonClick="ShareButtonClick",e.FPSControllerRestrictions="FPSControllerRestrictions"}(vu||(vu={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(mu||(mu={})),function(e){e.Init="Init",e.SetSource="SetSource",e.Seek="Seek",e.VideoTrackChange="VideoTrackChange",e.AudioTrackChange="AudioTrackChange",e.Recover="Recover",e.MediaError="MediaError",e.Offline="Offline",e.Other="Other",e.RepresentationsChange="RepresentationsChange",e.LiveEdge="LiveEdge",e.AdStart="AdStart",e.AdOther="AdOther",e.AdBetween="AdBetween",e.AdEnd="AdEnd"}(Eu||(Eu={})),function(e){e.AdCompleted="AdCompleted",e.LoadSource="LoadSource",e.PlayerDestroy="PlayerDestroy",e.CutOff="CutOff",e.PlayerError="PlayerError",e.AdTypeChange="AdTypeChange",e.InsertIntoCalled="InsertIntoCalled",e.AdSkipped="AdSkipped"}(yu||(yu={}));const Au=[];class Su{static enableConsole(){Su.consoleEnabled=!0,Su.log("YA PLAYER VERSION: 1.0-9279")}static log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Su.consoleEnabled&&console.log(we(...t)),Su.addToHistory("log",t)}static warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Su.consoleEnabled&&console.warn(we(...t)),Su.addToHistory("warn",t)}static error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Su.consoleEnabled&&console.error(we(...t)),Su.addToHistory("error",t)}static getHistory(){return[...Au]}static addToHistory(e,t){Au.length>=150&&Au.shift(),Au.push("["+e+"]["+Date.now()+"] "+t.map(e=>{try{return _e(e)}catch(fT){return JSON.stringify(["stringify_error",fT.stack])}}).join())}}Su.consoleEnabled=void 0;const Tu=Pe(window),Ru=Pe(window),_u={web_adsdk_new_skin:"true",web_gogol_fetch_keepalive:"false",web_gogol_fetch_retry_once:"false",web_gogol_wait_for_online:"false",web_prefer_hd:"false",web_skip_all_adpods:"false"};let wu={};Ru.flags||(Ru.flags=wu);const bu=ne(()=>Ce("web_adsdk_new_skin")),Pu={play:gd.PLAY,pause:gd.PAUSE,end:gd.END,idle:gd.PAUSE};class Iu extends Sc{constructor(e){super(),this.params=e,this.destroyPromise=new Promise(e=>{this.addDestroyHandler(()=>{e()})}),this.currentAdPlaybackController=void 0,this.playbackQueue=[],this.logAdStart=ne(()=>{const e=this.getAdTypeForLogs(),t=this.playbackQueue.length,{logEvent:r}=this.params;r({event:vu.AdStart,params:{adPodsCount:t,adType:e}}),e===mu.inroll&&r({event:vu.InrollAdStart,params:{adPodsCount:t}})}),this.logAdEnd=ne(()=>{const e=this.getAdTypeForLogs(),t=this.playbackQueue.length,{logEvent:r}=this.params;e===mu.inroll&&r({event:vu.InrollAdEnd,params:{adPodsCount:t}}),r({event:vu.AdEnd,params:{stopAdReason:this.destroyReason||yu.AdCompleted,adPodsCount:t,adType:e}})}),this.adPodIndex=0,this.startPlayingAd=ne(async()=>{for(this.logAdStart();this.adPodIndex<this.playbackQueue.length&&!this.isDestroyed;)await this.playAdPod(this.playbackQueue[this.adPodIndex]),this.adPodIndex++;this.logAdEnd();const e=this.playbackQueue[this.playbackQueue.length-1];this.isDestroyed||void 0===e||r(()=>{this.params.onLastAdPodStopped({adType:e.adViewer.getAdBreakType()})}),this.destroy(yu.AdCompleted)}),this.dispatchOnFirstAdPodStarted=ne(()=>{this.params.onFirstAdPodStarted()}),this.lang="ru",this.updateAdPodCloseState=e=>{this.params.onAdPodCloseStateChange(e.getAdPodCloseState())},this.updateAdVolumeAvailabilityStateChange=e=>{this.params.onAdVolumeAvailabilityStateChange(e.getAdVolumeAvailabilityState())},this.updateAdPodTimeToSkip=e=>{const t=e.getAdPodTimeToSkip();this.params.onAdPodTimeToSkipChange(ie(t)?Z(Math.ceil(t)):void 0)},this.playAdPod=async e=>{let{adType:t,adViewer:r,additionalData:n,adDisplayConfig:i,posterUrl:o,adElementsSet:a}=e;if(0===r.getAdPodsCount())return void Su.log("AdViewer is empty");const{logEvent:s}=this.params;if(s({event:vu.AdPodLoading,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}}),t===mu.inroll){const{cueId:e}=n;s({event:vu.InrollAdPodStart,params:{adPodsCount:this.playbackQueue.length,cueId:e}}),r.setStatsRootFields({cueid:e})}const l=r.createPlaybackController(a.videoSlotElement,a.adSlotElement,De({videoSlotCanAutoPlay:!0,controlsSettings:this.params.getControlsSettings(),visibilitySlot:this.params.playerContainer,lang:this.lang,contentAfterAd:this.getContentAfterAd(t,o),enableNewSkin:bu(),adSequence:{index:this.adPodIndex,count:this.playbackQueue.length}},i));this.currentAdPlaybackController=l,this.updateAdPodDuration(l),this.params.onAdPodCurrentTimeChange(Z(0)),this.params.onAdSkippableStateChange(l.getAdSkippableState()),this.updateAdPodCloseState(l),this.updateAdVolumeAvailabilityStateChange(l),l.subscribe("AdPlayingStateChange",()=>{this.updateAdPodPlayingStateChange()}),l.subscribe("AdMediaStateChange",()=>{this.updateAdPodPlayingStateChange()}),l.subscribe("AdRemainingTimeChange",()=>{const e=l.getAdPodRemainingTime(),t=this.updateAdPodDuration(l);this.params.onAdPodCurrentTimeChange(Z(t-e)),this.updateAdPodTimeToSkip(l),this.updateAdPodPlayingStateChange()}),l.subscribe("AdInteraction",()=>{this.params.onAdInteraction()}),l.subscribe("AdSkippableStateChange",e=>{this.updateAdPodTimeToSkip(l),this.params.onAdSkippableStateChange(e.skippableState)}),l.subscribe("AdStartRejected",e=>{this.params.onAdStartRejected(new Error("AdStartRejected"))}),l.subscribe("AdPodDurationChange",()=>{this.updateAdPodDuration(l)}),l.subscribe("AdPodStartRequest",()=>{this.params.onBeforeAdPodStart({adPlaybackController:l})}),l.subscribe("AdPodStarted",()=>{var e;const t=null==(e=l.getCurrentViewerAssets())?void 0:e.isFullyClickable;s({event:vu.AdPodStart,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n,isFullyClickable:t}}),this.dispatchOnFirstAdPodStarted(),this.params.onAdPodStarted({adElementsSet:a,isFullyClickable:t}),this.updateAdPodPlayingStateChange(),this.updateAdPodDuration(l)});const d=()=>{this.params.onAdPodDurationChange(void 0),this.params.onAdPodCurrentTimeChange(void 0),this.params.onAdSkippableStateChange(!1),this.params.onAdPodTimeToSkipChange(void 0),this.params.onAdPodCloseStateChange(void 0)};l.subscribe("AdPodStopped",()=>{d(),this.params.onAdPodStopped()}),l.subscribe("AdPodSkipped",()=>{d(),this.params.onAdPodSkipped()}),l.subscribe("AdContentSizeChange",()=>{const e=l.getAdContentSize();if(void 0===e)return;const{width:t,height:r}=e;this.params.onAdSizeChange({width:$(ie(t)?t:NaN),height:$(ie(r)?r:NaN)})}),l.subscribe("AdPodImpression",()=>{s({event:vu.AdPodImpression,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}})}),l.subscribe("AdPodError",e=>{s({event:"AdPodError",params:De({},e,{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n})})}),l.subscribe("AdClickThru",()=>{this.params.onAdClickThru(),s({event:"AdClickThru",params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}})}),this.shouldSkipAllAdPods()&&l.subscribe("AdPodSkipped",()=>{this.destroy(yu.AdSkipped)}),l.subscribe("AdPodCloseStateChange",()=>{this.updateAdPodCloseState(l)}),l.subscribe("AdVolumeAvailabilityStateChange",()=>{this.updateAdVolumeAvailabilityStateChange(l)}),await new Promise(e=>{l.subscribe("AdStopped",e),l.playAd(),this.params.onAdPodPlayingStateChange({adType:t,playingState:gd.BUFFERING,expectedStalledReason:0===this.adPodIndex?Eu.AdStart:Eu.AdBetween})}),this.currentAdPlaybackController=void 0,s({event:vu.AdPodEnd,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:n}}),t===mu.inroll&&(s({event:vu.InrollAdPodEnd,params:{adPodsCount:this.playbackQueue.length,cueId:n.cueId}}),r.setStatsRootFields({cueid:void 0}))},this.addDestroyHandler(()=>{this.currentAdPlaybackController&&(this.currentAdPlaybackController.stopAd(),this.currentAdPlaybackController=void 0)}),this.lang=e.lang}playAdViewers(e){this.isDestroyed||(this.playbackQueue.push(e),this.addDestroyHandler(()=>{e.adViewer.destroy()}),Promise.resolve().then(()=>this.startPlayingAd()))}resumeAd(){this.currentAdPlaybackController&&(this.currentAdPlaybackController.resumeAd(),this.updateAdPodPlayingStateChange())}pauseAd(){this.currentAdPlaybackController&&(this.currentAdPlaybackController.pauseAd(),this.updateAdPodPlayingStateChange())}skipAdPod(){this.currentAdPlaybackController&&this.currentAdPlaybackController.skipAd()}setVolume(e){this.currentAdPlaybackController&&this.currentAdPlaybackController.setAdVolume(e)}getDestroyPromise(){return this.destroyPromise}getAdTypeForLogs(){const[e]=this.playbackQueue;return e?e.adType:(this.params.onError(new gu({code:Ad.AD_TYPE_IS_NOT_RECOGNIZED,isFatal:!1})),"unrecognized")}updateAdPodPlayingStateChange(){if(!this.currentAdPlaybackController)return;const e=this.currentAdPlaybackController.getAdMediaState(),t=this.currentAdPlaybackController.getAdPlayingState(),r=this.playbackQueue[this.adPodIndex].adPodType,n=this.playbackQueue[this.adPodIndex].adElementsSet.videoSlotElement.src,i="stalled"===(null==e?void 0:e.name)&&n?{adType:r,playingState:gd.BUFFERING,expectedStalledReason:Eu.AdOther}:{adType:r,playingState:Pu[t],expectedStalledReason:void 0};this.params.onAdPodPlayingStateChange(i)}updateAdPodDuration(e){const t=Z(e.getAdPodDuration());return this.params.onAdPodDurationChange(t),t}shouldSkipAllAdPods(){var e;return Boolean(null==(e=this.params.adConfig)?void 0:e.skipAllAdPods)||Ce("web_skip_all_adpods")||!1}getContentAfterAd(e,t){const r=this.playbackQueue.length-1===this.adPodIndex,n=this.shouldSkipAllAdPods(),i=t?[{url:t}]:[];switch(e){case mu.preroll:return r||n?{type:"startVideo",poster:i}:{type:"nextAd",poster:[]};case mu.postroll:return{poster:[]};case mu.midroll:case mu.postPauseroll:case mu.inroll:return r||n?{type:"continueVideo",poster:i}:{type:"nextAd",poster:[]};default:return{poster:[]}}}}var Ou={},Cu={checkExisting:!0},ku=0,Du=function(e){return e},Nu=function(e){return e&&"function"===typeof e.dispatch?e.dispatch:e},Lu=function(e){return Array.isArray(e)?e.map(Nu):Nu(e)};const Mu=Le("Batch",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 1===t.length&&Array.isArray(t[0])?t[0]:t}));var Vu=Mu.getType(),xu={},Fu=function(e){"function"===typeof console[e]&&(xu[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.pop();Array.isArray(i)&&i.type===Vu?i.forEach((function(t){console[e].apply(console,[].concat(r,[t]))})):(r.push(i),console[e].apply(console,r))})};for(var Uu in console)Fu(Uu);const Bu=Le("STORE_AD_CONFIG"),Hu=Le("STORE_UPDATE_AD_INFO"),ju=Le("STORE_PUT_AD_INFO"),Yu=Le("STORE_PUT_IS_ORIGINAL_BROADCAST_AD_CUE_ID"),Gu=Le("STORE_PUT_ADBLOCK_DETECTED"),Ku=Le("STORE_PUT_ORIGINAL_BROADCAST_AD_CUES"),Wu=Le("STORE_REFRESH_CUE"),qu=Le("STORE_REMOVE_CUE"),zu=Le("STORE_PUT_HAS_PREROLL"),Xu=Le("STORE_PUT_AD_SYNC_INIT"),Qu=Le("STORE_UPDATE_ORIGINAL_AD_STATE"),Ju=Le("STORE_PUT_NATIVE_AD_CONTROLS_VISIBILITY"),Zu=Le("STORE_PUT_LAST_KNOWN_BANDWIDTH_ESTIMATE"),$u=Le("STORE_AD_PUT_IN_STREAM_PLAYING_STATE"),eh=Le("STORE_PUT_NEXT_AD_INFO"),th=Le("STORE_PUT_ENGINE"),rh=Le("STORE_PUT_AUTOPLAY"),nh=Le("STORE_PUT_START_STAGE"),ih=Le("STORE_PUT_PRELOAD"),oh=Le("STORE_PUT_ENCODER_STATE"),ah=Le("STORE_ENCODER_ATTACHED"),sh=Le("STORE_PUT_VOLUME_INFO"),lh=Le("STORE_PUT_AUTOPLAY_IMPOSSIBLE"),dh=Le("STORE_PUT_USER_VOLUME"),ch=Le("STORE_PUT_DURATION"),uh=Le("STORE_PUT_VIDEO_SIZES"),hh=Le("STORE_PUT_VIDEO_TYPE"),fh=Le("STORE_PUT_PLAYING_STATE"),ph=Le("STORE_PUT_CURRENT_TIME"),gh=Le("STORE_PUT_CURRENT_TIME_LOW_QUALITY"),vh=Le("STORE_PUT_FROM"),mh=Le("STORE_PUT_STREAM"),Eh=Le("STORE_PUT_SOURCE_PARAMS"),yh=Le("STORE_UPDATE_SOURCE_ID"),Ah=Le("STORE_PUT_STREAMS"),Sh=Le("STORE_PUT_STREAMS_WITH_SUPPORT_INFO"),Th=Le("STORE_PUT_START_POSITION"),Rh=Le("STORE_PUT_IS_ONLINE"),_h=Le("STORE_PUT_FRAGMENT_DURATION"),wh=Le("STORE_PUT_PROGRAM_DATE_TIME"),bh=Le("STORE_PUT_DVR_START_TIME"),Ph=Le("STORE_PUT_DVR_DURATION"),Ih=Le("STORE_PUT_SKIN_DVR_START_TIME"),Oh=Le("STORE_PUT_SKIN_DVR_DURATION"),Ch=Le("STORE_PUT_PLAYBACK_RATE"),kh=Le("STORE_PUT_BUFFERING_RANGES"),Dh=Le("STORE_PUT_ERROR_INFO"),Nh=Le("STORE_PUT_LAST_RECOVER_POSITION"),Lh=Le("STORE_PUT_IS_ABR_SUPPORTED"),Mh=Le("STORE_PUT_IS_ABR_ENABLED"),Vh=Le("STORE_PUT_VIDEO_TRACK"),xh=Le("STORE_PUT_VIDEO_TRACKS",e=>[...e].sort(Ue)),Fh=Le("STORE_PUT_USER_VIDEO_TRACK_PARAMS"),Uh=Le("STORE_PUT_AUDIO_TRACK_VALUE"),Bh=Le("STORE_PUT_AUDIO_TRACKS"),Hh=Le("STORE_PUT_USER_AUDIO_TRACK_PARAMS"),jh=Le("STORE_PUT_TEXT_TRACKS"),Yh=Le("STORE_PUT_TEXT_TRACK_ENABLED"),Gh=Le("STORE_PUT_NATIVE_TEXT_TRACK_VISIBILITY"),Kh=Le("STORE_PUT_FEED"),Wh=Le("STORE_PUT_TEXT_TRACK_VALUE"),qh=Le("STORE_PUT_USER_TEXT_TRACK_PARAMS"),zh=Le("ENABLE_TEXT_TRACK"),Xh=Le("STORE_PUT_IS_FULLSCREEN"),Qh=Le("STORE_PUT_IS_PIP"),Jh=Le("STORE_PUT_IS_VISIBLE"),Zh=Le("STORE_PUT_IS_DOCUMENT_VISIBLE"),$h=Le("STORE_PUT_EXPECTED_STALLED"),ef=Le("STORE_PUT_PREVIEW"),tf=Le("STORE_PUT_WATCHED_TIME"),rf=Le("STORE_PUT_RESOURCES_IDLE"),nf=Le("STORE_PUT_HIDDEN_CONTROLS"),of=Le("STORE_PUT_NATIVE_CONTROLS_VISIBILITY"),af=Le("STORE_PUT_VIDEO_ELEMENT_STYLE"),sf=Le("STORE_ON_VIDEO_TAG_PLAYING_STATE_CHANGE"),lf=Le("STORE_PUT_PRELOAD_DETAILS"),df=Z(900);let cf;!function(e){e.original="original"}(cf||(cf={}));class uf{constructor(e,t){this.parent=e,this.element=document.createElement("div");const{style:r}=this.element;r.backgroundColor=function(e){switch(e){case cf.original:return"rgba(0, 255, 0, 0.5)";default:throw new Error("Unexpected BroadcastAdType ["+e+"]")}}(t),r.width="10px",r.height="10px",r.cssFloat="left",r.marginRight="1px"}setVisibility(e){e?this.show():this.hide()}show(){this.parent.appendChild(this.element)}hide(){o(this.element)}}class hf{constructor(e){this.element=document.createElement("div"),e.appendChild(this.element);const{style:t}=this.element;t.position="absolute",t.bottom="1px",t.left="1px"}createIndicator(e){return new uf(this.element,e)}}const ff=6e5;let pf;!function(e){e.INVALID_INROLL_FRAME="INVALID_INROLL_FRAME",e.INVALID_START="INVALID_START",e.CROSSED_BY_INVALID="CROSSED_BY_INVALID",e.MAX_DURATION="MAX_DURATION"}(pf||(pf={}));const gf=5e3,vf=1e4,mf=bc(ff,Ic(vf,3)),Ef=-ff;class yf extends su{constructor(){super(...arguments),this.adIntervals=[]}handleInrollFrame(e){if(!function(e){if(e.offset<Ef||e.offset>mf)return!1;if(void 0===e.cutoff)return!0;if(e.cutoff<Ef||e.cutoff>mf)return!1;const t=e.cutoff-e.offset;return t>=gf&&t<=ff}(e))return Su.warn("invalid inroll frame:",e),void this.handleInvalidInrollFrame(e,pf.INVALID_INROLL_FRAME);const t=this.adIntervals.find(t=>{let{cueId:r}=t;return r===e.cue_id});if(!t)return this.addAdIntervalByFastFrame(e);this.updateAdIntervalByInrollFrame(t,e)}validateAdIntervalsByTimestamp(e){for(let t=0;t<this.adIntervals.length;t++){const r=this.adIntervals[t];if(r.start>e)return;if(!r.isValid||r.isEndReceived)continue;if(e-r.start>ff){this.invalidateAdInterval(r,pf.MAX_DURATION);continue}const n=this.adIntervals[t+1];if(!n)return;n.start<=e&&this.invalidateAdInterval(r,pf.CROSSED_BY_INVALID)}}handleInvalidInrollFrame(e,t){const r=this.adIntervals.find(t=>{let{cueId:r}=t;return r===e.cue_id});if(r)return this.invalidateAdInterval(r,t),void this.updateAdIntervalByInrollFrame(r,e);const n=Ke(e);this.invalidateAdInterval(n,t),this.pushAdInterval(n)}addAdIntervalByFastFrame(e){const t=Ke(e);return this.pushAdInterval(t),t.isValid?t:void 0}updateAdIntervalByInrollFrame(e,t){const r=t.pts+t.offset;if(Math.abs(e.start-r)>1e3)return void this.invalidateAdInterval(e,pf.INVALID_START);if(e.isEndReceived)return;const n=void 0!==t.cutoff,i=n?bc(t.pts,t.cutoff):Ge(t.pts,e.start);e.isEndReceived=n,e.end=i,this.handleUpdatedAdInterval(e)}findCrossedAdIntervals(e){return this.adIntervals.filter(t=>e!==t&&(e.start<t.start?e.end>t.start:t.end>e.start))}pushAdInterval(e){const t=this.findCrossedAdIntervals(e);t.length&&this.invalidateAdInterval(e,pf.CROSSED_BY_INVALID),this.adIntervals.push(e),this.adIntervals.sort((e,t)=>{let{start:r}=e,{start:n}=t;return r-n}),this.invalidate(t,pf.CROSSED_BY_INVALID),e.isValid&&this.emit("AdIntervalUpdated",e)}handleUpdatedAdInterval(e){const t=this.findCrossedAdIntervals(e);if(t.length)return t.push(e),void this.invalidate(t,pf.CROSSED_BY_INVALID);e.isValid&&this.emit("AdIntervalUpdated",e)}invalidate(e,t){e.forEach(e=>{this.invalidateAdInterval(e,t)})}invalidateAdInterval(e,t){e.isValid&&(e.isValid=!1,e.invalidateReason=t,this.emit("InvalidAdInterval",{reason:t,cueId:e.cueId}))}}const Af=Z(15);class Sf{constructor(){this.ads=[],this.postAdsIds=[]}add(e){if(this.postAdsIds.indexOf(e.cueId)>-1)return;const t=this.findById(e.cueId);t?t.startTime=e.startTime:this.ads.push(qe({},e,{adViewers:e.adViewers.reduce((e,t)=>e.concat(t.separateAdPods()),[])}))}getAdViewers(e,t){const[r,n]=We(this.ads,r=>{let{startTime:n,endTime:i,cueId:o,adViewers:a}=r;if(o!==t)return!1;if(e<n)return!1;if(i-1e3*Af<e)return!1;for(const t of a){if(e+1e3*t.getAdDuration()<i)return!0}return!1});if(0===r.length)return[];this.postAdsIds.push(...r.map(e=>{let{cueId:t}=e;return t})),this.ads=n,r.sort((e,t)=>e.startTime-t.startTime);let i=Z(0);const o=[];for(const{adViewers:a,endTime:s,cueId:l}of r)for(const t of a){const r=bc(e,Ic(i,1e3));if(s-1e3*Af<r)break;s<bc(r,Ic(t.getAdDuration(),1e3))||(o.push({adViewer:t,additionalData:{cueId:l},adType:mu.inroll}),i=bc(i,Z(t.getAdDuration())))}return o}findById(e){return this.ads.find(t=>{let{cueId:r}=t;return r===e})}}class Tf extends su{constructor(e,t,r,n,i){let o;super(),this.store=r,this.playerApi=n,this.onError=i,this.adIntervalStorage=new yf,this.isEnabled=!0,this.adIndicators=void 0,this.inrolls=new Sf,this.adIndicators=new hf(t);const a=this.adIndicators.createIndicator(cf.original);e.addEventListener("timeupdate",()=>{const t=this.store.getState(),r=je(t);if(o!==r){const e=void 0!==r;a.setVisibility(e),o=r}const n=Ye(t);n&&(this.adIntervalStorage.validateAdIntervalsByTimestamp(n),this.isEnabled&&!e.paused&&(this.store.dispatch(Qu()),this.handleInrolls()))}),this.adIntervalStorage.on("AdIntervalUpdated",e=>{this.emit("AdIntervalUpdated",{cueId:e.cueId,start:e.start,end:e.end})}),this.adIntervalStorage.on("InvalidAdInterval",e=>{let{cueId:t,reason:r}=e;Su.warn("invalid ad interval: [cueId="+t+"] [reason="+r+"]"),this.onError(new gu({code:Ad.INVALID_METADATA,details:{cueId:t,reason:r},isFatal:!1})),this.emit("AdIntervalRemoved",t)})}handleInrollFrame(e){const t=this.adIntervalStorage.handleInrollFrame(e);if(!t)return Promise.resolve();const{cueId:r,start:n,end:i,isEndReceived:o}=t,a=o?i+1e3*Af:n+ff;return this.addInroll(r,n,a,{inrollFrame:e})}setEnabled(e){this.isEnabled=e}async addInroll(e,t,r,n){let{inrollFrame:i}=n;this.playerApi.callbacks.logEvent({event:vu.BroadcastAdReceived,params:{cueId:e,podStart:t,adType:mu.inroll}});const o=this.playerApi.getMultiroll(),a=await o.inroll.loadViewers(Xe({},i));if(0===a.length)return;const s=ze(a);this.playerApi.callbacks.logEvent({event:vu.BroadcastAdInit,params:{cueId:e,podStart:t,duration:s,adPodsCount:a.length,adType:mu.inroll}}),this.inrolls.add({adViewers:a,cueId:e,startTime:t,endTime:r})}handleInrolls(){const e=this.store.getState(),t=Ye(e);if(!t)return;const r=je(e);if(!r)return;const n=this.inrolls.getAdViewers(t,r);n.length&&this.emit("InrollAdPlayRequest",n)}}class Rf{constructor(){this.stopReasonInternal=void 0,this.stopDeferred=new qc}stop(e){this.stopReasonInternal=e,this.stopDeferred.resolve(e)}get stopReason(){return this.stopReasonInternal}get stopPromise(){return this.stopDeferred.promise}}const _f=e=>n(e.navigator.sendBeacon),wf=(e=>(e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1})(e)&&_f(e))(window),bf={adsdkver:0,adsdkdebug:0,adsdknovastconvertation:0,adsdkmotionoldanimation:0,adsdkecmaver:0,adsdktracelogs:0,adsdksecuremode:0,adsdkwithcredentials:0,adsdkabflags:0,adsdkuaas:0,"aim-banner-id":0,"aim-design-id":0,"aim-design-name":0,"aim-subdesign-id":0,adsdkhoneypotforced:0,adsdkgrforced:0},Pf=(rt(bf),{}),If=$e(document);for(const{location:e}of If){U(de(se(e).search),(e,t)=>{0===bf[t]&&(Pf[t]=e)})}const Of=(""+at(window,"adsdkecmaver")).toUpperCase(),Cf="ES2017"===Of||"ES5"===Of?Of:void 0,kf="ES2017"===Cf?"ES2017":"ES5"===Cf?"ES5":wf?"ES2017":"ES5",Df={ES5:"bundles",ES2017:"bundles-es2017"},Nf=st(st({},{InPage:"inpage",AdLoader:"loader",VideoBannerAd:"videobannerad",Multiroll:"multiroll",YaMusicAPI:"ya-music-api",VpaidPlayer:"vpaid_player",Rum:"rum"}),{MotionTGO:"motion_ad_creative",MotionTailor:"motion_tailor_ad_creative",InteractiveElementsAdCreative:"interactive_elements_ad_creative",SurveyOldDesignAdCreative:"survey_old_design_ad_creative"}),Lf="undefined"===typeof BUNDLES_PATH?"":BUNDLES_PATH,Mf="undefined"===typeof BUNDLE_NAME?"Test":BUNDLE_NAME,Vf=("undefined"===typeof BUILD_TIME||BUILD_TIME,["aw","ap","s-a","d-sd","k-j","s"].join("")),xf=["a","n.ya","nd","ex.ru"].join(""),Ff=(["y","a","nde","x.ru"].join(""),["ya","sta","tic.net"].join("")),Uf=(["ver","ify.y","a","nde","x.ru"].join(""),"https://"+Ff+"/"+Vf+"-bundles/"),Bf=e=>e instanceof Error||"Error"===(0,pc.M)(e),Hf=at(window,"adsdkuaas"),jf=(e,t,r)=>{for(let n=0;n<e.length;n++)t.call(r,e[n],n,e)},Yf=function(e,t){let r=e[t];if(!ht(r)){const i=r;try{delete e[t];const n=e[t];"function"===typeof n&&(r=n),e[t]=i}catch(n){}}return r}(Array,"isArray"),Gf=Boolean(Yf)?e=>Yf.call(Array,e):e=>"Array"===(0,pc.M)(e);var Kf=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const Wf={testIds:"",flags:{}};const qf=ct(()=>{try{return null!==Hf&&void 0!==Hf?Hf:__UAAS_CFG__}catch(e){return e}}),zf=e=>{if(Bf(e))return{error:e,config:Wf};try{const t=it(e)?e:JSON.parse(""+(e||"")),r=(e=>!!it(e)&&!(!("expFlags"in e)||!Gf(e.expFlags)))(t)?(e=>{const{expFlags:t}=e,r=Kf(e,["expFlags"]),n={},i={};return jf(e.expFlags,e=>{jf(e,e=>{let{CONTEXT:{FLAGS:t},TESTID:r}=e;it(t)&&jf(rt(t),e=>{var o;const a=t[e];n[e]=a,i[e]=null!==(o=i[e])&&void 0!==o?o:[],i[e].push({value:a,testId:r[0]})})})}),ft({flags:n,flagsMap:i},r)})(t):t;if(!((e,t)=>{if(!it(t))throw new Error("Parsed replaced macro is not an object: "+e);if(ut(t.testIds),!("flags"in t)||!it(t.flags))throw new Error("Parsed replaced macro has no flags field: "+e);return!0})(String(e),r))throw new Error("UAAS config is not valid: "+e);return{error:void 0,config:r}}catch(fT){return{error:fT,config:Wf}}},Xf=ct(()=>zf(qf())),Qf=(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++){const o=e[i];t.call(r,o,i,e)&&n.push(o)}return n},Jf=e=>it(e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__),Zf=(e,t)=>{e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__=t},$f=[].find,ep=ht($f)?(e,t)=>$f.call(e,t):(e,t)=>{for(let r=0;r<e.length;r++){const n=e[r];if(t(n,r,e))return n}};let tp=document.currentScript;if(!tp){const e=me(document.getElementsByTagName("script"));tp=ep(e,Jf),tp||(tp=e[e.length-1])}const rp=tp;let np;try{np={build:9279,code:[{id:9279,percent:100}]}}catch(pT){np={}}const ip=np.build,op="VAS",ap=e=>gt(String(e%Math.pow(10,4)),4,"0"),sp=rp?rp.src:"",lp="AdSDKLoader"===Mf;class dp{constructor(e,t){Object.defineProperty(this,"vasUaasConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abFlags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"initialAbFlags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"activeTestIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"initialActiveTestIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"activeFlags",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"getFlagValueAndActivateTestId",{enumerable:!0,configurable:!0,writable:!0,value:e=>{const t=this.abFlags[e],r=this.vasUaasConfig.flagsMap,n=this.vasUaasConfig.testIds;return n&&r&&r[e]&&jf(r[e],r=>{let{value:i,testId:o}=r;if(i===t){const t=ep(n.split(";"),e=>0===e.indexOf(o));t&&(a=this.activeTestIds,s=t,-1===a.indexOf(s))&&(this.activeTestIds.push(t),this.activeFlags.add(e))}var a,s}),t}}),Object.defineProperty(this,"getActiveTestIds",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.activeTestIds}),Object.defineProperty(this,"isTestIdActivated",{enumerable:!0,configurable:!0,writable:!0,value:e=>this.activeFlags.has(e)}),Object.defineProperty(this,"__setAbFlags",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.abFlags=e}}),Object.defineProperty(this,"__restoreAbFlags",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.abFlags=this.initialAbFlags}}),Object.defineProperty(this,"__setActiveTestIds",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.initialActiveTestIds=this.activeTestIds,this.activeTestIds=e}}),Object.defineProperty(this,"__restoreActiveTestIds",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.activeTestIds=this.initialActiveTestIds}}),this.vasUaasConfig=e,this.abFlags=t,this.initialAbFlags=t}getNumberFlagValueAndActivateTestId(e){const t=this.getFlagValueAndActivateTestId(e),r=Number(t);return ie(r)?r:void 0}}const cp=Ze(document.documentElement),{length:up}=cp,hp=up>0?cp[up-1].ownerDocument.defaultView:window,fp=(function(e){let t=e;const r=[e],{top:n}=e;for(;t!==n;)t=t.parent,r.push(t)}(window),at(window,"adsdkdebug")),pp=Boolean(fp),gp=at(window,"adsdktracelogs"),vp=(Boolean(gp),Ac({propertyName:"DEBUG_LOG_GLOBAL_CALLBACK_PROPERTY_NAME",win:window}),function(){var e,t,r,n,i,o,a;const l=rp?rp.__AD_SDK_SCRIPT_SESSION_PARAMETERS__:void 0;rp&&(e=>{delete e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__})(rp);const d=(e=>{let t;return{rootFields:nt(()=>(e=>{if(it(e)){const t={},{vsid:r,contentPlayerVersion:n,pcodeVersion:i,widgetVersion:o}=e;if(et(r)&&(t.vsid=r),et(n)&&(t.contentPlayerVersion=n),et(i)&&(t.pcodeVersion=i),et(o)&&(t.widgetVersion=o),rt(t).length>0)return t}return})(e),e=>{t=e})||void 0,extractionError:t}})(null===l||void 0===l?void 0:l.STATS_ROOT_PARAMS),{config:c,parsingError:u}=function(e){let t,r=(null===e||void 0===e?void 0:e.VAS_UAAS_CONFIG)||Wf;try{const e=Xf();if(e.error)throw e.error;r=e.config}catch(pT){t=pT}return{config:r,parsingError:t}}(l),h=sp?se(sp).hostname:void 0,{src_domain:f}=c,p=lp&&("an"===f||h===xf)||(null===l||void 0===l?void 0:l.LOADER_LOADED_FROM_AN_YANDEX_RU),g=function(e,t){var r;const n=e.flags,i=null!==(r=null===t||void 0===t?void 0:t.AB_FLAGS)&&void 0!==r?r:{};0;const o=de(location.search).adsdkabflags,a=at(hp,"adsdkabflags"),l=null!==o&&void 0!==o?o:a,d=s(l)?function(e,t,r){let n=0;arguments.length<3&&(n=1,r=e[0]);for(;n<e.length;n++)r=t(r,e[n],n,e);return r}(l.split(","),(e,t)=>{const[r,n]=t.split("=");return mt(mt({},e),{[r]:n})},{}):{};return mt(mt(mt(mt({},{}),n),i),d)}(c,l),v=(null===l||void 0===l?void 0:l.AB_FLAGS_STORE)||new dp(c,g);v.getFlagValueAndActivateTestId("ADSDKVER");const m=(null===(e=null===d||void 0===d?void 0:d.rootFields)||void 0===e?void 0:e.vsid)||(null===l||void 0===l?void 0:l.VSID)||function(e){void 0===e&&(e=ip);return[Y(44),op,ap(e),gt(Date.now().toString().slice(0,10),10,"0")].join("x")}();vt(((null===(t=null===d||void 0===d?void 0:d.rootFields)||void 0===t?void 0:t.vsid)||(null===l||void 0===l?void 0:l.VSID)?"Use VSID from session":"Generate new VSID")+" ["+m+"]");const E=(null===l||void 0===l?void 0:l.SID)||Y(64);vt(((null===l||void 0===l?void 0:l.SID)?"Use existing SID":"Generate new SID")+" ["+E+"]");const y=null!==(r=null===l||void 0===l?void 0:l.VAS_USER_SESSION_RANDOM)&&void 0!==r?r:hd(),A=(null===l||void 0===l?void 0:l.ICOOKIE)||c.iCookie,S=(null===l||void 0===l?void 0:l.AdditionalStatsRootFields)||d.rootFields||void 0,T=(null===l||void 0===l?void 0:l.TEST_IDS)||(null===c||void 0===c?void 0:c.testIds)||void 0,R=null!==(n=Et(v.getFlagValueAndActivateTestId("VAS_IMPORTANT_EVENTS_DEFAULT_SAMPLING_RATIO")))&&void 0!==n?n:1,_=null!==(i=Et(v.getFlagValueAndActivateTestId("VAS_USUAL_EVENTS_DEFAULT_SAMPLING_RATIO")))&&void 0!==i?i:.01,w=null!==(o=Et(v.getFlagValueAndActivateTestId("VAS_EVENTS_MILLI_SAMPLING_RATIO")))&&void 0!==o?o:.001,b=pp||c.isInternalNetwork||!1,P=b?R:_,I=b?R:w;return{SID:E,VSID:m,VAS_USER_SESSION_RANDOM:y,AB_FLAGS:g,AB_FLAGS_STORE:v,ICOOKIE:A,TEST_IDS:T,VAS_UAAS_CONFIG:c,VAS_UAAS_CONFIG_ParseError:u,AdditionalStatsRootFields:S,AdditionalStatsRootFieldsExtractionError:d.extractionError,LOADER_LOADED_FROM_AN_YANDEX_RU:p,STATS_ROOT_PARAMS:null!==(a=null===l||void 0===l?void 0:l.STATS_ROOT_PARAMS)&&void 0!==a?a:{},LOG_PROBABILITY_FOR_IMPORTANT_EVENTS:R,LOG_PROBABILITY_FOR_DEFAULT_EVENTS:_,LOG_PROBABILITY_MILLI_VALUE:w,LOG_PROBABILITY:P,LOG_PROBABILITY_MILLI:I,IS_DEBUG_LOG_TO_STATS_ENABLED:b,isRumEnabledByLogProbability:!1}}()),mp=(vp.AB_FLAGS_STORE,vp.VSID,vp.SID);let Ep;const yp=e(8139),Ap="DEFAULT_ERROR_MESSAGE",Sp=0,Tp="",Rp="?:?:?",_p=!0;class wp extends Error{constructor(e,t){void 0===t&&(t={});const r="object"===typeof e?e:{message:String(e||Ap)};super(),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isFatal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toJSON",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),yp(this,wp.prototype),this.message=t.message||r.message||Ap,this.code=t.code||r.code||r.id||Sp,this.isFatal=Boolean(function(e){const[t]=Qf(e,e=>void 0!==e);return t}([t.isFatal,r.isFatal,_p])),this.details=t.details||r.details||Tp;const n=t.stack||r.stack||function(e){const{url:t,line:r,col:n,fileName:i,columnNumber:o,lineNumber:a}=e;return(t||i||"?")+":"+(r||a||"?")+":"+(n||o||"?")}(r);let i=n===Rp?this.stack:n;if(i&&i!==Rp)this.stack=i;else if(!this.stack)try{throw new Error(this.message)}catch(pT){this.stack=i=pT.stack||Rp}this.toString=()=>yt(this.toJSON()),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,stack:i})}}class bp extends wp{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={});const r=t.message||e.message,n=t.code||e.code;super(e,At(At({},t),{message:"AdSDK Error ["+n+"]"+(r?"["+r+"]":"")}))}}class Pp{constructor(e){Object.defineProperty(this,"dispatch",{enumerable:!0,configurable:!0,writable:!0,value:ct(e=>{this.value=e,this._isDispatched=!0,function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Gf(e)&&jf(e,e=>{"function"===typeof e&&e(...r)})}(this.callbacks,e),this.callbacks.length=0})}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isDispatched",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),(0,Wl.m)(e)&&this.callbacks.push(e)}subscribe(e){return this._isDispatched?(e(this.value),St):(this.callbacks.push(e),()=>{this.callbacks=Qf(this.callbacks,t=>t!==e)})}getDispatched(){return this._isDispatched}getValue(){return this.value}wait(){return new Promise(e=>{this.subscribe(e)})}}const Ip=e=>{const t=new Pp;return{promise:new Promise((r,n)=>{e({resolve:r,reject:n,subscribeForTeardown:e=>{t.subscribe(e)}})}),teardown:()=>t.dispatch(void 0)}},Op=200,Cp=_f(window);Ac({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class kp{constructor(e){let{defaultProbability:t,rnd:r,vsid:n}=e;Object.defineProperty(this,"rnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vsid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultProbability",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:e=>{let{error:t,getTagsAndLabels:r}=e;this.push({eventName:String(t.code),eventType:"error",eventData:t,probability:1,getTagsAndLabels:r})}}),this.rnd=r,this.vsid=n,this.defaultProbability=t}event(e){let{name:t,probability:r,data:n,getTagsAndLabels:i}=e;this.push({eventType:"event",eventName:t,probability:r,eventData:n,getTagsAndLabels:i})}push(e){let{eventType:t,eventName:r,probability:n=this.defaultProbability,eventData:i,getTagsAndLabels:o}=e;if(this.rnd<n){const e="https://log.strm.yandex.ru/log?"+t+"="+r,{tags:n,labels:a}="function"===typeof o?o(t,r):{tags:{},labels:{}},s=JSON.stringify({service:"VAS",eventType:t,eventName:r,rnd:this.rnd,vsid:this.vsid,data:i,tags:wt({[t+"_"+r]:1},n),labels:wt({},a),topLocation:Tt(document).location});0;if(function(e,t){return!!Cp&&window.navigator.sendBeacon(e,t)}(e,s))return;_t({url:e,data:s,method:"POST"})}}}const Dp=pp||vp.VAS_UAAS_CONFIG.isInternalNetwork||!1?1:.05,Np=e=>{var t,r,n;const i=null===(n=null===(r=null===(t=e.ya)||void 0===t?void 0:t.videoAd)||void 0===r?void 0:r.getBundleVersion)||void 0===n?void 0:n.call(r),o=parseInt(null!==i&&void 0!==i?i:"",10);if(It(o))return o},Lp=e=>{let{win:t,moduleName:r,vasLoaderUrl:n,scriptSessionParams:i,resolve:o,reject:a,subscribeForTeardown:s,loaderFunctionsStatsWrapper:l}=e;const{promise:d,teardown:c}=(e=>{let{win:t,vasLoaderUrl:r,scriptSessionParams:n}=e;const i=Np(t);if(void 0!==i)return{promise:Promise.resolve({resolveType:"Preloaded Loader",version:i,loadTry:void 0}),teardown:St};const{promise:o,teardown:a}=Ip(e=>{let{resolve:i,reject:o,subscribeForTeardown:a}=e,s=!1,l=0;a(()=>{s=!0}),g({src:r,win:t,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{l++,Zf(e,n),s?Pt(e):a(()=>{Pt(e)})},onLoad:()=>i({loadTry:l}),onError:e=>o(e)})});return{promise:o.then(e=>{let{loadTry:r}=e;const n=Np(t);return void 0===n?{resolveType:"none",version:void 0,loadTry:void 0}:{resolveType:"Loaded Loader",version:n,loadTry:r}}),teardown:a}})({vasLoaderUrl:n,win:t,scriptSessionParams:i});s(c),d.then(e=>{let{version:n}=e;if(void 0===n)l.error({error:new bp({code:"LOAD_VAS_MODULE_CANNOT_RESOLVE_VERSION",details:{}})}),a(new bp({code:"VAS_LOADER_FUNCTION_CANNOT_RESOLVE_VERSION",details:{}}));else{const{promise:e,teardown:n}=(e=>{let{win:t,moduleName:r}=e;var n,i;const o=null===(i=null===(n=t.ya)||void 0===n?void 0:n.videoAd)||void 0===i?void 0:i.loadModule;return"function"===typeof o?Ip(e=>{let{resolve:t,reject:n,subscribeForTeardown:i}=e;const a=o(r);i(()=>n(new Error("Teardown was called"))),a.then(t).catch(n)}):{promise:Promise.reject(new bp({code:"VAS_LOADER_FUNCTION_NO_GLOBAL_LOAD_MODULE_FN",details:{}})),teardown:St}})({win:t,moduleName:r});s(n),e.then(o).catch(a)}}).catch(a)},Mp={subpageIndex:P(),deltas:{}};var Vp=e(5809);var xp=e(4957),Fp=function(){return Math.random().toString(36).substring(7).split("").join(".")},Up={INIT:"@@redux/INIT"+Fp(),REPLACE:"@@redux/REPLACE"+Fp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Fp()}};var Bp=function(e){return"@@redux-saga/"+e},Hp=Bp("CANCEL_PROMISE"),jp=Bp("CHANNEL_END"),Yp=Bp("IO"),Gp=Bp("MATCH"),Kp=Bp("MULTICAST"),Wp=Bp("SAGA_ACTION"),qp=Bp("SELF_CANCELLATION"),zp=Bp("TASK"),Xp=Bp("TASK_CANCEL"),Qp=Bp("TERMINATE"),Jp=Bp("LOCATION"),Zp=function(e){return null===e||void 0===e},$p=function(e){return null!==e&&void 0!==e},eg=function(e){return"function"===typeof e},tg=function(e){return"string"===typeof e},rg=Array.isArray,ng=function(e){return e&&eg(e.then)},ig=function(e){return e&&eg(e.next)&&eg(e.throw)},og=function e(t){return t&&(tg(t)||lg(t)||eg(t)||rg(t)&&t.every(e))},ag=function(e){return e&&eg(e.take)&&eg(e.close)},sg=function(e){return eg(e)&&e.hasOwnProperty("toString")},lg=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};const dg=function(e,t){var r;void 0===t&&(t=!0);var n=new Promise((function(n){r=setTimeout(n,e,t)}));return n[Hp]=function(){clearTimeout(r)},n};var cg=function(e){return function(){return e}}(!0),ug=function(){};var hg=function(e){return e},fg=("function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator,function(e,t){qt(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(r){e[r]=t[r]}))}),pg=function(e){throw e},gg=function(e){return{value:e,done:!0}},vg=function(e){return Array.apply(null,new Array(e))},mg=function(e){return function(t){return e(Object.defineProperty(t,Wp,{value:!0}))}},Eg=function(e){return e===Qp},yg=function(e){return e===Xp},Ag=function(e){return Eg(e)||yg(e)},Sg=function(e){return er(e,4)},Tg=function(e,t){var r;return(r={})[Yp]=!0,r.combinator=!1,r.type=e,r.payload=t,r},Rg=or.bind(null,dg);const _g=cr;var wg,bg=[],Pg=0,Ig=function(e){return function(t){return e.some((function(e){return mr(e)(t)}))}},Og=function(e){return function(t){return e(t)}},Cg=function(e){return function(t){return t.type===String(e)}},kg=function(e){return function(t){return t.type===e}},Dg=function(){return cg},Ng={type:jp},Lg=function(e){return e&&e.type===jp},Mg=0,Vg=function(){return++Mg},xg=((wg={}).TAKE=function(e,t,r){var n=t.channel,i=void 0===n?e.channel:n,o=t.pattern,a=t.maybe,s=function(e){e instanceof Error?r(e,!0):!Lg(e)||a?r(e):r(Qp)};try{i.take(s,$p(o)?mr(o):null)}catch(l){return void r(l,!0)}r.cancel=s.cancel},wg.PUT=function(e,t,r){var n=t.channel,i=t.action,o=t.resolve;hr((function(){var t;try{t=(n?n.put:e.dispatch)(i)}catch(fT){return void r(fT,!0)}o&&ng(t)?Ar(t,r):r(t)}))},wg.ALL=function(e,t,r,n){var i=n.digestEffect,o=Mg,a=Object.keys(t);if(0!==a.length){var s=Jt(t,r);a.forEach((function(e){i(t[e],o,s[e],e)}))}else r(rg(t)?[]:{})},wg.RACE=function(e,t,r,n){var i=n.digestEffect,o=Mg,a=Object.keys(t),s=rg(t)?vg(a.length):{},l={},d=!1;a.forEach((function(e){var t=function(t,n){d||(n||Ag(t)?(r.cancel(),r(t,n)):(r.cancel(),d=!0,s[e]=t,r(s)))};t.cancel=ug,l[e]=t})),r.cancel=function(){d||(d=!0,a.forEach((function(e){return l[e].cancel()})))},a.forEach((function(e){d||i(t[e],o,l[e],e)}))},wg.CALL=function(e,t,r,n){var i=t.context,o=t.fn,a=t.args,s=n.task;try{var l=o.apply(i,a);if(ng(l))return void Ar(l,r);if(ig(l))return void br(e,l,s.context,Mg,Zt(o),!1,r);r(l)}catch(fT){r(fT,!0)}},wg.CPS=function(e,t,r){var n=t.context,i=t.fn,o=t.args;try{var a=function(e,t){Zp(e)?r(t):r(e,!0)};i.apply(n,o.concat(a)),a.cancel&&(r.cancel=a.cancel)}catch(fT){r(fT,!0)}},wg.FORK=function(e,t,r,n){var i=t.context,o=t.fn,a=t.args,s=t.detached,l=n.task,d=function(e){var t=e.context,r=e.fn,n=e.args;try{var i=r.apply(t,n);if(ig(i))return i;var o=!1;return Xt((function(e){return o?{value:e,done:!0}:(o=!0,{value:i,done:!ng(i)})}))}catch(a){return Xt((function(){throw a}))}}({context:i,fn:o,args:a}),c=function(e,t){return e.isSagaIterator?{name:e.meta.name}:Zt(t)}(d,o);fr((function(){var t=br(e,d,l.context,Mg,c,s,void 0);s?r(t):t.isRunning()?(l.queue.addTask(t),r(t)):t.isAborted()?l.queue.abort(t.error()):r(t)}))},wg.JOIN=function(e,t,r,n){var i=n.task,o=function(e,t){if(e.isRunning()){var r={task:i,cb:t};t.cancel=function(){e.isRunning()&&zt(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(rg(t)){if(0===t.length)return void r([]);var a=Jt(t,r);t.forEach((function(e,t){o(e,a[t])}))}else o(t,r)},wg.CANCEL=function(e,t,r,n){var i=n.task;t===qp?Sr(i):rg(t)?t.forEach(Sr):Sr(t),r()},wg.SELECT=function(e,t,r){var n=t.selector,i=t.args;try{r(n.apply(void 0,[e.getState()].concat(i)))}catch(fT){r(fT,!0)}},wg.ACTION_CHANNEL=function(e,t,r){var n=t.pattern,i=Er(t.buffer),o=mr(n),a=function t(r){Lg(r)||e.channel.take(t,o),i.put(r)},s=i.close;i.close=function(){a.cancel(),s()},e.channel.take(a,o),r(i)},wg.CANCELLED=function(e,t,r,n){r(n.task.isCancelled())},wg.FLUSH=function(e,t,r){t.flush(r)},wg.GET_CONTEXT=function(e,t,r,n){r(n.task.context[t])},wg.SET_CONTEXT=function(e,t,r,n){var i=n.task;fg(i.context,t),r()},wg),Fg=null,Ug=[],Bg=function(e){e.crashedEffect=Fg,Ug.push(e)},Hg=function(){Fg=null,Ug.length=0},jg=function(){var e=Ug[0],t=Ug.slice(1),r=e.crashedEffect?function(e){var t=$t(e);return t?t.code+"  "+Tr(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+Rr(e.meta)+(r?" \n when executing effect "+r:"")].concat(t.map((function(e){return"    created by "+Rr(e.meta)})),[_r(Ug)]).join("\n")};const Yg=function(e){function t(e){var t=e.getState,n=e.dispatch;return r=Pr.bind(null,qt({},d,{context:o,channel:s,dispatch:n,getState:t,sagaMonitor:l})),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var r=e(t);return s.put(t),r}}}var r,n=void 0===e?{}:e,i=n.context,o=void 0===i?{}:i,a=n.channel,s=void 0===a?yr():a,l=n.sagaMonitor,d=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(n,["context","channel","sagaMonitor"]);return t.run=function(){return r.apply(void 0,arguments)},t.setContext=function(e){fg(o,e)},t};var Gg=function(e){return{done:!0,value:e}},Kg={};const Wg=Le("PING_STRM_AND_RECOVER_BY_ONLINE"),qg={inStreamPlayingState:void 0,adConfig:void 0,adInfo:void 0,originalBroadcastAdCueId:void 0,originalBroadcastAdCues:{},adblockDetected:!1,hasPreroll:!1,adSyncInit:!1,nextAdInfo:void 0,nativeAdControlsVisibility:!0},zg=Z(0),Xg=X(Z(5)),Qg="0000000000000000000000000000000000000000000000000000000000000000";let Jg,Zg;!function(e){e.init="init",e.waitForUserPlay="waitForUserPlay",e.waitForDocumentVisibility="waitForDocumentVisibility",e.starting="starting",e.started="started",e.broken="broken",e.destroyed="destroyed"}(Jg||(Jg={})),function(e){e.Detached="Detached",e.Attaching="Attaching",e.Attached="Attached"}(Zg||(Zg={}));const $g={autoplay:!1,initialAutoplay:!1,allowMuted:!0,autoplayImpossible:!1,startStage:Jg.init,preload:!0,from:void 0,encoderState:Zg.Detached,vsid:Qg,streams:[],stream:void 0,sourceParams:void 0,sourceId:0,volume:1,muted:!1,userVolume:NaN,duration:Z(NaN),currentTime:zg,currentTimeLowGranularity:zg,watchedTime:Z(0),startPosition:{},programDateTime:void 0,fragmentDuration:Xg,dvrStartTime:Z(0),dvrDuration:Z(NaN),videoType:void 0,playingState:gd.PAUSE,bufferingRanges:[],preview:Wc,isFullscreen:!1,isPip:!1,isVisible:void 0,togglePlaybackOnVisibilityChangeSetting:void 0,errorInfo:{},lastRecoverPosition:void 0,isOnline:!0,isDocumentVisible:!0,lastKnownBandwidthEstimate:{value:NaN,source:"default"},isAbrSupported:!1,isAbrEnabled:!1,defaultQuality:void 0,feed:!1,videoTrackValue:void 0,videoTracks:[],userVideoTrackName:void 0,userVideoTrackHeight:void 0,audioTrackValue:void 0,audioTracks:[],userAudioTrackName:void 0,userAudioTrackLang:void 0,textTrackEnabled:!1,nativeTextTrackVisible:void 0,textTrackValue:void 0,textTracks:[],userTextTrackEnabled:void 0,userTextTrackLang:void 0,userTextTrackName:void 0,playbackRate:1,expectedStalled:xr(Eu.Init,void 0),videoWidth:$(0),videoHeight:$(0),playerConfig:void 0,preloadDetails:void 0},ev=function(e,t){let r=e[t];if(!n(r)){const n=r;try{delete e[t],r=e[t],e[t]=n}catch(pT){}}return r}(Object,"create")?Object.create:function(e,t){function r(){}if(r.prototype=e,(0,Ql.K)(t))for(const n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new r},tv=e=>e instanceof Date||"Date"===(0,pc.M)(e),rv=function e(t,r){void 0===r&&(r={preserveConstructors:!0});let n=t;if(vc(t)){return t.map(t=>e(t,r))}return tv(t)?new Date(t.getTime()):(!(0,Wl.m)(t)&&(0,Ql.K)(t)&&(n=r.preserveConstructors?ev(t):{},U(t,(t,i)=>{n[i]=e(t,r)})),n)};let nv,iv;!function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(nv||(nv={})),function(e){e.INIT="INIT",e.SET_SOURCE="SET_SOURCE"}(iv||(iv={}));const ov=5e3,av=["strm.yandex.net","strm.yandex.ru","strm-ott.akamaized.net","media.strm.yandex.net","cdn.ngenix.net","streaming.tst.strm.yandex.net"],sv=Z(300);let lv=Z(0);const dv=2e3,cv=document.createElement("a"),uv={},hv=1e3,fv={reason:"recoverStreamByReturnToOnline",delay:0,rawData:0},pv=Z(10),gv=Gc(),vv=gv?.25:.02,mv=[mu.midroll,mu.postroll,mu.preroll];let Ev,yv;const Av=["ewma","hlsjs","yabro"];let Sv;!function(e){e.OK="OK",e.SLOW="SLOW",e.UNKNOWN="UNKNOWN"}(Sv||(Sv={}));const Tv=["ts","m4s","m4f"],Rv=e=>{let{fragDuration:t,downloadTime:r}=e;return r>.9*t},_v=e=>{let{fragDuration:t,timings:r}=e;const n=r.filter(e=>{const{name:t,duration:r,encodedBodySize:n,decodedBodySize:i,transferSize:o}=e;if(void 0===t||void 0===r)return!1;const a=Number(n||i||o);return!(isNaN(a)||a<1024)&&-1!==Tv.indexOf(pe(t).toLowerCase())}).slice(-5).map(e=>{let{duration:t}=e;return t});if(0===n.length)return Sv.UNKNOWN;const i=(a=.33,0===(o=n).length?0:o.reduce((e,t)=>bc(Ic(e,a),Ic(t,1-a)),o[0]));var o,a;return Rv({fragDuration:t,downloadTime:i})?Sv.SLOW:Sv.OK},wv=Z(1);var bv=e(6394),Pv=e(6048),Iv=e.n(Pv);const Ov=15e3,Cv=Le("SKIN_PUT_USE_NATIVE_SUBTITLES");var kv=e(5264);const Dv={hiddenControls:[],useNativeSubtitles:!1,nativeControlsVisibility:!0,skinDVRStartTime:Z(0),skinDVRDuration:Z(0)},Nv={min:0,max:1/0},Lv={min:1,max:1/0},Mv={min:0,max:1};let Vv;!function(e){e.ApiPlay="ApiPlay",e.VolumeChange="VolumeChange",e.MuteChange="MuteChange"}(Vv||(Vv={}));const xv="other",Fv={from:xv,reqid:void 0,hash:void 0,vsid:Qg},Uv={startPosition:{},additionalParams:Fv,adConfig:void 0,withCredentials:!1,loop:!1,preview:"",videoInfo:{}},Bv=-1;var Hv=e(8533),jv=e.n(Hv);const Yv={name:(t=>{Tu.i18nLang||(Tu.i18nLang="ru");const r=Tu.i18nLang;if(!(0,Wl.m)(Tu.i18nTranslateEngine)){const t=e(7050)("./"+r+".ts");(0,Hv.setI18nLang)(r),Tu.i18nTranslateEngine=jv()(ui({},t))}return Tu.i18nTranslateEngine(t)})("TRACK_AUTO"),value:"auto",bitrate:Bv};let Gv,Kv,Wv,qv;!function(e){e.VideoIsNotPausedOnInit="VideoIsNotPausedOnInit",e.DetectByInterval="DetectByInterval",e.VideoPlayEvent="VideoPlayEvent",e.PlayCallback="PlayCallback"}(Gv||(Gv={})),function(e){e.NATIVE="NATIVE",e.HLS="HLS",e.MPD="MPD",e.MP4="MP4",e.YANDEX="YANDEX",e.YASP="YASP"}(Kv||(Kv={})),function(e){e.firstNetworkAdSDK="first.network.adsdk",e.firstNetworkHls="first.network.hls",e.firstNetworkMpd="first.network.mpd",e.firstNetworkMp4="first.network.mp4",e.firstNetworkNative="first.network.native",e.firstNetworkYandex="first.network.yandex",e.firstNetworkYasp="first.network.yasp",e.firstNetworkAdSDKHls="first.network.adsdk.hls",e.firstNetworkAdSDKMpd="first.network.adsdk.mpd",e.firstNetworkAdSDKMp4="first.network.adsdk.mp4",e.firstNetworkAdSDKNative="first.network.adsdk.native",e.firstNetworkAdSDKYandex="first.network.adsdk.yandex",e.firstNetworkAdSDKYasp="first.network.adsdk.yasp",e.setSourceNetworkAdSDK="setsource.network.adsdk",e.setSourceNetworkHls="setsource.network.hls",e.setSourceNetworkMpd="setsource.network.mpd",e.setSourceNetworkMp4="setsource.network.mp4",e.setSourceNetworkNative="setsource.network.native",e.setSourceNetworkYandex="setsource.network.yandex",e.setSourceNetworkYasp="setsource.network.yasp",e.setSourceNetworkAdSDKHls="setsource.network.adsdk.hls",e.setSourceNetworkAdSDKMpd="setsource.network.adsdk.mpd",e.setSourceNetworkAdSDKMp4="setsource.network.adsdk.mp4",e.setSourceNetworkAdSDKNative="setsource.network.adsdk.native",e.setSourceNetworkAdSDKYandex="setsource.network.adsdk.yandex",e.setSourceNetworkAdSDKYasp="setsource.network.adsdk.yasp"}(Wv||(Wv={})),function(e){e.firstLoadSource="firstloadsource",e.yaFirstFrameDecodedMp4="ya.firstframedecoded.mp4",e.yaFirstFrameDecodedMpd="ya.firstframedecoded.mpd",e.yaFirstFrameDecodedHls="ya.firstframedecoded.hls",e.yaFirstFrameDecodedYandex="ya.firstframedecoded.yandex",e.yaFirstFrameDecodedYasp="ya.firstframedecoded.yasp",e.yaFirstFrameDecodedNative="ya.firstframedecoded.native",e.yaFirstFrameDecodedAdSDK="ya.firstframedecoded.adsdk",e.yaFirstFrameShownMp4="ya.firstframeshown.mp4",e.yaFirstFrameShownMPD="ya.firstframeshown.mpd",e.yaFirstFrameShownHls="ya.firstframeshown.hls",e.yaFirstFrameShownYandex="ya.firstframeshown.yandex",e.yaFirstFrameShownYasp="ya.firstframeshown.yasp",e.yaFirstFrameShownNative="ya.firstframeshown.native",e.yaFirstFrameShownAdSDK="ya.firstframeshown.adsdk",e.autoplayFalse="autoplayfalse",e.firstStartAdSDKFailed="firststart.adsdk.failed",e.firstStartAdSDK="firststart.adsdk",e.firstStartYandex="firststart.yandex",e.firstStartYasp="firststart.yasp",e.firstStartHls="firststart.hls",e.firstStartMp4="firststart.mp4",e.firstStartMpd="firststart.mpd",e.firstStartNative="firststart.native",e.firstStartAdSDKYandex="firststart.adsdk.yandex",e.firstStartAdSDKYasp="firststart.adsdk.yasp",e.firstStartAdSDKHls="firststart.adsdk.hls",e.firstStartAdSDKMpd="firststart.adsdk.mpd",e.firstStartAdSDKMp4="firststart.adsdk.mp4",e.firstStartAdSDKNative="firststart.adsdk.native"}(qv||(qv={}));const zv=["reason"],Xv={[Kv.HLS]:qv.firstStartHls,[Kv.MPD]:qv.firstStartMpd,[Kv.MP4]:qv.firstStartMp4,[Kv.NATIVE]:qv.firstStartNative,[Kv.YANDEX]:qv.firstStartYandex,[Kv.YASP]:qv.firstStartYasp,AD:qv.firstStartAdSDK},Qv={[Kv.HLS]:qv.firstStartAdSDKHls,[Kv.MPD]:qv.firstStartAdSDKMpd,[Kv.MP4]:qv.firstStartAdSDKMp4,[Kv.NATIVE]:qv.firstStartAdSDKNative,[Kv.YANDEX]:qv.firstStartAdSDKYandex,[Kv.YASP]:qv.firstStartAdSDKYasp,AD:qv.firstStartAdSDK},Jv={[Kv.HLS]:qv.yaFirstFrameDecodedHls,[Kv.MPD]:qv.yaFirstFrameDecodedMpd,[Kv.MP4]:qv.yaFirstFrameDecodedMp4,[Kv.NATIVE]:qv.yaFirstFrameDecodedNative,[Kv.YANDEX]:qv.yaFirstFrameDecodedYandex,[Kv.YASP]:qv.yaFirstFrameDecodedYasp,AD:qv.yaFirstFrameDecodedAdSDK},Zv={[Kv.HLS]:qv.yaFirstFrameShownHls,[Kv.MPD]:qv.yaFirstFrameShownMPD,[Kv.MP4]:qv.yaFirstFrameShownMp4,[Kv.NATIVE]:qv.yaFirstFrameShownNative,[Kv.YANDEX]:qv.yaFirstFrameShownYandex,[Kv.YASP]:qv.yaFirstFrameShownYasp,AD:qv.yaFirstFrameShownAdSDK},$v={[Kv.HLS]:Wv.firstNetworkHls,[Kv.MPD]:Wv.firstNetworkMpd,[Kv.MP4]:Wv.firstNetworkMp4,[Kv.NATIVE]:Wv.firstNetworkNative,[Kv.YANDEX]:Wv.firstNetworkYandex,[Kv.YASP]:Wv.firstNetworkYasp,AD:Wv.firstNetworkAdSDK},em={[Kv.HLS]:Wv.firstNetworkAdSDKHls,[Kv.MPD]:Wv.firstNetworkAdSDKMpd,[Kv.MP4]:Wv.firstNetworkAdSDKMp4,[Kv.NATIVE]:Wv.firstNetworkAdSDKNative,[Kv.YANDEX]:Wv.firstNetworkAdSDKYandex,[Kv.YASP]:Wv.firstNetworkAdSDKYasp,AD:Wv.firstNetworkAdSDK},tm={[Kv.HLS]:Wv.setSourceNetworkHls,[Kv.MPD]:Wv.setSourceNetworkMpd,[Kv.MP4]:Wv.setSourceNetworkMp4,[Kv.NATIVE]:Wv.setSourceNetworkNative,[Kv.YASP]:Wv.setSourceNetworkYandex,[Kv.YANDEX]:Wv.setSourceNetworkYasp,AD:Wv.setSourceNetworkAdSDK},rm={[Kv.HLS]:Wv.setSourceNetworkAdSDKHls,[Kv.MPD]:Wv.setSourceNetworkAdSDKMpd,[Kv.MP4]:Wv.setSourceNetworkAdSDKMp4,[Kv.NATIVE]:Wv.setSourceNetworkAdSDKNative,[Kv.YANDEX]:Wv.setSourceNetworkAdSDKYandex,[Kv.YASP]:Wv.setSourceNetworkAdSDKYasp,AD:Wv.setSourceNetworkAdSDK};let nm=-1;const im={sourceStart:!1,yaFirstFrameDecoded:!1,yaFirstFrameShown:!1},om={onCurrentTimeChange:d,onDrmSystemChange:d,onDVRStartTimeChange:d,onDVRDurationChange:d,onVolumeChange:d,onStateChange:d,onAdStateChange:d,onBeforeAdPodStart:d,onAdPodStart:d,onAdPodSkip:d,onAdPodEnd:d,onFullScreenChange:d,onError:d,onRecover:d,onVideoTrackChange:d,onAudioTrackChange:d,onTextTrackChange:d,onThumbnailTileGeneralMetaInfoChange:d,onVideoTracksChange:d,onAudioTracksChange:d,onTextTracksChange:d,onSubtitlesChange:d,onVideoTypeChange:d,onPlaybackRateChange:d,onOriginalBroadcastAdStateChange:d,onAdblockDetected:d,onChangeStream:d,onContentImpression:d,onResourcesIdle:d,onVisualStateChange:d,onBufferingRangesChange:d,onStartStageChange:d,onVideoSizeChange:d,onVideoClickerEvent:d,logEvent:d,onNextAdRemainingTimeChange:d,onAdSDKVersionDefined:d,onStreamsWithSupportInfoChange:d,onEngineChange:d,onNetworkStatusChange:d,onAdSkippableStateChange:d,onAdPodCloseStateChange:d,onAdPodDurationChange:d,onAdPodCurrentTimeChange:d,onAdPodTimeToSkipChange:d,onAdVolumeAvailabilityStateChange:d,onAdInteraction:d,onBandwidthEstimateChange:d};let am,sm,lm,dm;!function(e){e.Internal="internal",e.Api="api",e.Cache="cache"}(am||(am={})),function(e){e.ON="ON",e.OFF="OFF"}(sm||(sm={})),function(e){e.setSource="setSource",e.destroy="destroy",e.end="end"}(lm||(lm={})),function(e){e.SetMuted="SetMuted",e.SetVolume="SetVolume",e.RequestAutoplaySettings="RequestAutoplaySettings",e.VolumeChangeEvent="VolumeChangeEvent",e.RestoreSavedMuted="RestoreSavedMuted"}(dm||(dm={}));const cm=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},um=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent,r=t.indexOf("Android");return-1===r?-1:parseFloat(t.slice(r+8))}(),hm=Hl?function(e,t){return void 0===t&&(t=Bl),Boolean(t.canPlayType(e).replace(/no/,""))}:()=>!1,fm=hm("application/vnd.apple.mpegurl")||um>=4.4;let pm;!function(e){e.NO_MSE="NO_MSE",e.NO_CODECS="NO_CODECS",e.NO_SUPPORTED_DRM="NO_SUPPORTED_DRM",e.NO_SUPPORTED_FORMAT="NO_SUPPORTED_FORMAT",e.INVALID_STREAM_URL="INVALID_STREAM_URL"}(pm||(pm={}));const gm={supported:!1,noSupportReason:pm.NO_MSE},vm={supported:!1,noSupportReason:pm.NO_CODECS},mm={supported:!1,noSupportReason:pm.NO_SUPPORTED_DRM},Em={supported:!1,noSupportReason:pm.NO_SUPPORTED_FORMAT},ym={supported:!1,noSupportReason:pm.INVALID_STREAM_URL},Am=["yandex.ru","yandex.net","yastatic.net","yandex-team.ru","kinopoisk.ru","strm-ott.akamaized.net"],Sm=function(e){void 0===e&&(e=window);const t=e.MediaSource||e.WebKitMediaSource;return t&&(0,Wl.m)(t.isTypeSupported)&&!function(e){void 0===e&&(e=window);const t=e.SourceBuffer||e.WebKitSourceBuffer;return!!t&&!(t.prototype&&(0,Wl.m)(t.prototype.appendBuffer)&&(0,Wl.m)(t.prototype.remove))}(e)?t:void 0}();var Tm=e(2741);const Rm={getItem(e){try{return Tm.ZP.getItem(e)}catch(t){return null}},setItem(e,t){try{Tm.ZP.setItem(e,t)}catch(r){}},removeItem(e){try{Tm.ZP.removeItem(e)}catch(t){}},clear(){try{Tm.ZP.clear()}catch(e){}}},_m=function(e){return void 0===e&&(e=window),/YaBrowser/.test(m(e))},wm=_m(),bm="detect.probe_mse_support.success",Pm=2592e5,Im=ne(()=>{if(void 0===Sm)return Promise.reject(new Error("MSE is not supported"));if(function(){if(!wm)return!1;try{return void 0!==window.top.WEB_NTP_VERSION}catch(e){return!1}}())return Promise.resolve(Sm);C(bm),C("detect.probe_mse_support.fail");if(function(){try{const e=Rm.getItem("videoplayer-supported-mse");if(null===e)return;const{value:t,time:r,version:n}=JSON.parse(e);if(Date.now()-r>Pm)return void Rm.removeItem("videoplayer-supported-mse");if("1"!==n)return;return t||void 0}catch(e){return}}())return k(bm),Promise.resolve(Sm);const e=document.createElement("video"),t=new Sm,r=URL.createObjectURL(t);let n,i;const o=new Promise((o,a)=>{n=()=>{o(Sm);try{Rm.setItem("videoplayer-supported-mse",JSON.stringify({value:!0,time:Date.now(),version:"1"}))}catch(e){}},i=()=>a(new Error("MSE is not supported")),t.addEventListener("sourceopen",n),e.addEventListener("error",i),e.addEventListener("durationchange",i),e.src=r});return o.then(()=>k(bm)).catch(()=>k("detect.probe_mse_support.fail")).then(()=>{URL.revokeObjectURL(r),t.removeEventListener("sourceopen",n),e.removeEventListener("error",i),e.removeEventListener("durationchange",i)}),o});t(Im());const Om=function(e){return void 0===e&&(e=window),m(e).toLowerCase().indexOf("tizen")>-1}(),Cm=function(e){void 0===e&&(e=window);const t=ki(e);return 2===t.major&&3===t.minor}(),km=(function(e){void 0===e&&(e=window);const t=ki(e);2===t.major&&t.minor}(),function(e){void 0===e&&(e=window);const t=m(e).toLowerCase();return/yandexstation.*yandexio/.test(t)||/station.*crosswalk/.test(t)}()),Dm=/Smart.?TV|PlayStation/i.test(navigator.userAgent);class Nm{static isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)}static isSafariDesktop(){return gv&&!$c}static setDeviceType(e){this.deviceType=e}static isSmartTV(){return"SMART_TV"===this.deviceType||Dm}static canPlayHlsOnNative(){return this.isSmartTV()||fm}}Nm.deviceType=void 0;const Lm={supported:!0,engine:Kv.NATIVE},Mm={supported:!0,engine:Kv.HLS};let Vm;const xm=(e,t)=>e===t,Fm=function(e){return void 0===e&&(e=window),/Chrome/.test(e.navigator.userAgent)&&/Google Inc/.test(e.navigator.vendor)&&!_m(e)}(),Um=function(e){return void 0===e&&(e=window),/firefox/.test(e.navigator.userAgent.toLowerCase())}(),Bm=function(e){void 0===e&&(e=window);const t=m(e).toLowerCase();return/linux/.test(t)&&!Ae(e)}(),Hm=function(e){return void 0===e&&(e=window),/YandexSearch|YaSearchBrowser|YaApp_iOS|YaApp_Android/i.test(m(e))};let jm;!function(e){e.fairplay="fairplay",e.playready="playready",e.widevine="widevine"}(jm||(jm={}));const Ym="com.apple.fps.1_0",Gm="com.apple.fps.2_0",Km={[jm.fairplay]:["com.apple.fairplay",Ym,Gm],[jm.widevine]:["com.widevine.alpha"],[jm.playready]:["com.microsoft.playready"]},Wm=function(e){return[].concat.apply([],e)}(Li(Km));let qm,zm;!function(e){e.YandexBrowserLinux="YandexBrowserLinux",e.OldYandexBrowser="OldYandexBrowser",e.WebKitMediaKeys="WebKitMediaKeys",e.requestMediaKeySystemAccess="requestMediaKeySystemAccess",e.MSMediaKeys="MSMediaKeys",e.GenerateKeyRequest="GenerateKeyRequest",e.Constant="Constant",e.NotAvailable="NotAvailable",e.LiteMode="LiteMode"}(qm||(qm={}));const Xm=[],Qm=2592e5;let Jm;const Zm=ne(async e=>{let{video:t}=e;const r=function(){try{const e=Rm.getItem("videoplayer-supported-drm-systems");if(null===e)return;const{value:t,time:r,version:n}=JSON.parse(e);if(Date.now()-r>Qm)return void Rm.removeItem("videoplayer-supported-drm-systems");if("05a6069ff0f1cd2b0868d2a73d1ffd02"!==n)return void Rm.removeItem("videoplayer-supported-drm-systems");if(0===t.supportedDrmSystems.length)return;return t}catch(e){return}}();C("detect.drm");const n=r||await async function(e){void 0===zm&&(zm=ji(e));const t=await zm;return xi({},t,{supportedDrmSystems:[...t.supportedDrmSystems]})}({video:t});return Xm.forEach(e=>e(n)),Xm.length=0,Jm=n,void 0===r&&function(e){if(0!==e.supportedDrmSystems.length)try{Rm.setItem("videoplayer-supported-drm-systems",JSON.stringify({value:e,time:Date.now(),version:"05a6069ff0f1cd2b0868d2a73d1ffd02"}))}catch(t){}}(n),k("detect.drm"),n.supportedDrmSystems}),$m=document.createElement("video"),eE={supported:!0,engine:Kv.MPD},tE=2592e5;let rE;const nE=function(e){if(void 0===e&&(e=window),gv&&e.navigator&&e.navigator.userAgent){const t=e.navigator.userAgent.match(/version\/(\d+)/i);if(t){const e=Number(t[1]);if(e)return e}}return-1}(),iE=function(e){return void 0===e&&(e=window),ge(e)&&m(e).toLowerCase().indexOf("iphone")>-1}(),oE=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad/.test(t)&&ge(e)}(),aE={destroy:d,setStatsRootFields:d,dispatchEvent:d,getNextAdInfo:()=>{},preroll:{loadViewers:()=>Promise.resolve([])},midroll:{loadViewers:()=>Promise.resolve([])},inroll:{loadViewers:()=>Promise.resolve([]),schedule:d},postroll:{loadViewers:()=>Promise.resolve([])},postPauseroll:{loadViewers:()=>Promise.resolve([])}},sE=[{end:0,name:"invalid"},{end:750,name:"750)"},{end:1250,name:"[750-1250)"},{end:2e3,name:"[1250-2000)"},{end:3500,name:"[2000-3500)"},{end:5500,name:"[3500-5500)"},{end:9e3,name:"[5500-9000)"},{end:1e6,name:"[9000"},{end:1/0,name:"infinity"}],lE=[{end:0,name:"invalid"},{end:100,name:"100"},{end:250,name:"250"},{end:500,name:"500"},{end:750,name:"750"},{end:1e3,name:"1000"},{end:1500,name:"1500"},{end:2500,name:"2500"},{end:5e3,name:"5000"},{end:1/0,name:"infinity"}];class dE{constructor(e){this.length=e,this.list=[]}push(e){this.list.length>=this.length&&this.list.shift(),this.list.push(e)}getAll(){return this.list}clear(){this.list.length=0}copy(){const e=new dE(this.length);return e.list=this.list.slice(),e}}class cE extends Sc{constructor(e){super(),this.history=new dE(100),this.addDestroyHandler(T(e,"logposted",e=>{Su.log("chrome://media-internals event",e.data),this.history.push(e.data)})),this.addDestroyHandler(()=>{this.history=null})}getHistory(){return this.history?[...this.history.getAll()]:["MediaInternalsHistory is destroyed"]}}class uE extends su{constructor(){super(),this.once("Destroy",T(window,"online",()=>{this.emit("Online")})),this.once("Destroy",T(window,"offline",()=>{this.emit("Offline")}))}destroy(){this.emit("Destroy")}}const hE={setItem(e,t){try{sessionStorage.setItem(e,t)}catch(pT){}},getItem(e){try{return sessionStorage.getItem(e)}catch(pT){return null}},removeItem(e){try{sessionStorage.removeItem(e)}catch(pT){}}};class fE{constructor(){this.videoContentId=void 0,this.lastProgress=void 0}setVideoContentId(e){this.lastProgress=void 0,this.videoContentId=e}clearVideoContentId(){this.lastProgress=void 0,this.videoContentId=void 0}getProgress(){if(!this.videoContentId)return;const e=fo(this.videoContentId);return ie(e)?Z(e):void 0}saveProgress(e){this.videoContentId&&("number"===typeof this.lastProgress&&Math.abs(this.lastProgress-e)<1||(this.lastProgress=e,po(this.videoContentId,e)))}}const pE=ne(()=>{try{return"keepalive"in new Request("")}catch(e){return!1}}),gE=()=>Ce("web_gogol_fetch_keepalive")?async function(){if("boolean"===typeof navigator.onLine&&!navigator.onLine)return new Promise(e=>{const t=()=>{window.removeEventListener("online",t),e()};window.addEventListener("online",t)})}():void 0,vE=new RegExp("^https?:\\/\\/([^\\/]+\\.)?("+["strm-ott\\.akamaized\\.net","akamai\\.strm\\.yandex\\.net","(an|strm)\\.yandex\\.(ru|net)","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru"].join("|")+")\\/(?!log|perf|jstracer|ping)"),mE={perfLogUrl:"https://log.strm.yandex.ru/perf",updateInterval:3e4,urlRegexp:vE};class EE{static clearResourceTimings(){"function"===typeof performance.clearResourceTimings?performance.clearResourceTimings():"function"===typeof performance.webkitClearResourceTimings&&performance.webkitClearResourceTimings()}constructor(e){let{perfLogUrl:t=mE.perfLogUrl,updateInterval:r=mE.updateInterval,urlRegexp:n=mE.urlRegexp}=void 0===e?{}:e;this.timeoutId=void 0,this.history=[],this.reportUrl=void 0,this.updateInterval=void 0,this.urlRegexp=void 0,this.reportUrl=t,this.updateInterval=r,this.urlRegexp="string"===typeof n?new RegExp(n):n,EE.isSupported&&this.loop()}destroy(){clearTimeout(this.timeoutId)}async updateInfo(){if(!EE.isSupported)return;const e=this.getCurrentResourcesTimings();if(EE.clearResourceTimings(),0===e.length)return;this.history.push(...e),this.history.length>200&&this.history.splice(0,this.history.length-200);go({url:he(this.reportUrl,{perfnow:String(Date.now()),navstart:String(void 0!==performance.timeOrigin?performance.timeOrigin:performance.timing.navigationStart)},{saveOriginalPath:!0}),data:JSON.stringify(e)})}getCurrentResourcesTimings(){if(!EE.isSupported)return[];return performance.getEntriesByType("resource").filter(e=>{let{name:t}=e;return this.urlRegexp.test(t)&&t!==this.reportUrl})}getLastResourcesTimings(){return this.history}getAllResourcesTimings(){return[...this.getLastResourcesTimings(),...this.getCurrentResourcesTimings()]}loop(){this.updateInterval<=0||(this.timeoutId=window.setTimeout(async()=>{await this.updateInfo(),this.loop()},this.updateInterval))}}EE.isSupported=window.performance&&"function"===typeof window.performance.getEntriesByType&&("function"===typeof performance.clearResourceTimings||"function"===typeof performance.webkitClearResourceTimings);const yE={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"0"};class AE{constructor(e){let{parentElement:t,ignorePointerEvents:r,visibleOnInit:n}=e;this.slotWrapper=void 0,this.slotElement=void 0,this.ignorePointerEvents=void 0,this.ignorePointerEvents=r,this.slotWrapper=t.ownerDocument.createElement("div"),M(this.slotWrapper,yE),this.setVisible(n),r&&(this.slotWrapper.style.pointerEvents="none"),this.slotElement=t.ownerDocument.createElement("div"),M(this.slotElement,yE),this.slotWrapper.appendChild(this.slotElement),t.appendChild(this.slotWrapper)}setVisible(e){this.slotWrapper.style.opacity=e?"1":"0",this.slotWrapper.style.pointerEvents=e&&!this.ignorePointerEvents?"auto":"none"}remove(){o(this.slotWrapper)}getElement(){return this.slotElement}}const SE=n(Object.getPrototypeOf)?e=>Object.getPrototypeOf(e):e=>e.__proto__||Object.prototype;var TE=e(8139),RE=e.n(TE);class _E extends AE{constructor(e){super(e),this.videoElement=void 0;const{videoElement:t}=e;this.videoElement=t;const r=function(e){const t=SE(e);return t?()=>{SE(e)!==t&&RE()(e,t)}:d}(t);this.slotElement.appendChild(t),r()}getVideoElement(){return this.videoElement}}class wE{constructor(e){this.adElement=void 0,this.originalVideoSlot=void 0,this.skinSlot=void 0,this.adElementsSetObjects=[],this.visibleSlotsSet=void 0;const{parentElement:t,adElement:r,originalVideoElement:n}=e;this.adElement=r,this.originalVideoSlot=new _E({videoElement:n,parentElement:t,ignorePointerEvents:!1,visibleOnInit:!0}),this.skinSlot=new AE({parentElement:t,ignorePointerEvents:!0,visibleOnInit:!0}),this.showSkinAndOriginalVideo()}getSkinElement(){return this.skinSlot.getElement()}clearAdSlots(){this.adElementsSetObjects.forEach(e=>{let{adSlot:t,videoSlot:r}=e;t.remove(),r!==this.originalVideoSlot&&r.remove()}),this.adElementsSetObjects.length=0}showSkinAndOriginalVideo(){this.setVisibleSlotsSet({videoSlot:this.originalVideoSlot,htmlSlot:this.skinSlot}),this.clearAdSlots()}showAdElementsSet(e){const t=this.adElementsSetObjects.find(t=>t.adElementsSet===e);t&&this.setVisibleSlotsSet({videoSlot:t.videoSlot,htmlSlot:t.adSlot})}createAdElementsSet(e){let{adType:t}=e;const r=new AE({parentElement:this.adElement,ignorePointerEvents:!1,visibleOnInit:!1}),n={videoSlotElement:this.originalVideoSlot.getVideoElement(),adSlotElement:r.getElement()};return this.adElementsSetObjects.push({videoSlot:this.originalVideoSlot,adSlot:r,adElementsSet:n}),n}setVisibleSlotsSet(e){let{videoSlot:t,htmlSlot:r}=e;this.visibleSlotsSet&&(r!==this.visibleSlotsSet.htmlSlot&&this.visibleSlotsSet.htmlSlot.setVisible(!1),t!==this.visibleSlotsSet.videoSlot&&this.visibleSlotsSet.videoSlot.setVisible(!1)),t.setVisible(!0),r.setVisible(!0),this.visibleSlotsSet={videoSlot:t,htmlSlot:r}}}var bE=e(6197);const PE=jd(window),IE=Z(5),OE={timeout:5e3,baseDelay:100,backoffFactor:1,fuzzFactor:.5},CE={drm:{retryParameters:To({},OE,{timeout:1e4,maxAttempts:3})},manifest:{availabilityWindowOverride:1/0,retryParameters:To({},OE,{timeout:8e3,maxAttempts:5}),dash:{ignoreMinBufferTime:!0,autoCorrectDrift:!1,ignoreEmptyAdaptationSet:!0,targetLatency:5}},streaming:{rebufferingGoal:.3,jumpLargeGaps:!0,retryParameters:To({},OE,{timeout:1e4})}};var kE,DE;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ETHERNET=1]="ETHERNET",e[e.WIFI=2]="WIFI",e[e.CELL_2G=3]="CELL_2G",e[e.CELL_3G=4]="CELL_3G"}(kE||(kE={})),function(e){e.BLUETOOTH="bluetooth",e.CELLULAR="cellular",e.ETHERNET="ethernet",e.MIXED="mixed",e.NONE="none",e.OTHER="other",e.UNKNOWN="unknown",e.WIFI="wifi",e.WIMAX="wimax"}(DE||(DE={}));const NE=1e6,LE=1e5;const ME=e(5135).b?9e5:864e5;class VE{constructor(e){this.alpha=void 0,this.estimate=0,this.totalWeight=0,this.setHalfLife(e)}sample(e,t){const r=Math.pow(this.alpha,e),n=t*(1-r)+r*this.estimate;isNaN(n)||(this.estimate=n,this.totalWeight+=e)}getEstimate(){const e=1-Math.pow(this.alpha,this.totalWeight);return this.estimate/e}setHalfLife(e){this.alpha=Math.exp(Math.log(.5)/e)}}const xE={fast:2,slow:5},FE={fast:1,slow:2};class UE{constructor(){this.fast=void 0,this.slow=void 0,this.bytesSampled=0,this.fast=new VE(xE.fast),this.slow=new VE(xE.slow)}sample(e,t,r){if(void 0===r&&(r=!1),e<=0||t<(r?2e3:16e3))return;this.setHalfLife(r?FE:xE);let n=8e3*t/e;const i=e/1e3;this.bytesSampled+=t,this.fast.sample(i,n),this.slow.sample(i,n)}getBandwidthEstimate(e){return this.hasGoodEstimate()?{value:this.getCurrentEstimate(),source:"ewma"}:e}hasGoodEstimate(){return this.bytesSampled>=128e3}getCurrentEstimate(){return Math.min(this.fast.getEstimate(),this.slow.getEstimate())}setHalfLife(e){this.fast.setHalfLife(e.fast),this.slow.setHalfLife(e.slow)}}const BE=[...["sendReportLog","setSource","preloadSource","requestVideoElementFullscreen","requestDebugInfo","destroy","requestExternalPlay","requestExternalPlayerList","insertInto","play"],...["setVideoTrack","setAudioTrack","setTextTrack","changeAdditionalParams","exitVideoElementFullscreen","setPlaybackRate","setMuted","setVolume","setPictureInPictureAllowed","setVideoStyle","setNativeControlsVisibility","setNativeTextTrackVisibility","logEvent","logError","seek","openReportWindow","playInrollAd","skipAdPod","setNativeAdControlsVisibility","setFeed","pause","on","once","off","publicEmit"],"getState","getReadyState"],HE=window;HE.Ya||(HE.Ya={}),HE.Ya.playerApi||(HE.Ya.playerApi={}),HE.Ya.playerApi.METHODS||(HE.Ya.playerApi.METHODS=BE);window.Ya.playerApi;const jE=window.Ya.playerApi,YE="https://yastatic.net/yandex-video-player-iframe-api-bundles/hlsjs/0.12.2-1761-1846-1976_tmp-2080-2095-2146-2171-2-2172-2232_tmp-2427-2498/hls.min.js",GE="https://yastatic.net/yandex-video-player-iframe-api-bundles/shaka/2.5.17-yandex-patched-fix-ttml-parsing/shaka-player.compiled.js",KE=ne(()=>shaka.polyfill.installAll());let WE;const qE=[4320,2880,2160,1440,1080,720,480,360,240,144,0],zE=qE.reduce((e,t)=>(e[t]=t,e),Object.create(null));class XE{constructor(){this.previousVariantIndex=void 0,this.lastDowngradedVariantIndex=void 0,this.getTimeSinceDowngrade=()=>1/0}filter(e){if(0===e.length)return e;let t=e.length-1;return this.isDowngrading(t)&&(this.lastDowngradedVariantIndex=t+1,this.getTimeSinceDowngrade=oe()),void 0!==this.lastDowngradedVariantIndex&&this.getTimeSinceDowngrade()<1e4&&(t=this.lastDowngradedVariantIndex-1),this.previousVariantIndex=t,e.slice(0,t+1)}reset(){this.getTimeSinceDowngrade=()=>1/0,this.previousVariantIndex=void 0,this.lastDowngradedVariantIndex=void 0}isDowngrading(e){return void 0!==this.previousVariantIndex&&this.previousVariantIndex>e}}class QE{constructor(e){this.bandwidthEstimator=new UE,this.config=void 0,this.enabled=!1,this.originalShakaVariants=[],this.props=void 0,this.startupComplete=!1,this.switchCallback=d,this.variants=[],this.switchHistoryRule=new XE,this.props=e}init(e){this.switchCallback=e}configure(e){this.config=e}stop(){this.enabled=!1,this.switchCallback=d,this.variants=[],this.switchHistoryRule.reset()}getBandwidthEstimate(){const e=this.bandwidthEstimator.getBandwidthEstimate({value:this.config.defaultBandwidthEstimate,source:this.config.defaultBandwidthEstimateSource});return{value:bc(e.value,this.props.bandwidthEstimateOffset),source:e.source}}getMaxCapAllowedVideoTrack(){const{restrictions:e}=this.props.getFilterParams(this.variants),t=this.variants.filter(Mo);if(0===t.length)return;const r=Vo(t,e);return r[r.length-1].video}enable(){this.enabled=!0}disable(){this.enabled=!1}getVariants(){return this.variants}setVariants(e){Iv()(e,this.originalShakaVariants)||(this.originalShakaVariants=e,this.variants=xo([...e].sort((e,t)=>e.bandwidth-t.bandwidth)),this.switchHistoryRule.reset())}chooseVariant(){const{preloadedVariant:e,restrictions:t}=this.props.getFilterParams(this.variants);if(e)return e;let r=function(e,t,r){if(e.length<=1)return e;let n=0;const i=Math.max(r,1);for(let o=1;o<e.length;o++){const r=e[o],a=e[o+1]||{bandwidth:1/0},s=r.bandwidth/.95*i,l=a.bandwidth/.85*i;t>=s&&t<=l&&(n=o)}return e.slice(0,n+1)}(this.variants,this.getBandwidthEstimate().value,this.props.getPlaybackRate());r=this.switchHistoryRule.filter(r),r=Vo(r,t);return No(r.slice().reverse(),e=>{var t;return(null==e||null==(t=e.audio)?void 0:t.bandwidth)||0})||null}segmentDownloaded(e,t){this.bandwidthEstimator.sample(e,t,this.props.isLowLatencyLive()),this.enabled&&this.suggestStreams()}suggestStreams(){if(!this.startupComplete){if(!this.bandwidthEstimator.hasGoodEstimate())return;this.startupComplete=!0}const e=this.chooseVariant();this.switchCallback(e)}}const JE={maxWidth:$(1/0),maxHeight:$(1/0),width:$(1/0),height:$(1/0)};class ZE{constructor(e){this.props=e}getAbrRestrictions(){if(!this.props.getState().controller.isAbrEnabled)return JE;const e=this.props.getCapSizes();if(void 0===e)return JE;const{width:t,height:r,maxHeight:n,maxWidth:i}=e,o=function(e){if(void 0===e)return;const t=e.querySelector('SupplementalProperty[schemeIdUri="urn:mpeg:yandex:capping:maxheight"]');if(!t)return;const r=$(parseInt(t.getAttribute("value")||"",10));return r>0?{maxHeight:r}:void 0}(this.props.getManifestXml()),a=null!=o&&o.maxHeight?(null==o?void 0:o.maxHeight)+1:1/0;return{maxWidth:i,maxHeight:$(Math.min(...[a,n].filter(ie))),height:r,width:t}}}const $E=e=>e.active,ey=Z(30),ty=ey/Xg*2*2;class ry{constructor(){this.initSegments=new dE(10),this.segments=new dE(ty)}set(e,t){const{pathname:r}=se(e),n={pathname:r,response:t};Ho(e)?this.initSegments.push(n):this.segments.push(n)}get(e){const{pathname:t}=se(e),r=Ho(e)?Bo(this.initSegments,t):Bo(this.segments,t);return void 0===r?void 0:r.response}clear(){this.initSegments.clear(),this.segments.clear()}copy(){const e=new ry;return e.initSegments=this.initSegments.copy(),e.segments=this.segments.copy(),e}hasCachedData(){return this.initSegments.getAll().length>0||this.segments.getAll().length>0}}class ny{constructor(){this.serverTimestamp=void 0,this.getElapsedTimeFromServerDate=()=>0}parseServerTime(e,t){if(!e.date&&!e["x-server-time-ms"])return;let r=NaN;if(e["x-server-time-ms"]){r=new Date(parseInt(e["x-server-time-ms"],10)).getTime()}else if(e.date){r=new Date(e.date).getTime()}ie(r)&&(this.serverTimestamp=r+t/2,this.getElapsedTimeFromServerDate=oe())}getServerTime(){if(void 0!==this.serverTimestamp)return this.serverTimestamp+this.getElapsedTimeFromServerDate()}}class iy{constructor(e){let{segmentCache:t,loadedManifest:r}=void 0===e?{segmentCache:void 0,loadedManifest:void 0}:e;this.segmentCache=void 0,this.lastLoadedManifest=void 0,this.useLastLoadedManifest=!0,this.shakaPlayer=void 0,this.networkErrorHandler=void 0,this.networkSuccessHandler=void 0,this.serverTimeEstimator=void 0,this.requestFilters=[],this.strmSession=void 0,this.segmentCache=t||new ry,this.lastLoadedManifest=r,this.serverTimeEstimator=new ny}setup(e,t,r){this.shakaPlayer&&(jo(this.shakaPlayer),this.useLastLoadedManifest=!0),this.shakaPlayer=e,this.networkSuccessHandler=t,this.networkErrorHandler=r;const n=this.customNetPluginFactory(window.shaka),i=e.getNetworkingEngine();null==i||i.registerScheme("http",n),null==i||i.registerScheme("https",n)}destroy(){this.requestFilters.length=0,this.segmentCache.clear(),this.shakaPlayer&&jo(this.shakaPlayer)}hasCachedSegments(){return this.segmentCache.hasCachedData()}hasCachedData(){return this.useLastLoadedManifest&&void 0!==this.lastLoadedManifest||this.hasCachedSegments()}getCurrentVariantTrack(){return Uo(this.shakaPlayer)}copyCachedData(){return{segmentCache:this.segmentCache.copy(),loadedManifest:this.lastLoadedManifest}}getServerTime(){return this.serverTimeEstimator.getServerTime()}registerRequestFilter(e){this.requestFilters.indexOf(e)>-1||this.requestFilters.push(e)}unregisterRequestFilter(e){const t=this.requestFilters.indexOf(e);t<=-1||this.requestFilters.splice(t,1)}cacheResponse(e,t,r,n){switch(r){case e.net.NetworkingEngine.RequestType.MANIFEST:this.lastLoadedManifest=n,this.useLastLoadedManifest=!1;break;case e.net.NetworkingEngine.RequestType.SEGMENT:this.segmentCache.set(t,n)}}getCachedResponse(e,t,r){switch(r){case e.net.NetworkingEngine.RequestType.MANIFEST:const{useLastLoadedManifest:r,lastLoadedManifest:n}=this;return r&&void 0!==n?(this.useLastLoadedManifest=!1,n):void 0;case e.net.NetworkingEngine.RequestType.SEGMENT:const i=this.segmentCache.get(t);return void 0===i?void 0:i;default:return}}customNetPluginFactory(e){return(t,r,n,i)=>{const o=this.getCachedResponse(e,t,n);if(void 0!==o)return o.fromCache=!0,new e.util.AbortableOperation(Promise.resolve(o),d);switch(this.requestFilters.forEach(e=>{try{e(n,r)}catch(t){}}),n){case e.net.NetworkingEngine.RequestType.MANIFEST:void 0===this.strmSession?t=eo(t):(r.headers["x-strm-session"]=this.strmSession,r.headers["x-client-timestamp"]=String(Date.now()),t=function(e){return en(e,"t")}(t));break;case e.net.NetworkingEngine.RequestType.SEGMENT:t=eo(r.uris[0]||t)}const a=function(e){return e.net.HttpFetchPlugin.isSupported()?e.net.HttpFetchPlugin:e.net.HttpXHRPlugin}(e),s=od(),l=a(t,r,n,i);return new e.util.AbortableOperation(l.promise.then(r=>(n===e.net.NetworkingEngine.RequestType.MANIFEST&&(this.strmSession=r.headers["x-strm-session"],this.serverTimeEstimator.parseServerTime(r.headers,od()-s)),this.cacheResponse(e,t,n,r),this.networkSuccessHandler(n),r)).catch(t=>{throw t&&t.code!==e.util.Error.Code.OPERATION_ABORTED&&this.networkErrorHandler(n,t),t}),()=>l.abort())}}}const oy=function(e){const t=m(e).match(/Firefox\/([0-9]+)\./);return t&&parseInt(t[1],10)||-1}(window),ay=Z(.5);class sy extends Sc{constructor(e){super(),this.manifestXml=void 0,this.resolvePromise=d,this.rejectPromise=d,this.manifestXmlPromise=void 0;const t=e.getNetworkingEngine(),r=(e,t)=>{const r=Jo(e,t);void 0===this.manifestXml&&void 0!==r&&this.resolvePromise(r),void 0!==r&&(this.manifestXml=r)};null==t||t.registerResponseFilter(r),this.addDestroyHandler(()=>{null==t||t.unregisterResponseFilter(r),this.rejectPromise()}),e.addEventListener("unloading",this.rejectPromise)}getManifestXml(){if(!this.isDestroyed)return this.manifestXml}async waitForManifestXml(){return this.isDestroyed?Promise.reject():void 0!==this.manifestXml?Promise.resolve(this.manifestXml):(this.manifestXmlPromise||(this.manifestXmlPromise=new Promise((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})),this.manifestXmlPromise)}}class ly extends Sc{get preloaded(){if(this.isDestroyed)return"none";const e=this.getSource().sourceParams.startPosition.videoTime||Z(0),{total:t}=$i(this.getBufferedInfo(),e);return t>=Z(2)?"full":this.hasCachedSegments()?"partial":this.hasManifest()?"manifest":"none"}}class dy extends ly{constructor(e){super(),this.props=e,this.preload=ne(async()=>{if(await ko(),this.isDestroyed)throw new Error("MpdPreloader was destroyed");const e=new shaka.Player(this.videoElement);this.shakaPlayer=e,this.manifestXmlSpy=new sy(e);e.getNetworkingEngine().registerRequestFilter((t,r)=>{if(t===shaka.net.NetworkingEngine.RequestType.LICENSE)return new Promise((t,r)=>{e.addEventListener("unloading",r)});r.allowCrossSiteCredentials=this.props.source.sourceParams.withCredentials}),e.configure(this.getInitialShakaConfig()),e.addEventListener("manifestparsed",()=>{const{videoTime:t,utc:r}=this.props.source.sourceParams.startPosition,n=ie(t)||ie(r);e.isLive()&&!n&&this.destroy()});const r=new iy;r.setup(e,d,d),this.customNetworkingEngine=r;const n=new Promise((t,r)=>{let n=d;const i=()=>{n(),r(new Error("MpdPreloader: shakaPlayer unloading"))};e.addEventListener("unloading",i);const o=T(this.videoElement,"progress",()=>{const{total:r,audio:i,video:o}=e.getBufferedInfo();if(0===i.length||0===o.length)return;const{start:a,end:s}=r[0]||{},l=s-a,d=this.videoElement.duration;(IE<=bc(l,Z(.2))||d<=bc(s,Z(.2)))&&(n(),t())});n=ne(()=>{o(),e.removeEventListener("unloading",i)})});return t(Zo({shakaPlayer:e,streamUrl:this.props.source.stream.url,startPosition:this.props.source.sourceParams.startPosition})),n}),this.shakaPlayer=void 0,this.customNetworkingEngine=void 0,this.manifestXmlSpy=void 0,this.abrRestrictionsHelper=void 0,this.videoElement=document.createElement("video"),t(ko()),this.abrRestrictionsHelper=new ZE({getManifestXml:()=>{var e;return null==(e=this.manifestXmlSpy)?void 0:e.getManifestXml()},getState:this.props.getState,getCapSizes:this.props.getCapSizes}),this.addDestroyHandler(()=>{var e,t,r;null==(e=this.customNetworkingEngine)||e.destroy(),null==(t=this.manifestXmlSpy)||t.destroy(),null==(r=this.shakaPlayer)||r.destroy(),this.customNetworkingEngine=void 0,this.manifestXmlSpy=void 0,this.shakaPlayer=void 0})}getBandwidthEstimate(){var e;if(this.isDestroyed)return;const t=null==(e=this.shakaPlayer)?void 0:e.getStats();return null!=t&&t.estimatedBandwidth?{value:t.estimatedBandwidth,source:t.estimatedBandwidthSource}:void 0}getCachedVariantTrack(){return this.hasCachedSegments()?Uo(this.shakaPlayer):void 0}copyCachedData(){var e;const t=null==(e=this.customNetworkingEngine)?void 0:e.copyCachedData();return{segmentCache:null==t?void 0:t.segmentCache,loadedManifest:null==t?void 0:t.loadedManifest}}getVideoElement(){return this.videoElement}getType(){return this.props.type}getBufferedInfo(){return void 0===this.shakaPlayer?{total:[],audio:[],video:[]}:this.shakaPlayer.getBufferedInfo()}getSource(){return this.props.source}getManifestXml(){var e;return null==(e=this.manifestXmlSpy)?void 0:e.getManifestXml()}hasManifest(){var e;return void 0!==(null==(e=this.manifestXmlSpy)?void 0:e.getManifestXml())}hasCachedSegments(){var e;return Boolean(null==(e=this.customNetworkingEngine)?void 0:e.hasCachedSegments())}getInitialShakaConfig(){var e,t;const r=this.props.getState(),{stream:n}=this.props.source,i=bo(r),o=new QE({getPlaybackRate:()=>1,bandwidthEstimateOffset:null!=(e=null==(t=r.controller.playerConfig)?void 0:t.bandwidthEstimateOffset)?e:0,getSegmentDuration:()=>Wo(this.shakaPlayer),getFilterParams:e=>({preloadedVariant:void 0,restrictions:this.abrRestrictionsHelper.getAbrRestrictions()}),isLowLatencyLive:()=>!1});return $o({},CE,{abr:$o({},CE.abr,{enabled:!1},null!=i&&i.value?{defaultBandwidthEstimate:i.value,defaultBandwidthEstimateSource:i.source}:{}),abrFactory:function(){return o},drm:$o({},CE.drm,n.drmConfig),streaming:$o({},CE.streaming,{bufferingGoal:IE})})}}class cy extends Sc{get preloaded(){return"none"}constructor(e){super(),this.source=e}getSource(){return this.source}getBufferedInfo(){return{total:[],audio:[],video:[]}}async preload(){await ea(JSON.stringify({url:this.source.stream.url}))}}var uy;!function(e){e[e.MEDIA_ERR_CUSTOM=0]="MEDIA_ERR_CUSTOM",e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e[e.MEDIA_ERR_ENCRYPTED=5]="MEDIA_ERR_ENCRYPTED"}(uy||(uy={}));class hy{constructor(e){this.code=0,this.message="",this.details=void 0,"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:(0,Ql.K)(e)&&("number"===typeof e.code&&(this.code=e.code),"string"===typeof e.message&&(this.message=e.message),this.details=e.details),this.message||(this.message=uy[this.code]||"")}}var fy=e(4432),py=e.n(fy);const{isSupported:gy}=e(1673),vy=gy(),my=[401,403],{ErrorDetails:Ey}=e(7179),yy=[Ey.FRAG_LOAD_ERROR,Ey.FRAG_LOAD_TIMEOUT,Ey.FRAG_PARSING_ERROR,Ey.BUFFER_APPEND_ERROR,Ey.INTERNAL_EXCEPTION,Ey.LEVEL_LOAD_TIMEOUT,Ey.MANIFEST_LOAD_ERROR,Ey.MANIFEST_LOAD_TIMEOUT],Ay=[Ey.FRAG_LOAD_ERROR,Ey.FRAG_LOAD_TIMEOUT,Ey.FRAG_PARSING_ERROR,Ey.LEVEL_LOAD_TIMEOUT],Sy=[Ey.MANIFEST_LOAD_ERROR,Ey.MANIFEST_LOAD_TIMEOUT],Ty=[Ey.FRAG_DECRYPT_ERROR,Ey.FRAG_PARSING_ERROR,Ey.BUFFER_STALLED_ERROR,Ey.BUFFER_NUDGE_ON_STALL];let Ry;!function(e){e.LOWRES="lowres",e.HIGHRES="highres"}(Ry||(Ry={}));const _y={tiles:"com.yandex.video.thumbnail.lowres.tiles",duration:"com.yandex.video.thumbnail.lowres.duration",resolution:"com.yandex.video.thumbnail.lowres.resolution",uri:"com.yandex.video.thumbnail.lowres.uri"},wy={tiles:"com.yandex.video.thumbnail.tiles",duration:"com.yandex.video.thumbnail.duration",resolution:"com.yandex.video.thumbnail.resolution",uri:"com.yandex.video.thumbnail.uri"},by=[$(4320),$(2880),$(2160),$(1440),$(1080),$(720),$(576),$(480),$(360),$(240),$(144)],Py=Math.min(...by.slice(1).map((e,t)=>by[t]/e));let Iy;!function(e){e.WAS_WORKER_INTERNAL_ERROR="YANDEX_PLAYER_HLS_WAS_WORKER_INTERNAL_ERROR"}(Iy||(Iy={}));let Oy;!function(e){e.HasAd="HasAd",e.NoAd="NoAd",e.NoData="NoData"}(Oy||(Oy={}));const Cy=/^(\d+)x(\d+)@(\d+)$/,ky=function(){const{volume:e}=Bl;Bl.volume=0===e?1:0;const t=Bl.volume!==e;return Bl.volume=e,t}(),Dy=$(720);let Ny;!function(e){e.VideoTagPaused="VideoTagPaused",e.VideoTagPausedAfterDurationChange="VideoTagPausedAfterDurationChange",e.VideoTagPausedAfterError="VideoTagPausedAfterError",e.PauseEvent="PauseEvent",e.ProgressEvent="ProgressEvent",e.PromiseResolve="PromiseResolve",e.PromiseReject="PromiseReject",e.PlayingEvent="PlayingEvent",e.Timeout="Timeout"}(Ny||(Ny={}));const Ly={once:!0,passive:!0};class My{constructor(e){this.props=e,this.currentAttempt=0,this.recovering=!1,this.plannedTaskPromise=void 0,this.resetTimeoutId=0}get allowed(){return this.currentAttempt<this.props.maxAttempts}get started(){return this.currentAttempt>0}get attempt(){return this.currentAttempt}getState(){return this.started?sm.ON:sm.OFF}planTask(e,r){let n,{reason:i,delay:o,force:a,rawData:s}=r;if(this.recovering&&!a)return this.log("Can't plan task cause is in process of recover"),void this.props.onConcurrentRecover({reason:i,rawData:s});this.clearPlannedTask("new task planned"),this.clearResetTimeout("new task planned"),"number"===typeof o?(n=Nc(o).promise.then(d),this.log("#"+this.currentAttempt+", PLAN task, "+o+"ms, ["+i+"]",s)):(n=o,this.log("#"+this.currentAttempt+", PLAN async task, ["+i+"]",s)),t(n),n.then(()=>{if(n===this.plannedTaskPromise)return this.recovering=!0,this.currentAttempt++,this.props.onRunTask({reason:i,delay:o,rawData:s,attempt:this.currentAttempt}),this.log("#"+this.currentAttempt+", RUN task, ["+i+"]",s),this.clearPlannedTask(),e()}).catch(e=>{this.log("Error while recover",e),this.props.onRecoverError({reason:i,rawData:s},e)}).then(()=>{this.recovering=!1}),this.plannedTaskPromise=n}isRecovering(){return this.recovering}planReset(e){let{reason:t,delay:r}=e;this.log("plan RESET, "+r+"ms, if ["+t+"]"),this.clearResetTimeout("new reset planned"),this.resetTimeoutId=window.setTimeout(()=>{this.reset(t)},r)}destroy(){this.reset("destroy")}reset(e){this.props.onReset(),this.log("RESET because of ["+e+"]"),this.clearPlannedTask(),this.clearResetTimeout(),this.currentAttempt=0}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Su.log("RecoverHelper:",...t)}clearPlannedTask(e){e&&this.log("CLEAR planned TASKS because of ["+e+"]"),this.plannedTaskPromise=void 0}clearResetTimeout(e){e&&this.log("CLEAR planned RESET because of ["+e+"]"),0!==this.resetTimeoutId&&(clearTimeout(this.resetTimeoutId),this.resetTimeoutId=0)}}class Vy extends su{destroy(){this.emit("Destroy"),this.off("Destroy"),Object.keys(this.handlers).forEach(e=>{this.off(e)}),Object.keys(this.onceHandlers).forEach(e=>{this.off(e)})}}class xy extends Vy{constructor(e,t){super();let r={videoWidth:e.videoWidth,videoHeight:e.videoHeight};const n=()=>{const{videoWidth:n,videoHeight:i}=e;isNaN(n)||isNaN(i)||n<1||i<1||r.videoWidth===n&&r.videoHeight===i||(r={videoWidth:n,videoHeight:i},t({videoWidth:n,videoHeight:i}))};if("onresize"in e)e.addEventListener("resize",n),this.once("Destroy",()=>e.removeEventListener("resize",n));else{e.addEventListener("timeupdate",n),this.once("Destroy",()=>e.removeEventListener("timeupdate",n));const t=setInterval(n,1e3);this.once("Destroy",()=>clearInterval(t))}}}const Fy=$(360);var Uy=e(8024),By=e.n(Uy);const Hy={droppedVideoFrames:0,corruptedVideoFrames:0,totalVideoFrames:0},jy=$(360);class Yy{constructor(e){void 0===e&&(e={}),this.timeMeasurer=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.totalDecodedFrames=0,this.totalDroppedFrames=0,this.lastVideoWidth=void 0,this.lastVideoHeight=void 0,this.maxWidth=1/0,this.maxHeight=1/0,this.props=void 0,this.props=e}setRestrictions(e,t){var r,n;e>=this.maxWidth&&t>=this.maxHeight||t<jy||(this.maxWidth=e,this.maxHeight=t,Su.warn("FPSController changed restrictions: "+e+"\xd7"+t+"."),null==(r=(n=this.props).onRestrictionsChange)||r.call(n,{decodedFrames:this.totalDecodedFrames,droppedFrames:this.totalDroppedFrames,maxWidth:e,maxHeight:t}))}getRestrictions(){return{maxWidth:this.maxWidth,maxHeight:this.maxHeight}}update(e){if(!e.videoWidth||!e.videoHeight)return;const t=Xa(e);this.checkFPS($(e.videoWidth),$(e.videoHeight),t.totalVideoFrames,t.droppedVideoFrames)}checkFPS(e,t,r,n){!this.timeMeasurer||!r||this.lastVideoWidth!==e||this.lastVideoHeight!==t||r<this.lastDecodedFrames?(this.timeMeasurer=oe(),this.totalDecodedFrames=0,this.totalDroppedFrames=0):(this.totalDroppedFrames+=n-this.lastDroppedFrames,this.totalDecodedFrames+=r-this.lastDecodedFrames,this.timeMeasurer()>5e3&&this.totalDroppedFrames>.25*this.totalDecodedFrames&&this.setRestrictions(e,t)),this.lastDecodedFrames=r,this.lastDroppedFrames=n,this.lastVideoWidth=e,this.lastVideoHeight=t}}const Gy=ne(()=>Ce("web_prefer_hd"));let Ky=function(){try{return JSON.parse(Rm.getItem("videoplayer-prefer-hd")||"{}")}catch(fT){return{}}}();class Wy{constructor(e,t){this.win=e,this.callback=t,this.started=!1,this.intervalId=0,this.getDiff=oe()}start(){this.started||(this.started=!0,this.getDiff=oe(),this.intervalId=this.win.setInterval(()=>{const e=this.getDiff();this.getDiff=oe(),this.callback(e)},100))}stop(){this.started&&(this.started=!1,this.win.clearInterval(this.intervalId))}}const qy=null===Bl.onwaiting,zy=!qy||rc||Kc?(e,t)=>{let r=0,n=!1;return z(()=>{const i=e.currentTime,o=e.duration;if(!e.paused){const e=r+.004;n?i>e&&(t(!1),n=!1):i<e&&i!==o&&(t(!0),n=!0)}r=i})}:(e,t)=>{let r=!1;const n=T(e,"waiting",()=>{r||(r=!0,t(!0))},{passive:!0}),i=T(e,"playing",()=>{r&&(r=!1,t(!1))},{passive:!0}),o=T(e,"canplay",()=>{r&&(r=!1,t(!1))},{passive:!0});return()=>{n(),i(),o()}},Xy=Z(0),Qy=Z(15),Jy=Z(15);class Zy extends su{get state(){return this.playerStore.getState()}get fragDuration(){return this.getFragmentsData().fragmentDuration}get isDestroyed(){return this.destroyed}constructor(e){var t;super(),this.props=e,this.engine=void 0,this.recoverHelper=void 0,this.video=void 0,this.wasPausedAfterQualityChanged=!1,this.currentTextTrack=void 0,this.withCredentials=!1,this.playerStore=void 0,this.currentState=void 0,this.videoTrackLabels=new Map,this.previousScreenshotBlobUrl=void 0,this.destroy=ne(()=>(this.destroyed=!0,this.destroyUnsafe())),this.destroyed=!1,this.tickController=void 0,this.fpsController=new Yy({onRestrictionsChange:e=>{this.props.logEvent({event:"FPSControllerRestrictions",params:e})}}),this.currentSubtitles=[],this.bandwidthEstimateUpdateInterval=null,this.preventPauseState=void 0,this.playDeferred=void 0,this.isPauseHandlerCalled=void 0,this.restoreUserTracks=()=>{this.restoreUserTextTrack(),this.restoreUserAudioTrack(),this.restoreUserVideoTrack()},this.refreshSubtitles=()=>{try{if(!this.video)return;const e=this.getCurrentTextTrack(),t=e?me(e.activeCues).filter(e=>e&&e.text).map(e=>{let{text:t}=e;return t}):[];Iv()(this.currentSubtitles,t)||(this.currentSubtitles=t,this.props.onSubtitlesChange(t))}catch(fT){this.props.onError(new gu(fT,{code:Ad.REFRESH_SUBTITLES_ERROR,isFatal:!1}))}},this.disableSubtitlesNative=()=>{this.video&&Ka(this.video.textTracks).forEach(e=>{e&&(e.mode="disabled")})},this.emptySubtitles=()=>{this.currentSubtitles.length>0&&(this.currentSubtitles=[],this.props.onSubtitlesChange([]))},this.handleConcurrentRecover=e=>{this.props.logEvent({event:"ConcurrentRecoverCalled",params:e})},this.handleRecoverError=(e,t)=>{this.props.onError(new gu({code:Ad.RECOVER_TASK_ERROR,isFatal:!1,details:e,stack:null==t?void 0:t.stack}))},this.setMaxListeners(42),this.isPauseHandlerCalled=this.props.video.paused,this.recoverHelper=new My({maxAttempts:null!=(t=e.maxRecoverAttempts)?t:10,onRunTask:this.props.onRecover,onReset:()=>this.playerStore.dispatch(Nh(void 0)),onConcurrentRecover:this.handleConcurrentRecover,onRecoverError:this.handleRecoverError}),this.on("Destroy",()=>this.recoverHelper.destroy());const{video:r,playerStore:n,sourceParams:i}=this.props;this.video=r,this.playerStore=n,this.setLoop(Boolean(e.sourceParams.loop)),this.withCredentials=Boolean(e.sourceParams.withCredentials),this.setPoster(i.preview),this.updateNativeControlsVisibility();const o=this.playerStore.getState().controller.preload||$c;r.setAttribute("preload",o?"auto":"none");const a=T(r,"loadstart",()=>this.video.style.opacity="1");this.on("Destroy",a),this.tickController=new Wy(window,e=>{try{this.onTick(e)}catch(fT){this.props.onError(new gu(fT,{code:Ad.ON_TICK_ERROR,isFatal:!1}))}}),this.on("Destroy",()=>this.tickController.stop()),this.on("InternalPlayingStateChange",this.updateBufferGoal),Promise.resolve().then(()=>{this.initInternalSubscribe()})}initInternalSubscribe(){this.on("VideoPlayingStateChange",e=>{if(e!==gd.END||cn(this.state)){if(e===gd.PLAY&&!cn(this.state)){const e=this.fragDuration<=2*Xg?1e3*this.fragDuration:1e3*Xg;this.recoverHelper.planReset({delay:e,reason:"no new errors for "+e+"ms"})}}else this.recoverHelper.reset("onPlayingStateChange ["+gd.END+"]")}),this.on("InternalPlayingStateChange",e=>{const{encoderState:t}=this.state.controller;(t===Zg.Attaching||t===Zg.Attached)&&this.currentState!==e&&(this.isBufferingOnPreload(e)||this.currentState===gd.END&&this.video.paused||(this.currentState=e,this.emit("VideoPlayingStateChange",e)))}),this.on("CurrentTimeChange",e=>{const t=this.getDuration(),{videoType:r}=this.state.controller;e>=t&&t>0&&r===Uc.VOD&&!this.props.sourceParams.loop&&this.emit("InternalPlayingStateChange",gd.END)}),this.on("InternalVideoTrackValueChange",Ha(e=>{this.emit("VideoTrackValueChange",e)})),this.on("InternalAudioTrackValueChange",Ha(e=>{this.emit("AudioTrackValueChange",e)})),this.on("InternalTextTrackValueChange",Ha(e=>{this.emit("TextTrackValueChange",e)})),this.subscribeYabroRum(),this.addVideoEventListener(null===this.video.onplaying?"playing":"play",()=>this.handleVideoElementPlayEvent()),this.addVideoEventListener("loadedmetadata",()=>{this.emit("DurationChange",this.getDuration())}),this.addVideoEventListener("play",()=>{this.isPauseHandlerCalled=!1}),this.addVideoEventListener("seeked",()=>{this.emit("Seeked")});let e=this.video.playbackRate;this.addVideoEventListener("ratechange",()=>{const t=this.video.playbackRate,r=this.state.controller.playbackRate;if(e===t)return;const n=e;e=t,cn(this.state)||this.recoverHelper.isRecovering()||0===t||t===r||(0===n&&t!==r?this.setPlaybackRate(r):t!==this.state.controller.playbackRate&&this.playerStore.dispatch(Ch(t)))}),this.addVideoEventListener("pause",()=>this.onPause()),this.addVideoEventListener("progress",()=>{cn(this.state)||this.emit("BufferingRangesChange",function(e){const t=[];for(let r=0;r<e.buffered.length;r++)t.push({start:Z(e.buffered.start(r)),end:Z(e.buffered.end(r))});return function(e){const t=e.map(e=>{let{start:t,end:r}=e;return{start:t,end:r}}).sort((e,t)=>e.start-t.start);if(t.length<=1)return t;const r=[t[0]];return t.slice(1).forEach((e,t)=>{const n=r[r.length-1];n.end<e.start?r.push(e):n.end<e.end&&(n.end=e.end)}),r}(t)}(this.props.video))}),this.addVideoEventListener("canplay",()=>{this.emit("CanPlay",void 0)}),this.addVideoEventListener("ended",()=>{const{videoType:e}=this.playerStore.getState().controller;e===Uc.VOD||void 0===e?this.emit("InternalPlayingStateChange",gd.END):this.video.paused&&Su.warn('Pause stream after "ended" event on LIVE stream')}),this.addVideoEventListener("loadeddata",()=>{this.emit("LoadedData",void 0)}),this.addVideoEventListener("error",e=>this.onVideoTagError(e)),this.handleSubtitles(),this.addVideoEventListener("timeupdate",()=>{cn(this.state)||this.state.controller.playingState===gd.PAUSE||this.fpsController.update(this.video)}),this.addVideoEventListener("durationchange",()=>{cn(this.state)||this.dispatchOnDurationChange()}),this.on("DvrChange",()=>this.updateDVRParams())}async play(){if(this.preventPauseState)return this.preventPauseState=Qa({},this.preventPauseState,{shouldPlayAfterEnd:!0}),Su.log("play method call during preventPauseAsync operation"),this.playDeferred||(this.playDeferred=new qc,this.playDeferred.promise.catch(d).then(()=>this.playDeferred=void 0)),this.playDeferred.promise;await this.playInternal()}getFragmentsData(){return{totalDuration:this.getDuration(),fragmentDuration:Xg,startTime:Z(0)}}getUtcStartTime(){return Xy}getUtcPosition(){return Xy}async attachEncoder(){this.tickController.start(),this.bandwidthEstimateUpdateInterval=window.setInterval(()=>{this.playerStore.dispatch(Zu(this.getBandwidthEstimate())),Ro(this.getBandwidthEstimate())},5e3),"defaultPlaybackRate"in this.video&&(this.video.defaultPlaybackRate=this.state.controller.playbackRate);const e=new xy(this.video,()=>{this.onVideoResize()});this.once("Detach",()=>e.destroy())}onVideoTagError(e){!this.video.src&&!cn(this.state)&&(this.video.style.opacity="0")}captureScreenshot(e){return Promise.resolve(void 0)}clearScreenshot(){this.previousScreenshotBlobUrl&&(URL.revokeObjectURL(this.previousScreenshotBlobUrl),this.previousScreenshotBlobUrl=void 0)}seek(e){if(!this.canSeek())return void this.playerStore.dispatch(Th({videoTime:e}));this.playerStore.dispatch(Nh(void 0));const{start:t,end:r}=this.getSeekableRange(),{currentTime:n,bufferingRanges:i}=this.state.controller,o=L(e,t,r);void 0===Ln(i,o)&&this.playerStore.dispatch($h(xr(Eu.Seek,{oldPosition:n,newPosition:o}))),qo(this.video,Z(o)),this.emit("CurrentTimeChange",this.getCurrentTime())}setPlaybackRate(e){const t=this.video.playbackRate;if(t===e)return;this.video.playbackRate=e;const r=this.video.playbackRate;r!==t&&this.playerStore.dispatch(Ch(r))}getUtcEndTime(){return Z(0)}static isLiveStreamUrl(e){return e.startsWith("https://strm.yandex.ru/live/")||e.startsWith("https://streaming.tst.strm.yandex.net/live/")}updateNativeControlsVisibility(){const e=!jc(this.state.skin.hiddenControls)&&(this.state,!0);this.playerStore.dispatch(of(e)),Ba(this.video,{controls:e?"controls":null}),this.video.classList.toggle(By().video_hiddenControls,!e),this.setNativeTimeControlVisibility(ja(this.state)),this.setNativeTimelineControlVisibility(ja(this.state))}detachEncoder(){if(this.tickController.stop(),this.state.controller.encoderState===Zg.Attached){const e=this.getBandwidthEstimate();this.playerStore.dispatch(Zu(e)),Ro(e)}return null!==this.bandwidthEstimateUpdateInterval&&clearInterval(this.bandwidthEstimateUpdateInterval),this.emit("BufferingRangesChange",[]),this.emit("InternalVideoTrackValueChange",void 0),this.emit("InternalAudioTrackValueChange",void 0),this.emit("InternalTextTrackValueChange",void 0),this.emit("Detach",void 0),"defaultPlaybackRate"in this.video&&(this.video.defaultPlaybackRate=1),Promise.resolve()}async preloadSource(){Su.log("preloadSource() is not implemented for "+this.engine)}createCachePreloader(){}setLoop(e){const{video:t}=this.props,{loop:r}=this.video;e!==r&&(t.loop=e)}isPaused(){return this.props.video.paused}pause(){var e;this.recoverHelper.reset("pause"),this.props.video.pause(),this.onPause(),null==(e=this.playDeferred)||e.reject(new Error("playing rejected cause of #pause()"))}getDuration(){return Z(this.video.duration)}getCurrentTime(){return Oc(Math.floor(Ic(Z(this.props.video.currentTime),1e3)),1e3)}getVideoWidth(){return this.video.videoWidth}getVideoHeight(){return this.video.videoHeight}setVolume(e){!function(e){return"number"===typeof e&&0<=e&&e<=1}(e)?Su.warn("setVolume wrong value"):ky?this.video.volume=e:Su.warn("cannot change video volume")}getVolume(){return this.video.volume}setMuted(e){this.video.muted=e}getMuted(){return this.video.muted}setPoster(e){this.state.skin.nativeControlsVisibility&&(this.removePoster(),this.props.video.setAttribute("poster",e||Wc))}removePoster(){this.props.video.removeAttribute("poster")}getConnectionQuality(){return _v({fragDuration:Ic(this.fragDuration,1e3),timings:this.props.resourceTimingsMonitor.getAllResourcesTimings()})}isDvrEnabled(){return!0}toggleNativeSubtitles(e){const t=this.state.skin.useNativeSubtitles;if(t===e)return;const r=Wa(t),n=Wa(e);this.playerStore.dispatch(Cv(e)),Ka(this.video.textTracks).forEach((e,t)=>{e&&(e.mode=r===e.mode?n:"disabled")})}canSeek(){const{video:e}=this.props;return e.readyState>0&&e.duration>0}getRecoverHelperState(){return this.recoverHelper.getState()}getContainerSize(){const e=this.getVideoElementSize();return{width:Ic(e.width,devicePixelRatio),height:Ic(e.height,devicePixelRatio)}}getCapSizes(){var e,t;const r=null!=(e=this.props.getPipWindowSize())?e:function(e,t,r){let{videoWidth:n,videoHeight:i}=e;const{width:o,height:a}=r;if(!n||!i)return{width:o,height:a};switch(t){case"none":return{width:$(n),height:$(i)};case"cover":{const e=$(Math.floor(i*o/n));return e>=a?{width:o,height:e}:{height:a,width:$(Math.floor(n*a/i))}}case"contain":case"scale-down":{const e=$(Math.floor(i*o/n));return e<=a?{width:o,height:e}:{height:a,width:$(Math.floor(n*a/i))}}case"fill":default:return{width:o,height:a}}}(this.video,(null==(t=this.state.controller.videoElementStyle)?void 0:t.objectFit)||"contain",this.props.videoSizeSensor.getSize()),n=this.fpsController.getRestrictions(),i=r.height>r.width,o=(void 0===(a=this.state.controller.from)&&(a=xv),!!Gy()||a in Ky&&Ky[a].preferHd);var a;const s=lo(),l=null!==this.props.defaultQuality,d=null===(c=this.props.defaultQuality)?$(1/0):void 0===c?Dy:$(c);var c;const u=Ic(o&&l?$(Math.max(screen.height,r.height)):r.height,devicePixelRatio),h=Ic(o&&l?$(Math.max(screen.width,r.width)):r.width,devicePixelRatio),f=$(i||o?u:Math.min(u,d)),p=$(i&&!o?Math.min(h,d):h),g=$(!i&&s?Math.min(n.maxHeight,Fy):n.maxHeight);return{width:p,height:f,maxWidth:$(i&&s?Math.min(n.maxWidth,Fy):n.maxWidth),maxHeight:g}}getMaxCapAllowedVideoTrack(){}getRemainingBufferedTime(){return{total:Vn(this.state)||Z(0)}}getSegmentSize(){}getBandwidthEstimate(){return bo(this.playerStore.getState())}async recoverStream(){const e=this.getPositionToRecover();this.playerStore.dispatch(Th(e)),await this.detachEncoder(),await this.attachEncoder()}getLiveLatency(){if(!this.isLiveStreaming())return;const e=this.getUtcPosition(),t=this.getServerTime();return e>0&&void 0!==t?Z(Math.max(t/1e3-e,0)):void 0}getServerTime(){}getPlayingState(){return this.currentState}isLiveStreaming(){const{state:e}=this;if(!yn(e)||cn(e))return!1;const{controller:{playingState:t,currentTime:r,duration:n}}=e;return!(t!==gd.PLAY&&t!==gd.BUFFERING)&&!(0===r||!n)}subscribeVideoBuffering(){const{video:e}=this,t=zy(e,t=>{const r=qa(e,t);if(this.isStalledLiveEdge(r)){const e=xr(Eu.LiveEdge,void 0);this.playerStore.dispatch($h(e))}this.emit("InternalPlayingStateChange",r)});this.once("Destroy",t)}updateVideoSize(){const{videoWidth:e,videoHeight:t}=this.video;this.state.controller.videoWidth===e&&this.state.controller.videoHeight===t||this.playerStore.dispatch(uh({videoWidth:$(e),videoHeight:$(t)}))}isStalledLiveEdge(e){const{video:t}=this,{controller:{videoType:r}}=this.state,n=e===gd.BUFFERING,i=r===Uc.EVENT||r===Uc.LIVE,o=t.seekable.length>0&&t.seekable.end(0)-t.currentTime<2.5;return n&&i&&o}getPositionToRecover(){const{programDateTime:e,currentTime:t,startPosition:r}=this.state.controller,n={utc:void 0===e?void 0:bc(Oc(e,1e3),t),videoTime:t};return t?n:r}subscribeContentImpression(){this.once("Detach",function(e,t){const r=T(e,"timeupdate",()=>{e.currentTime>0&&!e.paused&&(i(),t())}),n=T(e,"playing",()=>{e.duration>0&&(i(),t())}),i=()=>{r(),n()};return i}(this.video,()=>{this.emit("ContentImpression",void 0)}))}onTick(e){const t=this.getCurrentTime();t===this.state.controller.currentTime&&0!==t||this.emit("CurrentTimeChange",t),this.video.paused&&this.currentState===gd.PLAY&&!this.wasPausedAfterQualityChanged&&this.state.controller.encoderState!==Zg.Attaching&&this.state.controller.playingState!==gd.PAUSE&&this.emit("InternalPlayingStateChange",gd.PAUSE),this.setPlaybackRateCatchup()}addVideoEventListener(e,t,r){let{once:n}=void 0===r?{}:r,i=t;const{video:o}=this,a=()=>{o.removeEventListener(e,i)};return n&&(i=e=>{this.off("Destroy",a),a(),t.call(o,e)}),this.on("Destroy",a),this.video.addEventListener(e,i),a}addEventListener(e,t,r,n){const i=T(e,t,r,n);this.once("Destroy",i)}getSeekableRange(){return{start:Z(0),end:this.getDuration()||Z(0)}}setNativeTimeControlVisibility(e){this.video.classList.toggle(By().video_hiddenTime,!e)}setNativeTimelineControlVisibility(e){this.video.classList.toggle(By().video_hiddenTimeline,!e)}getVisibleTextTrackMode(){return Wa(this.state.skin.useNativeSubtitles)}getHiddenTextTrackMode(){return"disabled"}getCurrentTextTrack(){if(!this.video)return;const e=this.getVisibleTextTrackMode();return Ka(this.video.textTracks).find(t=>void 0!==t&&t.mode===e)}restoreUserTextTrack(){const{userTextTrackEnabled:e}=this.state.controller;if(void 0!==e)if(e){const e=function(e){const{userTextTrackName:t,userTextTrackLang:r,textTracks:n}=e.controller;return ln(n,{name:t,lang:r})}(this.state);e&&this.setTextTrack(e)}else this.disableTextTrack()}restoreUserAudioTrack(){const e=function(e){const{userAudioTrackName:t,userAudioTrackLang:r,audioTracks:n}=e.controller;return Da(n,{name:t,lang:r})}(this.playerStore.getState());e&&(Su.log("Set audio track by user params audioTrack=["+JSON.stringify(e)+"]"),this.setAudioTrack(e))}restoreUserVideoTrack(){const e=function(e){const{videoTracks:t,userVideoTrackName:r,userVideoTrackHeight:n}=e.controller;return Na(t,{name:r,height:n})}(this.playerStore.getState());e&&(Su.log("Set video track by user params videoTrack=["+JSON.stringify(e)+"]"),this.setVideoTrack(e))}updateSkinDvrParameters(e){const t=Oc(e,1e3),{skin:{skinDVRStartTime:r,skinDVRDuration:n},controller:{videoType:i,dvrDuration:o,duration:a}}=this.state;if(i===Uc.LIVE){const e=Z(Math.min(bc(r,t),a||Z(0)));this.playerStore.dispatch(Ih(e)),this.emit("DVRStartTimeChange",e)}else if(i===Uc.EVENT){const e=Z(Math.min(bc(n,t),o));this.playerStore.dispatch(Oh(e)),this.emit("DVRDurationChange",e)}}async destroyUnsafe(){this.emit("Destroy",void 0),await this.detachEncoder();const{error:e}=this.state.controller.errorInfo;e&&e.isFatal&&this.video.src&&this.video.removeAttribute("src")}async preventPauseAsync(e,r){const{paused:n}=e,i=r();this.preventPauseState||(this.preventPauseState={promises:[],shouldPlayAfterEnd:!n}),this.preventPauseState.promises.push(i);const o=await i;if(this.preventPauseState){const e=this.preventPauseState.promises.length;Promise.all(this.preventPauseState.promises).catch(d).then(()=>{this.preventPauseState&&e===this.preventPauseState.promises.length&&(this.preventPauseState.shouldPlayAfterEnd&&t(this.playInternal()),this.preventPauseState=void 0)})}return o}getVideoOwnerDocument(){return this.video.ownerDocument||document}logLoadToRum(){Ai(this.engine,this.state.ad.adSyncInit)}subscribeYabroRum(){this.once("Detach",this.addVideoEventListener("firstframedecoded",()=>{Ti(this.engine,{},this.state.ad.adSyncInit)},{once:!0})),this.once("Detach",this.addVideoEventListener("firstframeshown",()=>{Ri(this.engine,{},this.state.ad.adSyncInit)},{once:!0}))}getStreamUrl(){return this.props.stream.url}shouldUseLowBuffer(){const{startStage:e,autoplay:t,preload:r,feed:n}=this.state.controller;return!(!this.video.paused||!n)||e!==Jg.started&&!t&&r}isBufferingOnPreload(e){return e===gd.BUFFERING&&(!!this.state.controller.preload&&(this.state.controller.startStage!==Jg.started&&this.state.controller.startStage!==Jg.starting))}getMaxBufferLength(){if(this.shouldUseLowBuffer())return IE;if(this.state.controller.feed&&this.getCurrentTime()<Qy)return Jy;const{maxBufferLength:e=ey}=this.props;return e}handleVideoElementPlayEvent(){this.wasPausedAfterQualityChanged=!1,this.emit("InternalPlayingStateChange",gd.PLAY)}updateBufferGoal(){}isLowLatencyLive(){return!1}onVideoResize(){this.updateVideoSize()}onPause(){this.video.paused&&(this.isPauseHandlerCalled||(this.isPauseHandlerCalled=!0,this.wasPausedAfterQualityChanged||this.video.ended||this.getCurrentTime()>=this.getDuration()||this.emit("InternalPlayingStateChange",gd.PAUSE)))}calculateDVRParams(){const{fragmentDuration:e,startTime:t,totalDuration:r}=this.getFragmentsData();return{fragmentDuration:e,dvrDuration:r,dvrStartTime:t,skinDVRDuration:r,skinDVRStartTime:t}}updateDVRParams(){const{fragmentDuration:e,dvrStartTime:t,dvrDuration:r,skinDVRStartTime:n,skinDVRDuration:i}=this.calculateDVRParams();this.playerStore.dispatch(_h(e));const{dvrDuration:o,dvrStartTime:a}=this.state.controller;Iv()(o,r)||(this.playerStore.dispatch(Ph(r)),this.playerStore.dispatch(Oh(i)),this.emit("DVRDurationChange",i)),Iv()(a,t)||(this.playerStore.dispatch(bh(t)),this.playerStore.dispatch(Ih(n)),this.emit("DVRStartTimeChange",n))}setPlaybackRateCatchup(){const e=function(e,t,r){if(!yn(e)||cn(e)||!r)return;const{controller:{playingState:n,playbackRate:i}}=e;if(n!==gd.PLAY)return;const o=t.total;let a;if(o<2){const e=5*(o-2);a=.97+.06/(1+Math.pow(Math.E,-e))}else{const e=.02;if(Math.abs(r-7)<=7*e)a=1;else{const e=5*(r-7);a=.97+.06/(1+Math.pow(Math.E,-e))}}return Math.abs(i-a)<=vv&&(a=void 0),a}(this.state,this.getRemainingBufferedTime(),this.getLiveLatency());void 0!==e&&this.isLowLatencyLive()&&this.setPlaybackRate(e)}getVideoElementSize(){var e;const t=this.props.videoSizeSensor.getSize();return null!=(e=this.props.getPipWindowSize())?e:{width:$(t.width),height:$(t.height)}}handleSubtitles(){const{textTracks:e}=this.video;e&&"function"===typeof e.addEventListener&&(this.on("Destroy",T(e,"addtrack",e=>{const t=e.track;t&&"subtitles"===t.kind&&this.on("Destroy",T(t,"cuechange",this.refreshSubtitles))})),this.on("TextTrackValueChange",e=>{void 0===e?this.emptySubtitles():this.refreshSubtitles()}),this.on("Destroy",z(this.refreshSubtitles)),this.on("Detach",this.disableSubtitlesNative))}dispatchOnDurationChange(){const e=this.getDuration();isNaN(e)||this.state.controller.duration!==e&&this.emit("DurationChange",e)}playInternal(){const e=Ya(this.video);return e.then(()=>{var e;return null==(e=this.playDeferred)?void 0:e.resolve()}).catch(e=>{var t;-1!==String(e).indexOf("no supported sources")&&this.props.onError(new gu({code:Ad.UNSUPPORTED_MEDIA_TYPE,isFatal:!0})),null==(t=this.playDeferred)||t.reject(e)}),e.then(d)}}const $y=$(1/0);class eA extends Zy{initInternalSubscribe(){super.initInternalSubscribe(),this.on("VideoPlayingStateChange",e=>{e===gd.PLAY?this.recoverHelper.reset("play"):e===gd.END?this.stopLoad():e===gd.BUFFERING&&this.tryRecoverOnBuffering()}),this.subscribeVideoBuffering()}constructor(e){super(e),this.props=e,this.engine=Kv.HLS,this.preloadSourceHLSEncoder=void 0,this.preloadSourceHandlers=[],this.preloadPosition={},this.HLSEncoder=void 0,this.lastKnownLevelDetails=void 0,this.HLSEncoderAttachTime=1/0,this.loadStarted=!1,this.recoverOnBufferingReason=null,this.initHlsEncoderPromise=void 0,this.maxHeightCapping=void 0,this.levelForcingInterval=void 0,this.lastFragRequest=void 0,this.restoreUserTracksWhenPossible=()=>{const{HLSEncoder:e}=this;if(!e)return;if(!e.levels||0===e.levels.length)return void e.once(Hls.Events.MANIFEST_LOADED,this.restoreUserTracksWhenPossible);ie(this.HLSEncoderAttachTime)?this.restoreUserTracks():e.once(Hls.Events.MEDIA_ATTACHED,this.restoreUserTracks)},this.onLevelUpdated=()=>{this.emit("VideoTypeChange",this.getVideoType());const e=this.getHlsEncoderLevelDetails();if(e&&e.fragments&&e.fragments.length>0){const[t]=e.fragments;t.programDateTime&&this.emit("ProgramDateTimeChange",Ic(this.getUtcStartTime(),1e3))}},this.onSubtitleTracksUpdated=()=>{this.HLSEncoder&&this.emit("TextTracksChange",function(e){const t=[];return Array.isArray(e)&&e.forEach(e=>{const r=wa(e);r&&t.push(r)}),t}(this.HLSEncoder.subtitleTracks))},this.onAudioTracksUpdated=()=>{const{HLSEncoder:e}=this;if(!e)return;const{audioTracks:t}=e;e.config.maxBufferSize=t.length>0?12e6:Hls.DefaultConfig.maxBufferSize,this.emit("AudioTracksChange",function(e){const t=[];return Array.isArray(e)?(e.forEach(e=>{const r=_a(e);r&&t.push(r)}),t):[]}(t))},t(Co()),this.playerStore.dispatch(Lh(!0))}getEngine(){return Kv.HLS}getFragmentsData(){const e=this.getHlsEncoderLevelDetails();if(!e)return super.getFragmentsData();const{totalduration:t,targetduration:r,fragments:n}=e,[i]=n;return i?{totalDuration:Z(Math.min(t,this.getDuration())),fragmentDuration:Z(r),startTime:Z(i.start)}:super.getFragmentsData()}onOnline(){this.startLoadOnce(this.video.currentTime)}onOffline(){this.stopLoad()}play(){return this.startLoadOnce(),super.play()}getUtcStartTime(){const e=this.getHlsEncoderLevelDetails();if(!e||!e.hasProgramDateTime)return Z(0);const[t]=e.fragments;return t&&t.programDateTime?Pc(Oc(t.programDateTime,1e3),Z(t.start)):Z(0)}getUtcPosition(){const e=this.getUtcStartTime();return e>0?bc(e,this.getCurrentTime()):super.getUtcPosition()}setVideoTrack(e){const{HLSEncoder:t}=this;if(void 0===t)return;const{levels:r}=t;if(void 0===r)return;const n=e.value===Yv.value?-1:r.findIndex(t=>t.url.some(t=>t===e.value));-1===n?this.startLevelForcingWithSizeCap():this.stopLevelForcingWithSizeCap();const i=this.isPaused();t.currentLevel=n,!i&&this.isPaused()&&(this.wasPausedAfterQualityChanged=!0,this.emit("InternalPlayingStateChange",gd.BUFFERING))}setAudioTrack(e){const{HLSEncoder:t}=this;if(void 0===t)return;const r=t.audioTracks.find(t=>e.value===String(t.id));r&&(t.audioTrack=Number(r.id))}setTextTrack(e){const{HLSEncoder:t}=this;if(void 0===t)return;const r=this.getHlsTextTrack(e);r&&(this.emit("InternalTextTrackValueChange",e&&e.value),t.subtitleTrack=r.id)}disableTextTrack(){this.emit("InternalTextTrackValueChange",void 0)}toggleNativeSubtitles(e){super.toggleNativeSubtitles(e);const{HLSEncoder:t}=this;void 0!==t&&(t.subtitleDisplay=e)}async preloadSource(){let e=!1;const t=()=>{e=!0};this.once("Destroy",t),this.once("Detach",t);try{await Co()}catch(pT){return void this.props.onError(new gu(pT,{code:Ad.SCRIPT_INIT_ERROR,isFatal:!1}))}if(e||this.HLSEncoder||this.initHlsEncoderPromise||this.preloadSourceHLSEncoder)return;const r=Ja({},this.getHlsJsConfig(),{liveSyncDuration:Xg}),n=window.hls=this.preloadSourceHLSEncoder=new Hls(r),i=(e,t)=>{this.preloadSourceHandlers.push([e,t]),n.once(e,t)};((e,t)=>{this.preloadSourceHandlers.push([e,t]),n.on(e,t)})(Hls.Events.ERROR,(e,t)=>{if(!t)return;const r=pa(t),i=va(t);void 0!==i&&(this.props.onError(new gu(i,{isFatal:!1})),r&&(this.props.onError(new gu({code:Ad.PRELOAD_SOURCE_FAILED,isFatal:!1,details:{reason:i}})),this.unsubscribePreloadSourceHandlers(),n.destroy(),this.clearPreloadSourceHlsEncoder()))});const o=()=>{this.preloadPosition=this.state.controller.startPosition,n.config.startFragPrefetch=!0,this.loadStarted=!0};i(Hls.Events.MANIFEST_PARSED,(e,t)=>{let{levels:r=[],audioTracks:a=[]}=t;const s=this.getStartVideoLevelIndex(r);n.startLevel=s,this.state.controller.isAbrEnabled||(n.loadLevel=s);this.getStartAudioTrackIndex(a)>-1&&(n.audioTrack=this.getStartAudioTrackIndex(a));const l=this.getStartLoadPosition();i(Hls.Events.LEVEL_UPDATED,(e,t)=>{let{details:r}=t;const i=this.getStartLoadPosition(r);l!==i&&void 0!==i&&n.streamController.startLoad(i),o()}),n.startLoad(l)}),n.loadSource(this.getStreamUrl())}async attachEncoder(){if(await super.attachEncoder(),!vy){const e=Ad.HLS_JS_NOT_SUPPORTED_ERROR;return this.props.onError(new gu({code:e})),Promise.reject(y(e,this.state.ad.adblockDetected))}return this.initHlsEncoderPromise=this.initHlsEncoder(),await this.initHlsEncoderPromise,this.initHlsEncoderPromise=void 0,this.subscribeContentImpression(),this.startLevelForcingWithSizeCap(),this.attachMedia()}async destroyUnsafe(){await super.destroyUnsafe(),this.preloadSourceHLSEncoder&&this.preloadSourceHLSEncoder.destroy(),this.HLSEncoder&&this.HLSEncoder.destroy()}canSeek(){return void 0!==this.HLSEncoder&&Boolean(this.HLSEncoder.media)&&super.canSeek()}async detachEncoder(){if(me(this.video.textTracks).forEach(Ma),this.stopLevelForcingWithSizeCap(),await super.detachEncoder(),this.loadStarted=!1,this.preloadSourceHLSEncoder&&(this.preloadSourceHLSEncoder.destroy(),this.clearPreloadSourceHlsEncoder()),!this.HLSEncoder){if(!this.initHlsEncoderPromise)return;await this.initHlsEncoderPromise}const{video:e,HLSEncoder:t}=this;if(void 0!==t)return this.recoverOnBufferingReason=null,new Promise(r=>{t.media?t.once(Hls.Events.MEDIA_DETACHED,()=>{this.HLSEncoderAttachTime=1/0,r()}):r(),this.lastKnownLevelDetails=void 0,La(e,()=>{t.destroy(),this.HLSEncoder=void 0})})}getConnectionQuality(){if(void 0===this.lastFragRequest)return super.getConnectionQuality();const{fragDuration:e,getElapsedTime:t}=this.lastFragRequest,r={fragDuration:e,downloadTime:t()};return Rv(r)?Sv.SLOW:super.getConnectionQuality()}getMaxCapAllowedVideoTrack(){const{HLSEncoder:e}=this;if(!e||!e.levels||!e.autoLevelEnabled)return;const t=e.levels[e.autoLevelCapping];return t?this.state.controller.videoTracks.find(e=>{let{value:r}=e;return r===t.url[0]}):void 0}onVideoTagError(e){if(super.onVideoTagError(e),!this.video.error||cn(this.state))return;const t=ra(this.video);if(t.code!==uy.MEDIA_ERR_DECODE&&t.code!==uy.MEDIA_ERR_SRC_NOT_SUPPORTED)return;const r=t.code===uy.MEDIA_ERR_SRC_NOT_SUPPORTED,n=new gu({code:uy[t.code],details:t,isFatal:r});if(this.props.onError(n),r)return;const i="VideoTagError MEDIA_ERR_DECODE";Su.log(i),this.playerStore.dispatch($h(xr(Eu.MediaError,void 0))),this.isPaused()&&this.recoverHelper.planTask(()=>this.recoverCurrentFrag(),{reason:i,delay:1e3})}calculateDVRParams(){const{videoType:e}=this.state.controller;if(e===Uc.VOD||void 0===e)return super.calculateDVRParams();const{fragmentDuration:t,startTime:r,totalDuration:n}=this.getFragmentsData(),{liveOffset:i}=this.props,o=Ic(t,1),a=e===Uc.EVENT?i:bc(o,i);return{fragmentDuration:t,dvrStartTime:r,dvrDuration:n,skinDVRStartTime:e===Uc.EVENT?r:bc(o,r),skinDVRDuration:Pc(n,a)}}onTick(e){super.onTick(e),this.updateSkinDvrParameters(e)}getStreamUrl(){const e=super.getStreamUrl(),t={session_data:"1"};return na(e)||(t.preview="1"),he(e,t,{saveOriginalPath:!0})}getBandwidthEstimate(){if(!this.HLSEncoder)return super.getBandwidthEstimate();const e=r(()=>this.HLSEncoder.abrController._bwEstimator.getEstimate());return ie(e)?{value:e,source:"hlsjs"}:super.getBandwidthEstimate()}getUtcEndTime(){const e=this.getUtcStartTime();return e?bc(e,this.getDuration()):Z(0)}stopLoad(){this.HLSEncoder&&(this.HLSEncoder.stopLoad(),this.loadStarted=!1)}tryRecoverOnBuffering(){if(!this.recoverOnBufferingReason)return;const{type:e,url:t,details:r,frag:n}=this.recoverOnBufferingReason,{controller:{bufferingRanges:i,fragmentDuration:o}}=this.state,a=this.getCurrentTime();if(i.some(e=>{let{start:t,end:r}=e;return t+o<a&&r-o>a}))return void Su.log("skip recover",{currentTime:a,bufferingRanges:i});const{recoverHelper:s}=this;s.planTask(()=>this.recoverCurrentFrag(),{reason:"HlsJs "+e,rawData:{details:r,type:e,url:t,isFatal:!0,frag:aa(n)},delay:100})}getHlsJsConfig(){const e="true"!==Rm.getItem(Iy.WAS_WORKER_INTERNAL_ERROR);return{manifestLoadingTimeOut:8e3,levelLoadingTimeOut:1e4,fragLoadingTimeOut:1e4,fragLoadingMaxRetry:5,debug:this.props.debug,enableWorker:e,autoStartLoad:!1,capLevelToPlayerSize:!1,liveSyncDuration:this.props.liveOffset,levelLoadingMaxRetry:25,levelLoadingMaxRetryTimeout:100,enableCEA708Captions:!1,xhrSetup:(e,t)=>{this.withCredentials&&(e.withCredentials=!0);const r=pe(t);("m3u8"===r||"ts"===r)&&e.open("GET",eo(t),!0)},fetchSetup:(e,t)=>(this.withCredentials&&(t.credentials="include"),new Request(e.url,t)),maxMaxBufferLength:this.getMaxBufferLength()}}preparePreloadSourceHlsEncoderToAttach(){const e=this.preloadSourceHLSEncoder;if(!e)return;this.HLSEncoder=e;const{preloadPosition:t}=this;if(this.unsubscribePreloadSourceHandlers(),this.clearPreloadSourceHlsEncoder(),e.config.liveSyncDuration=this.props.liveOffset,!e.levels||0===e.levels.length)return e;this.onLevelsUpdated(),this.onLevelUpdated(),this.updateThumbnailTileMeta(),this.onAudioTracksUpdated(),this.onAudioTrackUpdated(e.audioTrack),this.onSubtitleTracksUpdated();const{videoTime:r,utc:n}=this.state.controller.startPosition;if(!(t.utc!==n||t.videoTime!==r))return e;const i=this.getStartLoadPosition(this.getHlsEncoderLevelDetails());return void 0!==i&&e.streamController.startLoad(i),e}async initHlsEncoder(){if(this.HLSEncoder)return;if(this.HLSEncoder=this.preparePreloadSourceHlsEncoderToAttach(),this.HLSEncoder)this.props.logEvent({event:vu.UsePreloadedHlsJs,params:{}});else{try{await Co()}catch(pT){const t=new gu(pT,{code:Ad.SCRIPT_INIT_ERROR});throw this.props.onError(t),t}this.HLSEncoder=new Hls(this.getHlsJsConfig())}const{HLSEncoder:e}=this;window.hls=e,this.subscribeHlsEncoderEvents(e),this.restoreUserTracksWhenPossible();const t=r=>{r!==gd.BUFFERING&&r!==gd.PLAY||(e.config.maxMaxBufferLength=this.getMaxBufferLength(),this.off("VideoPlayingStateChange",t))};this.on("VideoPlayingStateChange",t)}subscribeHlsEncoderEvents(e){e.subtitleDisplay=this.state.skin.useNativeSubtitles;const t=t=>{if(!e.levels)return;const r=e.levels[t];if(!r)return;const n=Ca(r,this.videoTrackLabels);n&&this.emit("InternalVideoTrackValueChange",n.value)};e.on(Hls.Events.LEVEL_SWITCHING,(e,r)=>{t(r.level)}),e.on(Hls.Events.LEVEL_SWITCHED,(e,r)=>{t(r.level)}),e.on(Hls.Events.STREAM_STATE_TRANSITION,(e,t)=>{let{nextState:r}=t;"FRAG_LOADING"!==r&&(this.lastFragRequest=void 0)}),e.on(Hls.Events.FRAG_LOADING,(e,t)=>{let{frag:{duration:r}}=t;this.lastFragRequest={fragDuration:1e3*r,getElapsedTime:oe()}}),e.levels&&0!==e.levels.length||e.on(Hls.Events.MANIFEST_PARSED,(r,n)=>{let{levels:i=[],audioTracks:o=[]}=n;this.onLevelsUpdated(),this.updateThumbnailTileMeta();const a=this.getStartVideoLevelIndex(i);e.startLevel=a,this.state.controller.isAbrEnabled||(e.loadLevel=a);this.getStartAudioTrackIndex(o)>-1&&(e.audioTrack=this.getStartAudioTrackIndex(o)),e.once(Hls.Events.LEVEL_LOADED,(e,r)=>{let{level:n}=r;t(n)})}),e.on(Hls.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated),e.on(Hls.Events.AUDIO_TRACK_SWITCHING,(e,t)=>{this.onAudioTrackUpdated(t.id)}),e.on(Hls.Events.AUDIO_TRACK_SWITCHED,(e,t)=>{this.onAudioTrackUpdated(t.id)}),e.on(Hls.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated),e.on(Hls.Events.SUBTITLE_TRACK_SWITCH,(t,r)=>{const{subtitleTrack:n}=e;if(n>-1){const t=wa(e.subtitleTracks.find(e=>e.id===r.id));if(!t)return;this.emit("InternalTextTrackValueChange",t.value)}else this.emit("InternalTextTrackValueChange",void 0)}),e.on(Hls.Events.FRAG_PARSING_METADATA,async(e,t)=>{const{samples:r,frag:n}=t;if(r){const{length:e}=r;if(e){const e=(await Promise.all(r.map(e=>py().parse(e.data).then(e=>{let{writer:t}=e;return t})))).filter(e=>void 0!==e),{data:t,index:i,reason:o}=function(e){const[t,r]=e.reduce((e,t)=>{let[r,n]=e;try{return!function(e){return"object"===typeof e&&e.id&&"number"===typeof e.offset&&(void 0===e.cutoff||"number"===typeof e.cutoff)}(JSON.parse(t))?n.push(t):r.push(t),[r,n]}catch(i){return[r,n]}},[[],[]]);if(t.length>0){const r=t[t.length-1];return{data:r,index:e.indexOf(r),reason:Oy.HasAd}}if(r.length>0){const t=r[r.length-1];return{data:t,index:e.indexOf(t),reason:Oy.NoAd}}return{data:"",index:-1,reason:Oy.NoData}}(e);Su.log("choose metadata: ",t,i,o);Math.random()<.01&&this.props.logEvent({event:vu.StreamPlayerChooseMetadata,params:{fragmentMetadataArray:t,chosenIndex:i,chosenReason:o}}),this.emit("MetadataChange",{fragmentMetadataArray:[t],fragmentStart:Z(n.start),fragmentDuration:Z(n.duration),src:n?n.url:this.getStreamUrl()})}}}),e.on(Hls.Events.MANIFEST_LOADED,()=>{this.onLevelsUpdated(),this.forceLevel(),this.onAudioTracksUpdated(),this.onSubtitleTracksUpdated()}),e.on(Hls.Events.LEVEL_UPDATED,this.onLevelUpdated),e.on(Hls.Events.ERROR,(e,t)=>{t&&this.onEncoderError(t)}),e.on(Hls.Events.FRAG_PARSED,(e,t)=>this.handleFragParsed(e,t)),this.on("VideoPlayingStateChange",e=>{"play"!==e&&"buffering"!==e||this.startLoadOnce()})}getStartVideoLevelIndex(e){const{userVideoTrackHeight:t,userVideoTrackName:r}=this.playerStore.getState().controller,n=Na(e,{name:r,height:t});if(n){const t=e.indexOf(n);return Su.log("User level found, start loading by index=["+t+"]"),t}return function(e){let{video:t,maxHeightCapping:r,levels:n=[],bandwidth:i}=e;const o=n.slice().filter(Boolean).sort((e,t)=>t.bitrate-e.bitrate);if(0===o.length)return-1;const{width:a,height:s}=Fa(t),[l]=o.filter(e=>!(i&&e.bitrate>i)&&(!(r&&e.height>r)&&(e.width<=a||e.height<=s)));return void 0===l?n.indexOf(o.pop()):n.indexOf(l)}({levels:e,maxHeightCapping:this.maxHeightCapping,video:this.video,bandwidth:this.state.controller.isAbrEnabled?this.getBandwidthEstimate().value:1/0})}getStartAudioTrackIndex(e){const{userAudioTrackName:t,userAudioTrackLang:r}=this.playerStore.getState().controller,n=Da(e,{name:t,lang:r});if(!n)return-1;const i=e.indexOf(n);return Su.log("User audio track found, start loading by index=["+i+"]"),i}handleFragParsed(e,t){let{frag:r}=t;const{duration:n}=r;if(0===n&&this.state.controller.videoType===Uc.VOD){const e=this.getHlsEncoderLevelDetails(),t=e?e.fragments:[];if(t[t.length-1]===r)return}(n<=0||n>=2*this.fragDuration)&&this.props.logEvent({event:"InvalidFragDuration",params:aa(r)})}startLoadOnce(e){const{HLSEncoder:t}=this;!this.loadStarted&&void 0!==t&&this.state.controller.isOnline&&(t.levels&&t.levels.length>0?(t.startLoad(e),this.loadStarted=!0):t.once(Hls.Events.MANIFEST_PARSED,()=>{this.startLoadOnce(e)}))}getHlsEncoderLevelDetails(){const{HLSEncoder:e}=this;if(void 0===e)return;const{currentLevel:t,levels:r}=e;if(!r)return;const n=r[t];if(n&&n.details)return this.lastKnownLevelDetails=n.details,this.lastKnownLevelDetails;const i=r.find(e=>{let{details:t}=e;return Boolean(t)});if(i){const{details:e}=i;this.lastKnownLevelDetails=e}return this.lastKnownLevelDetails}computeRecoverJumpGap(){const{controller:{bufferingRanges:e}}=this.state,t=this.getCurrentTime();return Math.max(...e.map(e=>{let{end:t}=e;return t}))+1.1*this.fragDuration<t?(Su.log("use 0 as recoverJumpGap",{currentTime:t,bufferingRanges:e}),Z(0)):Ic(this.fragDuration,1.1)}computeRecoverPositionFromStartPosition(){const{startPosition:e}=this.state.controller,t={},r=this.computeRecoverJumpGap();return void 0!==e.utc&&e.utc>0&&(t.utc=bc(e.utc,r)),t.videoTime=bc(e.videoTime||Z(0),r),t}computeRecoverPositionFromCurrentTime(){const e={},{lastRecoverPosition:t}=this.state.controller,r=this.getCurrentTime(),n=this.getUtcPosition(),i=this.computeRecoverJumpGap(),{utc:o=0,videoTime:a=0}=t||{};return(n>0||o>0)&&(e.utc=bc(Z(Math.max(n,o)),i)),e.videoTime=bc(Z(Math.max(r,a)),i),e}async recoverCurrentFrag(){const{lastRecoverPosition:e}=this.state.controller,t=this.getDuration()>0||void 0!==e?this.computeRecoverPositionFromCurrentTime():this.computeRecoverPositionFromStartPosition();this.playerStore.dispatch(Nh(t)),this.playerStore.dispatch(Th(t)),await this.detachEncoder(),await this.attachEncoder()}attachMedia(){Su.log("attachMedia"),this.logLoadToRum();const{video:e,HLSEncoder:t}=this;if(void 0===t){const e=new gu({code:Ad.NO_HLS_JS_INSTANCE,isFatal:!1});return this.props.onError(e),Promise.reject(e)}const r=new Promise(e=>{t.once(Hls.Events.MEDIA_ATTACHED,()=>{window.performance&&(0,Wl.m)(performance.now)&&(this.HLSEncoderAttachTime=performance.now()),t.url||t.loadSource(this.getStreamUrl()),e()})});t.once(Hls.Events.MANIFEST_PARSED,()=>{if(this.loadStarted)return;const e=this.getStartLoadPosition();t.startLoad(e),this.loadStarted=!0,t.once(Hls.Events.LEVEL_UPDATED,(r,n)=>{let{details:i}=n;const o=this.getStartLoadPosition(i);o!==e&&void 0!==o&&t.streamController.startLoad(o)})});const n=t.levels&&t.levels.length>0?Promise.resolve():new Promise(e=>{t.once(Hls.Events.MANIFEST_PARSED,()=>{e()})});return La(this.video,()=>{t.attachMedia(e)}),Promise.all([r,n]).then(()=>{})}onAudioTrackUpdated(e){const{HLSEncoder:t}=this;if(!t)return;const r=_a(t.audioTracks.find(t=>t.id===e));r&&this.emit("InternalAudioTrackValueChange",r.value)}getVideoType(){const e=this.getHlsEncoderLevelDetails();if(e)return xa(e);return(this.HLSEncoder&&this.HLSEncoder.levels||[]).some(e=>{let{details:t}=e;return Boolean(t&&t.live)})||this.getDuration()===1/0?Uc.LIVE:Uc.VOD}onLevelsUpdated(){const{sessionData:e={},levels:t=[]}=this.HLSEncoder||{};this.videoTrackLabels=function(e){const{VALUE:t=""}=e["com.yandex.video.labels.quality"]||{};return t.split(",").filter(Boolean).reduce((e,t)=>{const[r,n]=t.split(":");return void 0!==Ua(r)&&n&&e.set(r,n),e},new Map)}(e),this.maxHeightCapping=function(e){const{VALUE:t=""}=e["com.yandex.video.capping.maxheight"]||{},r=parseInt(t,10);return r>0?r:void 0}(e),this.emit("VideoTracksChange",ka(t,this.videoTrackLabels))}updateThumbnailTileMeta(){const{sessionData:e={}}=this.HLSEncoder||{},t=e=>{this.props.logEvent({event:e,params:void 0})},r=Ra(e,Ry.LOWRES,t),n=Ra(e,Ry.HIGHRES,t);if(void 0===n)return;const i=r?Ta(r,t):void 0,o=Ta(n,t),a=function(e){const{VALUE:t=""}=e["com.yandex.video.thumbnail.version"]||{};return parseFloat(t)||0}(e);this.props.onThumbnailTileGeneralMetaInfoChange({version:a,lowRes:i,highRes:o})}onEncoderError(e){const{details:t,type:r,url:n,frag:i}=e;if(!t)return;if((o=e).networkDetails&&423===o.networkDetails.status&&o.details===Hls.ErrorDetails.LEVEL_LOAD_ERROR){this.props.logEvent({event:vu.HlsJsForceCappingStart,params:{}});const{recoverHelper:i}=this;return void i.planTask(()=>this.recoverCurrentFrag(),{force:Ea(e),reason:"HlsJs "+r,rawData:{details:t,type:r,url:n,isFatal:!1},delay:0})}var o;const a=pa(e),s=va(e);if(void 0!==s&&(a||r===Hls.ErrorTypes.MEDIA_ERROR))if(this.recoverHelper.allowed&&!s.isFatal){if(this.props.onError(s),ma(e)){if(this.currentState!==gd.BUFFERING&&function(e){const{details:t}=e;return!!t&&Ay.includes(t)}(e))return void(this.recoverOnBufferingReason=e);let o;e.details===Hls.ErrorDetails.INTERNAL_EXCEPTION&&"demuxerWorker"===e.event?(Rm.setItem(Iy.WAS_WORKER_INTERNAL_ERROR,"true"),o=()=>this.recoverStream()):o=()=>this.recoverCurrentFrag(),this.recoverHelper.planTask(o,{force:Ea(e),reason:"HlsJs "+r,rawData:{details:t,type:r,url:n,isFatal:a,frag:aa(i)},delay:1e3})}}else this.props.onError(new gu(s,{isFatal:!0}))}getHlsTextTrack(e){if(this.HLSEncoder)return this.HLSEncoder.subtitleTracks.find(t=>e.value===String(t.id))}unsubscribePreloadSourceHandlers(){const{preloadSourceHLSEncoder:e}=this;e&&(this.preloadSourceHandlers.forEach(t=>{let[r,n]=t;e.off(r,n)}),this.preloadSourceHandlers.length=0)}clearPreloadSourceHlsEncoder(){this.preloadSourceHLSEncoder=void 0,this.preloadPosition={}}getStartLoadPosition(e){const{startPosition:t}=this.state.controller,{liveOffset:r}=this.props;return function(e){let{details:t,startPosition:r,liveOffset:n}=e,{videoTime:i}=r;if(void 0===t)return i;if(t.hasProgramDateTime&&Va(r.utc)){const e=Oc(Z(t.fragments[0].programDateTime),1e3);i=Pc(r.utc,e)}if(!Va(i))return;const o=xa(t)===Uc.VOD?0:n,[a]=t.fragments;return Z(L(i,void 0===a?0:a.start,t.totalduration-o))}({details:e,startPosition:t,liveOffset:r})}startLevelForcingWithSizeCap(){clearInterval(this.levelForcingInterval),this.levelForcingInterval=window.setInterval(()=>{this.forceLevel()},1e3)}stopLevelForcingWithSizeCap(){clearInterval(this.levelForcingInterval)}forceLevel(){if(!this.HLSEncoder||!this.HLSEncoder.autoLevelEnabled||!this.HLSEncoder.levels||!this.HLSEncoder.levels.length)return;const{width:e,height:t,maxWidth:r,maxHeight:n}=this.getCapSizes(),i=Math.min(e,r||$y),o=Math.min(t,n||$y),a=$(Math.min(...[this.maxHeightCapping,o].filter(ie))),{levels:s}=this.HLSEncoder,l=s.reduce((e,t,r)=>{if((t.height<e.smallestLevel.height||t.width<e.smallestLevel.width)&&(e.smallestLevel=t,e.smallestLevelIndex=r),t.height>a||t.width>i)return e;const n=(s[e.index]||{}).height||0;return t.height>n?Ja({},e,{index:r}):e},{index:-1,smallestLevel:s[0],smallestLevelIndex:0});this.HLSEncoder.autoLevelCapping=-1===l.index?l.smallestLevelIndex:l.index}}class tA{static fromXHR(e){return new tA(e)}constructor(e){this.status=void 0,this.status=e.status}isFatalError(){return this.isRegionLimitationError()||this.isSignatureExpiredError()}toPlayerError(){return new gu({code:this.getErrorCode(),isFatal:this.isFatalError(),details:JSON.parse(_e(this))})}isRegionLimitationError(){return 451===this.status}isSignatureExpiredError(){return my.includes(this.status)}getErrorCode(){return this.isRegionLimitationError()?Ad.REGIONAL_LIMITATION_MANIFEST:this.isSignatureExpiredError()?Ad.SIGNATURE_EXPIRED_MANIFEST:Ad.DEFAULT_ERROR}}const rA=e=>s(e)&&V(Ad,e);class nA extends Zy{initInternalSubscribe(){super.initInternalSubscribe(),this.subscribeVideoBuffering();const e=ne(()=>{this.emit("VideoTracksChange",ss(this.video.videoTracks)),this.emit("AudioTracksChange",is(this.video.audioTracks)),this.emit("TextTracksChange",os(this.video.textTracks));const{videoHeight:e,videoWidth:t,videoTracks:r}=this.video,n=as(ls({videoTracks:r,videoHeight:e,videoWidth:t}));n&&this.emit("InternalVideoTrackValueChange",n.value),this.setFirstAudioTrack()});this.initTextTracks(),this.once("CanPlay",e),this.once("Destroy",()=>{this.off("CanPlay",e)}),this.video.videoTracks&&(this.addEventListener(this.video.videoTracks,"addtrack",()=>{this.emit("VideoTracksChange",ss(this.video.videoTracks)),this.restoreUserVideoTrack()}),this.addEventListener(this.video.videoTracks,"removetrack",()=>{this.emit("VideoTracksChange",ss(this.video.videoTracks))}),this.addEventListener(this.video.videoTracks,"change",()=>{const{videoHeight:e,videoWidth:t,videoTracks:r}=this.video,n=as(ls({videoTracks:r,videoHeight:e,videoWidth:t}));this.emit("InternalVideoTrackValueChange",n&&n.value)})),this.video.audioTracks&&(this.addEventListener(this.video.audioTracks,"addtrack",e=>{this.emit("AudioTracksChange",is(this.video.audioTracks)),this.actualizeNativeAudioTrack(),this.restoreUserAudioTrack()}),this.addEventListener(this.video.audioTracks,"removetrack",()=>{this.emit("AudioTracksChange",is(this.video.audioTracks)),this.actualizeNativeAudioTrack()}),this.addEventListener(this.video.audioTracks,"change",e=>{this.actualizeNativeAudioTrack(),this.saveUserAudioTrack(e)})),this.video.textTracks&&this.addEventListener(this.video.textTracks,"addtrack",()=>{this.emit("TextTracksChange",os(this.video.textTracks))}),this.addVideoEventListener("progress",()=>{const{videoType:e}=this.state.controller;e!==Uc.LIVE&&e!==Uc.EVENT||this.emit("DvrChange")}),this.subscribeCueChange()}constructor(e){super(e),this.props=e,this.serverTimeEstimator=void 0,this.estimatorPollingInterval=void 0,this.isRecoverablePlaylistHTTPStatus=!0,this.checkPlaylistHTTPStatusPromise=void 0,this.applyStartPosition=()=>{if(!this.canSeek())return;const e=this.getCurrentTime(),t=this.getStartPosition();ie(t)&&e!==t&&this.seekInternal(t)},this.saveUserAudioTrack=e=>{if(!e.isTrusted)return;const t=ts(this.video);t&&this.playerStore.dispatch(Hh({name:t.name||void 0,lang:t.lang||void 0}))},this.actualizeNativeAudioTrack=()=>{const e=ts(this.video);this.emit("InternalAudioTrackValueChange",e&&e.value)},this.notifyTextTracksChanged=()=>{const e=function(e,t){const{textTracks:r=[]}=e;for(let n=0;n<r.length;n++){const e=r[n];if(e&&rs(e)&&e.mode===t)return ns(e,n)}}(this.video,this.getVisibleTextTrackMode());this.emit("InternalTextTrackValueChange",e&&e.value)},this.playerStore.dispatch(Lh(!0)),this.playerStore.dispatch(Mh(!0)),this.serverTimeEstimator=new ny,this.estimateLatency(),this.on("VideoTypeChange",e=>{this.startLatencyPolling(e)}),this.on("Detach",()=>this.stopLatencyPolling()),this.once("Destroy",()=>this.stopLatencyPolling())}getServerTime(){const e=this.serverTimeEstimator.getServerTime();return e?Z(e):void 0}setAudioTrack(e){if(""===e.value)return;const t=me(this.props.video.audioTracks),r=t.find(t=>t.id===e.value);r&&t.forEach(e=>e.enabled=e.id===r.id)}setTextTrack(e){""!==e.value&&this.renderTextTrack(e.value)}disableTextTrack(){this.renderTextTrack(void 0)}renderTextTrack(e){Ka(this.video.textTracks).forEach((t,r)=>{t&&(ns(t,r).value===e?t.mode=this.getVisibleTextTrackMode():t.mode=this.getHiddenTextTrackMode())})}seekInternal(e){qo(this.video,Z(L(e,0,this.getDuration()||0)))}getSeekableRange(){const e=this.video.seekable;return{start:Z(e.start(0)),end:Z(e.end(e.length-1))}}getFragmentsData(){if(!this.isDvrEnabled()||!this.video||!this.video.seekable.length)return super.getFragmentsData();const{start:e,end:t}=this.getSeekableRange();return{totalDuration:Pc(t,e),fragmentDuration:Xg,startTime:e}}shouldSkipVideoTagError(e){return e.code!==uy.MEDIA_ERR_DECODE&&e.code!==uy.MEDIA_ERR_ENCRYPTED&&e.code!==uy.MEDIA_ERR_SRC_NOT_SUPPORTED||cn(this.state)}async onVideoTagError(){const e=ra(this.video);if(this.shouldSkipVideoTagError(e))return;this.video.poster=Wc,this.checkPlaylistHTTPStatus();const t=!this.recoverHelper.allowed||!this.isRecoverablePlaylistHTTPStatus,r=new gu({code:$a(e),details:e,isFatal:t});if(!t)return this.props.onError(r),void this.recoverHelper.planTask(()=>this.recoverStream(),{delay:500,reason:"VideoTagError ["+e.code+"]["+e.message+"]"});const n=await this.checkPlaylistHTTPStatusPromise;n&&n.isFatalError()?this.props.onError(n.toPlayerError()):this.props.onError(r)}onTick(e){super.onTick(e),this.isDvrEnabled()&&this.updateSkinDvrParameters(e)}async attachEncoder(){await super.attachEncoder();const e=e=>(this.props.onError(e),Promise.reject(y(e.code,this.state.ad.adblockDetected))),t="mp4"===pe(fe(this.getStreamUrl().toLowerCase()));if(this.engine!==Kv.YASP&&!t&&!Nm.canPlayHlsOnNative())return e(new gu({code:Ad.NATIVE_HLS_NOT_SUPPORTED_ERROR}));const{video:r}=this;this.subscribeContentImpression();try{await this.initDrm(this.props.stream.drmConfig)}catch(pT){return e(pT)}const n=ie(this.getStartPosition())?this.waitForStartPositionEstablished():void 0;this.initVideoTypeQualifier(),this.logLoadToRum(),La(r,()=>r.src=this.getStreamUrl()),void 0!==n&&await n,this.startLatencyPolling(this.state.controller.videoType)}getStreamUrl(){const e=this.getStartPosition();return Za(super.getStreamUrl(),e)}onOnline(){}onOffline(){}canSeek(){const{video:e}=this.props;return e.readyState>0&&e.duration>0}getStartPosition(){const{videoTime:e,utc:t}=this.state.controller.startPosition;if(!ie(e)&&!ie(t))return;const r=this.getUtcStartTime();return r>0&&ie(t)&&t>0?t-r:ie(e)?e:void 0}checkPlaylistHTTPStatus(){this.checkPlaylistHTTPStatusPromise||(this.checkPlaylistHTTPStatusPromise=this.loadPlaylistInfo().then(tA.fromXHR).then(e=>(this.isRecoverablePlaylistHTTPStatus=!e.isFatalError(),e)).catch(()=>{}))}estimateLatency(){const e=od();Ft({url:this.getStreamUrl(),method:"HEAD",timeout:5e3}).then(t=>{this.serverTimeEstimator.parseServerTime({"x-server-time-ms":t.getResponseHeader("x-server-time-ms"),date:t.getResponseHeader("date")},od()-e)},()=>{})}startLatencyPolling(e){this.estimatorPollingInterval||e!==Uc.EVENT&&!Uc.LIVE||(this.estimatorPollingInterval=window.setInterval(()=>this.estimateLatency(),1e4))}stopLatencyPolling(){clearInterval(this.estimatorPollingInterval),this.estimatorPollingInterval=void 0}initTextTracks(){let e=!1,t=!1;const{textTracks:r}=this.video;if(!r)return;const n=ne(()=>{this.castTextTracksModeOnInit(),this.addEventListener(r,"change",this.notifyTextTracksChanged),this.notifyTextTracksChanged()}),i=()=>{e&&t&&n()};this.addEventListener(this.video,"loadedmetadata",()=>{e=!0,i()}),this.addEventListener(r,"addtrack",function(e,t,r,n){function i(){null!==o&&clearTimeout(o),o=null}3===arguments.length&&"boolean"!==typeof r&&(n=r,r=!1);let o=null;const a=function(){const a=arguments;n=n||this,r&&null===o&&e.apply(n,a),i(),o=window.setTimeout((function(){r||e.apply(n,a),o=null}),t)};return a.cancel=i,a}(()=>{t=!0,i()},0))}setFirstAudioTrack(){this.restoreUserAudioTrack();const e=ts(this.video);e&&this.emit("InternalAudioTrackValueChange",e.value)}loadPlaylistInfo(){return Ft({method:"HEAD",url:this.getStreamUrl(),timeout:3e3,checkStatus:()=>!0})}subscribeCueChange(){const{textTracks:e}=this.video;if(!e||"function"!==typeof e.addEventListener)return;const t=e=>{const t=e.track;t&&"metadata"===t.kind&&(t.mode="hidden",this.addEventListener(t,"cuechange",e=>{const{activeCues:t}=e.target,{length:r}=t;if(!r)return;const n=t[r-1];if(!n)return;const{value:i,startTime:o,endTime:a}=n;if(!i)return;const s="number"===typeof a&&isFinite(a)?Pc(a,o):Xg,l=me(t).map(e=>{if(e&&e.value){const{data:t}=e.value;if("string"===typeof t)return t}return""});this.emit("MetadataChange",{fragmentMetadataArray:l,fragmentStart:o,fragmentDuration:s,src:this.video.src})}))};e.addEventListener("addtrack",t),this.on("Destroy",()=>e.removeEventListener("addtrack",t))}castTextTracksModeOnInit(){if(this.state.skin.useNativeSubtitles)return;void 0!==Ka(this.video.textTracks).find(e=>Boolean(e&&"disabled"===e.mode))||Ka(this.video.textTracks).forEach(e=>{e&&(e.mode="showing"===e.mode?this.getVisibleTextTrackMode():this.getHiddenTextTrackMode())})}}class iA extends nA{constructor(e){super(e),this.props=e,this.engine=Kv.MP4;const t=ne(()=>{this.emit("VideoTracksChange",function(e){const{videoWidth:t,videoHeight:r}=e;return[{name:Ia({width:$(t),height:$(r)}),value:"0",bitrate:Bv,width:t,height:r}]}(e.video))});this.once("CanPlay",t),this.once("Destroy",()=>this.off("CanPlay",t))}async attachEncoder(){await super.attachEncoder(),Su.log("mp4 native mode")}waitForStartPositionEstablished(){return new Promise((e,t)=>{const r=this.addVideoEventListener("durationchange",()=>{this.canSeek()&&(this.applyStartPosition(),r(),e())});this.once("Detach",()=>{r(),t()})})}initVideoTypeQualifier(){this.emit("VideoTypeChange",Uc.VOD)}initDrm(){return Promise.resolve()}setVideoTrack(){}}const oA=Z(5*Math.random()),aA=e=>!!e.data&&418===e.data[1],sA={error:"",isFatal:!1},lA=e=>{try{return hs(e.data[2])}catch(pT){return sA}};let dA;!function(e){e.EXPIRED_SIGNATURE="EXPIRED_SIGNATURE"}(dA||(dA={}));class cA{static convertToTextTrackCue(e){return shaka&&VTTCue?e.startTime>=e.endTime?null:new VTTCue(e.startTime,e.endTime,e.payload):null}static removeWhere(e,t){const r=e.mode;e.mode="hidden";const n=e.cues||[];for(let i=n.length-1;i>=0;i--){const r=n[i];r&&t(r)&&e.removeCue(r)}e.mode=r}constructor(e,t){this.useNativeSubtitles=t,this.textTrack=void 0,me(e.textTracks).forEach(e=>{e.mode="disabled","StreamPlayerJs TextTrack"===e.label&&(this.textTrack=e)}),this.textTrack||(this.textTrack=e.addTextTrack("subtitles","StreamPlayerJs TextTrack")),this.textTrack.mode=this.hiddenMode()}remove(e,t){if(!this.textTrack||!shaka)return!1;return cA.removeWhere(this.textTrack,r=>r.startTime<t&&r.endTime>e),!0}append(e){if(!shaka||!this.isTextVisible()||!this.textTrack)return;const t=e.map(e=>{if(e.nestedCues.length){const t=e.nestedCues.map(e=>e.spacer?"\n":e.payload+" ").join("").replace(/ $/m,""),r=e.clone();return r.nestedCues=[],r.payload=t,r}return e}),r=[],n=this.textTrack.cues?Array.from(this.textTrack.cues):[];for(const i of t){if(!n.some(e=>e.startTime===i.startTime&&e.endTime===i.endTime&&e.text===i.payload)){const e=cA.convertToTextTrackCue(i);e&&r.push(e)}}r.slice().sort((e,t)=>e.startTime!==t.startTime?e.startTime-t.startTime:e.endTime!==t.endTime?e.endTime-t.startTime:r.indexOf(t)-r.indexOf(e)).forEach(e=>{this.textTrack.addCue(e)})}destroy(){if(this.textTrack){const e=e=>!0;cA.removeWhere(this.textTrack,e)}return this.textTrack=void 0,Promise.resolve()}isTextVisible(){return!!this.textTrack&&this.textTrack.mode!==this.hiddenMode()}setTextVisibility(e){this.textTrack&&(this.textTrack.mode=e?this.showingMode():this.hiddenMode())}hiddenMode(){return"disabled"}showingMode(){return Wa(this.useNativeSubtitles())}}let uA=!1;const hA={version:'Period>SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:version"]',uriTemplate:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:uri"]',tiles:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:tiles"]',spriteDuration:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:duration"]',resolution:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:resolution"]'},fA={version:hA.version,uriTemplate:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:uri"]',tiles:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:tiles"]',spriteDuration:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:duration"]',resolution:'SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:lowres:resolution"]'},pA=document.createElement("canvas"),gA=pA.getContext("2d");class vA extends Vy{constructor(){super(),this.blacklist=new Set,this.destroyed=!1,this.checkLoopTimeoutId=void 0,this.startLoop(),this.once("Destroy",()=>{this.destroyed=!0})}destroy(){this.stopLoop(),super.destroy()}addHostname(e){av.indexOf(e)>-1||this.blacklist.has(e)||this.blacklist.add(e)}isBlacklisted(e){return this.blacklist.has(e)}async checkBlacklistedHosts(){await Promise.all([...this.blacklist].map(async e=>{try{await qr(kn(e)),this.blacklist.delete(e)}catch(t){}}))}startLoop(){this.destroyed||(this.checkLoopTimeoutId=setTimeout(async()=>{this.stopLoop(),await this.checkBlacklistedHosts(),this.startLoop()},3e4))}stopLoop(){clearTimeout(this.checkLoopTimeoutId)}}const mA=Number.EPSILON||Math.pow(2,-52),EA=ne(()=>{const e=Mi("Chrome");if(void 0===e)return!0;const[t]=e;return t>70}),yA=/^(ext-)?strm[^\.]+\.strm\.yandex\.net$/;class AA extends ly{constructor(e,t){super(),this.source=e,this.cacheData=t,this.addDestroyHandler(()=>{var e;null==(e=this.cacheData.segmentCache)||e.clear(),this.cacheData.loadedManifest=void 0,this.cacheData.cachedVariantTrack=void 0})}preload(){return Promise.resolve()}getBandwidthEstimate(){}copyCachedData(){var e;return{segmentCache:null==(e=this.cacheData.segmentCache)?void 0:e.copy(),loadedManifest:this.cacheData.loadedManifest}}getCachedVariantTrack(){return this.hasCachedSegments()?this.cacheData.cachedVariantTrack:void 0}getBufferedInfo(){return this.cacheData.bufferedInfo}getSource(){return this.source}getType(){return am.Cache}getManifestXml(){return this.cacheData.manifestXml}hasManifest(){return void 0!==this.cacheData.loadedManifest}hasCachedSegments(){var e;return Boolean(null==(e=this.cacheData.segmentCache)?void 0:e.hasCachedData())}}const SA=[429,500,502,503,504],TA=Z(.001);class RA extends Zy{static fuzz(e,t){void 0===t&&(t=.5);return(e<10?2**e*100:6e4)*(1+(2*Math.random()-1)*t)}initInternalSubscribe(){super.initInternalSubscribe(),this.once("Destroy",()=>this.chunkHostnameBlacklist.destroy()),this.once("Destroy",()=>this.stopShakaConfigAutoUpdate()),this.once("Destroy",()=>{var e;return null==(e=this.customNetworkingEngine)?void 0:e.destroy()}),this.once("Destroy",()=>{var e;return null==(e=this.preloader)?void 0:e.destroy()});const e=e=>{Fo(this.shakaPlayer)&&this.shakaPlayer.setTextTrackVisibility(Boolean(e))};this.on("InternalTextTrackValueChange",e),this.once("Destroy",()=>this.off("InternalTextTrackValueChange",e)),this.addEventListener(this.video,"play",this.updateBufferingState),this.on("VideoTypeChange",e=>{if(void 0===e)return;this.shakaPlayer&&this.setShakaAvailabilityWindowOverride(this.shakaPlayer);const t=e===Uc.VOD;this.setNativeTimeControlVisibility(t),this.setNativeTimelineControlVisibility(t)}),this.on("ContentImpression",()=>{var e,t,r;switch(null!=(e=null==(t=this.shakaPlayer)||null==(r=t.drmInfo())?void 0:r.keySystem)?e:null){case"com.widevine.alpha":return this.emit("DrmSystemChange",jm.widevine);case"com.microsoft.playready":return this.emit("DrmSystemChange",jm.playready)}})}constructor(e,n){var i;super(e),i=this,this.preloader=n,this.engine=Kv.MPD,this.shakaPlayer=void 0,this.chunkHostnameBlacklist=new vA,this.shakaConfigAutoUpdateInterval=void 0,this.manifestXML=void 0,this.initMpdEncoderPromise=void 0,this.detachMpdEncoderCalled=!1,this.useNativeSubtitles=!1,this.customNetworkingEngine=void 0,this.lastTrackBeforeDetach=void 0,this.preloadedTrack=void 0,this.isPauseCalled=!1,this.attempt=0,this.playingStateBeforeLoadShakaSource=void 0,this.abrManager=void 0,this.abrRestrictionsHelper=new ZE({getManifestXml:()=>this.manifestXML,getState:()=>this.state,getCapSizes:()=>this.getCapSizes()}),this.tryToInjectWidevineCert=ne(async()=>{const{drmConfig:e={}}=this.props.stream;if(Om)return;if(!e)return;const t=e.advanced;if(t&&t["com.widevine.alpha"])try{const{serverCertificateUrl:e}=t["com.widevine.alpha"];if(!e)return;const{response:r}=await Ft({method:"get",responseType:"arraybuffer",url:e,withCredentials:this.withCredentials});t["com.widevine.alpha"].serverCertificate=new Uint8Array(r)}catch(r){const e=new gu(r,{isFatal:!1,code:Ad.MPD_WIDEVINE_CERT_LOAD_ERROR});this.props.onError(e)}}),this.updateBufferGoal=()=>{this.updateShakaConfig()},this.shakaFailureCallback=e=>{const t=RA.fuzz(this.attempt++),{clear:r,promise:n}=Nc(t);this.once("Detach",r),n.then(()=>{var e;null==(e=this.shakaPlayer)||e.retryStreaming(),this.off("Detach",r)})},this.shakaHTTPRequestFilter=(e,t)=>r(()=>this.shakaHTTPRequestFilterInternal(e,t),this.onShakaFilterError),this.shakaHTTPRequestFilterInternal=(e,t)=>{if("undefined"!==typeof shaka)switch(t.allowCrossSiteCredentials=this.withCredentials,e){case shaka.net.NetworkingEngine.RequestType.LICENSE:const{stream:e}=this.props,{drmConfig:r}=e;!function(e,t){if(!t)return;if(Jr(e.uris[0],"wrapped"))return;const{requestParams:r}=t;if(r){const{StringUtils:t,Uint8ArrayUtils:n}=shaka.util,i=Ps({rawLicenseRequestBase64:n.toBase64(new Uint8Array(e.body||new ArrayBuffer(0)))},r);e.uris=e.uris.map(e=>Zr(e,"wrapped","true")),e.body=t.toUTF8(JSON.stringify(i)),e.headers=Ps({},e.headers,{"Content-Type":"application/json"})}t.headers&&(e.headers=Ps({},e.headers,t.headers))}(t,r);break;case shaka.net.NetworkingEngine.RequestType.SEGMENT:Es(t,this.getRemainingBufferedTime());const{uris:n}=t,i=n.filter(e=>{const{hostname:t}=se(e);return!this.chunkHostnameBlacklist.isBlacklisted(t)});if(0===i.length)break;t.uris=i}},this.shakaPreviewsHTTPResponseFilter=(e,t)=>r(()=>this.shakaPreviewsHTTPResponseFilterInternal(e,t),this.onShakaFilterError),this.shakaPreviewsHTTPResponseFilterInternal=(e,t)=>{if(void 0===shaka)return;if(e!==shaka.net.NetworkingEngine.RequestType.MANIFEST)return;if(!t.data)return;const r=t.fromCache&&this.manifestXML||Jo(e,t);if(!r)return;this.manifestXML&&this.checkRepresentationChange(this.manifestXML,r),this.manifestXML=r,this.videoTrackLabels=function(e){const t=new Map;return me(e.querySelectorAll('SupplementalProperty[schemeIdUri="urn:mpeg:yandex:labels:quality"]')).forEach(e=>{const r=e.getAttribute("value");if(!r)return;r.split(",").filter(Boolean).forEach(e=>{const[r,n]=e.split(":");void 0!==Ua(r)&&n&&t.set(r,n)})}),t}(r);const n=vs(r,Ry.LOWRES),i=vs(r,Ry.HIGHRES),o={version:function(e){const t=e.querySelector('AdaptationSet[mimeType="image/jpeg"] SupplementalProperty[schemeIdUri="urn:mpeg:yandex:thumbnail:version"]');return t?parseFloat(t.getAttribute("value")||""):0}(r),lowRes:n,highRes:i};o.highRes&&this.props.onThumbnailTileGeneralMetaInfoChange(o)},this.updateBufferingState=()=>{if(cn(this.state))return;const{shakaPlayer:e}=this;if(void 0===e)return;if(function(e){if(!e.isBuffering())return!1;const t=zo(e);if(!(t===Uc.LIVE||t===Uc.EVENT))return!1;const r=e.getMediaElement();if(!r)return!1;const{currentTime:n}=r,i=Wo(e);if(0===i)return!1;const o=n+i/2,a=Ko(e,Z(n)),s=Ko(e,Z(o));return Boolean(a&&!s)}(e)){const e=xr(Eu.LiveEdge,void 0);this.playerStore.dispatch($h(e))}const t=this.computeVideoPlayingState(e);this.emit("InternalPlayingStateChange",t)},this.onShakaAdaptationEvent=()=>{this.actualizeAvailableVariantTracks(),this.actualizeActiveVariantTrack()},this.onShakaEmsgEvent=e=>{if(Su.log("-> Shaka EmsgEvent",e),!(0,Ql.K)(e)||!(0,Ql.K)(e.detail)||!(0,Ql.K)(e.detail.messageData))return;const{startTime:t,messageData:r}=e.detail;py().parse(r).then((function(e){let{writer:r}=void 0===e?{}:e;r&&i.emit("MetadataChange",{fragmentMetadataArray:[r],fragmentStart:t,fragmentDuration:Wo(i.shakaPlayer,t),src:i.getStreamUrl()})}))},this.reportLargeGap=e=>{Su.log("-> Shaka LargeGapEvent",e),this.props.logEvent({event:"MpdLargeGap",params:{currentTime:e.currentTime,gapSize:e.gapSize}})},this.actualizeTracks=()=>{Fo(this.shakaPlayer)&&(this.actualizeAvailableTracks(),this.actualizeActiveTracks())},this.onShakaErrorEvent=e=>{if(!shaka||!e)return;const{detail:t}=e;this.onShakaError(t);const r=ps(shaka,t);r&&r.isFatal&&this.shakaPlayer&&(this.shakaPlayer.destroy(),this.shakaPlayer=void 0)},this.onShakaError=e=>{if(!shaka)return;Su.error("-> onShakaError",e);const t=function(e,t,r){let{code:n}=t;return n===e.util.Error.Code.VIDEO_ERROR&&r.controller.watchedTime>0}(shaka,e,this.state)&&this.recoverHelper.allowed,r=function(e,t,r){let{code:n,data:i}=t;return n===e.util.Error.Code.BAD_HTTP_STATUS?SA.indexOf(i[1])>-1:i[2]===e.net.NetworkingEngine.RequestType.MANIFEST||n!==e.util.Error.Code.HTTP_ERROR?n===e.util.Error.Code.TIMEOUT:r<=10}(shaka,e,this.attempt);(t||r)&&(e.severity=shaka.util.Error.Severity.RECOVERABLE);const n=ps(shaka,e);n&&(t&&this.recoverHelper.planTask(()=>this.recoverStream(),{delay:0,reason:n.code}),this.checkDeadChunkServer(e),this.props.onError(n))},this.onShakaFilterError=e=>{if(shaka){if(Su.error("-> onShakaFilterError",e),gs(e))return this.onShakaError(e);this.props.onError(new gu({code:Ad.SHAKA_FILTER_ERROR,message:e.message,isFatal:!1,stack:e.stack}))}},this.onShakaNetworkSuccess=e=>{if(this.attempt=0,shaka&&e===shaka.net.NetworkingEngine.RequestType.MANIFEST){const{videoType:e}=this.state.controller;e!==Uc.LIVE&&e!==Uc.EVENT||this.emit("DvrChange")}},this.onShakaNetworkError=(e,t)=>{if("undefined"===typeof shaka||void 0===this.shakaPlayer)return;if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&aA(t)){if(lA(t).isFatal||t.severity===shaka.util.Error.Severity.CRITICAL)return void(t.severity=shaka.util.Error.Severity.CRITICAL)}const r=ds(shaka,t);451===r||my.includes(r)?t.severity=shaka.util.Error.Severity.CRITICAL:this.onShakaError(t)},this.parseTextTrack=e=>{let{label:t,language:r,originalTextId:n}=e;const i=Ts(this.manifestXML,n)||r;return{name:t||i||n,value:n,lang:i}},function(e){try{if(!navigator.requestMediaKeySystemAccess)return;const t=bs(e);if(t===window)return;if(!t.navigator.requestMediaKeySystemAccess)return;navigator.requestMediaKeySystemAccess=function(){return t.navigator.requestMediaKeySystemAccess(...arguments)}}catch(t){}}(this.video),t(ko()),n&&n.isDestroyed&&(this.preloader=void 0),this.video.classList.add(By().video_hiddenSubtitlesBtn),this.playerStore.dispatch(Lh(!0)),function(){if(!uA&&(uA=!0,window.MediaKeySession)){const{prototype:e}=window.MediaKeySession,{close:t}=e;e.close=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Promise.race([t.call(this,r),Nc(200).promise])}}}(),this.useNativeSubtitles=this.state.skin.useNativeSubtitles}getMaxCapAllowedVideoTrack(){var e;const t=null==(e=this.abrManager)?void 0:e.getMaxCapAllowedVideoTrack();if(void 0!==t)return this.state.controller.videoTracks.find(e=>{let{value:r}=e;return r===t.originalId})}getFragmentsData(){const{start:e=Z(0),end:t=Z(0)}=void 0===this.shakaPlayer?{}:this.shakaPlayer.seekRange();return{totalDuration:Pc(t,e),fragmentDuration:Wo(this.shakaPlayer),startTime:e}}onOnline(){}onOffline(){}getUtcStartTime(){const e=Xo(this.shakaPlayer,this.manifestXML);return void 0===e?super.getUtcStartTime():e}getUtcPosition(){const e=function(e,t){if(void 0===e)return;const r=Xo(e,t);if(void 0===r)return;const n=e.getMediaElement();return n?bc(r,Z(n.currentTime)):void 0}(this.shakaPlayer,this.manifestXML);return void 0===e?super.getUtcPosition():e}setVideoTrack(e){var t;let{value:r}=e;if(void 0===this.shakaPlayer)return;if("auto"===r)return void this.setAbrEnabled(!0);const n=Uo(this.shakaPlayer);if(void 0===n)return;const i=Ss(null==(t=this.abrManager)?void 0:t.getVariants(),r,n.originalAudioId),o=this.shakaPlayer.getVariantTracks().find(e=>e.id===i);void 0!==o&&(this.setAbrEnabled(!1),this.setVariantTrack(o))}setAudioTrack(e){let{lang:t,value:r}=e;if(void 0===this.shakaPlayer)return;const n=Uo(this.shakaPlayer);if(void 0===n)return;const i=this.shakaPlayer.getVariantTracks().find(e=>{const t=e.originalAudioId===r,i=e.originalVideoId===n.originalVideoId;return t&&i});if(!n||!i)return void this.shakaPlayer.selectAudioLanguage(t);const{height:o,videoBandwidth:a}=n,{language:s}=i;this.setVariantTrack(this.shakaPlayer.getVariantTracks().find(e=>e.height===o&&e.videoBandwidth===a&&e.language===s))}setTextTrack(e){let{value:t}=e;if(!this.shakaPlayer)return;const r=this.shakaPlayer.getTextTracks().find(e=>{let{originalTextId:r}=e;return r===t});r&&(this.shakaPlayer.selectTextTrack(r),this.emit("InternalTextTrackValueChange",t))}disableTextTrack(){this.shakaPlayer&&this.emit("InternalTextTrackValueChange",void 0)}toggleNativeSubtitles(e){super.toggleNativeSubtitles(e),this.useNativeSubtitles=e}captureScreenshot(e){return(e=>{if(!gA)return Promise.reject();pA.width=e.videoWidth,pA.height=e.videoHeight;try{gA.drawImage(e,0,0,e.videoWidth,e.videoHeight)}catch(t){return Promise.reject(t)}return new Promise((e,r)=>{try{pA.toBlob(t=>{e(t)},"image/jpeg")}catch(t){r(t)}})})(e).then(e=>{this.previousScreenshotBlobUrl=URL.createObjectURL(e)}).catch(()=>{this.previousScreenshotBlobUrl=void 0}).then(()=>this.previousScreenshotBlobUrl)}onVideoTagError(e){super.onVideoTagError(e),Su.log("-> onVideoTagError",e)}getDuration(){return Fo(this.shakaPlayer)?this.shakaPlayer.seekRange().end:Z(NaN)}async preloadSource(){var e;this.tryToInjectWidevineCert(),await ko();if(this.isDestroyed||this.preloader&&!this.preloader.isDestroyed||void 0!==this.initMpdEncoderPromise||void 0!==this.shakaPlayer||!shaka.Player.isBrowserSupported()||(null==(e=this.customNetworkingEngine)?void 0:e.hasCachedData()))return;const t=new dy({source:this.props,getState:()=>this.state,getCapSizes:()=>this.getCapSizes(),type:am.Internal});this.preloader=t,t.addDestroyHandler(()=>this.preloader=void 0);const r=t.getVideoElement(),n=T(r,"canplay",()=>{this.captureScreenshot(r).then(()=>{this.props.setPlayerBackgroundImage(this.previousScreenshotBlobUrl),this.props.setPlayerBackgroundVisibility(!1)})},{once:!0});this.once("ContentImpression",n),this.once("Destroy",n),await t.preload()}createCachePreloader(){if(this.customNetworkingEngine)return new AA({stream:this.props.stream,sourceParams:this.props.sourceParams},Is({},this.customNetworkingEngine.copyCachedData(),{cachedVariantTrack:this.customNetworkingEngine.getCurrentVariantTrack(),manifestXml:this.manifestXML,bufferedInfo:void 0===this.shakaPlayer?{total:[],audio:[],video:[]}:this.shakaPlayer.getBufferedInfo()}))}getSeekableRange(){const{start:e,end:t}=Fo(this.shakaPlayer)?this.shakaPlayer.seekRange():{start:Z(0),end:Z(0)};return{start:e,end:Z(Math.min(t,Pc(this.getDuration(),TA)||0))}}canSeek(){return Fo(this.shakaPlayer)&&super.canSeek()}onTick(e){void 0!==this.shakaPlayer&&Fo(this.shakaPlayer)&&!1===this.shakaPlayer.isLive()&&void 0!==this.state.controller.videoType&&this.state.controller.videoType!==Uc.VOD&&this.emit("VideoTypeChange",Uc.VOD),super.onTick(e)}getStreamUrl(){const e=super.getStreamUrl(),t={audio_mbr:"1",mburl:"1"};return na(e)||(t.preview="1"),Zy.isLiveStreamUrl(e)&&(t.packager="1",t.lowlatency="1"),he(e,t,{saveOriginalPath:!0})}getMaxBufferLength(){const e=zo(this.shakaPlayer);return!(e===Uc.LIVE||e===Uc.EVENT)||this.shouldUseLowBuffer()||this.isLowLatencyLive()?super.getMaxBufferLength():this.props.liveOffset}async detachEncoder(){this.detachMpdEncoderCalled=!0;const e=Uo(this.shakaPlayer);this.lastTrackBeforeDetach=e||void 0,await super.detachEncoder(),this.manifestXML=void 0;const{video:t,shakaPlayer:r}=this;t.classList.remove(By().video_hiddenSubtitlesBtn),this.stopShakaConfigAutoUpdate(),void 0!==r&&await this.preventPauseAsync(t,()=>(this.shakaPlayer=void 0,r.destroy())),n(window.VTTCue)||delete window.VTTCue}async attachEncoder(){this.detachMpdEncoderCalled=!1,await super.attachEncoder(),this.initMpdEncoderPromise=this.initMpdEncoder(),await this.initMpdEncoderPromise,this.initMpdEncoderPromise=void 0}getBandwidthEstimate(){var e,t;const r=null==(e=this.preloader)?void 0:e.getBandwidthEstimate();if(r&&ie(r.value))return r;const n=null==(t=this.shakaPlayer)?void 0:t.getStats(),{estimatedBandwidth:i,estimatedBandwidthSource:o}=n||{};return i?{value:i,source:o}:super.getBandwidthEstimate()}getServerTime(){var e;const t=null==(e=this.customNetworkingEngine)?void 0:e.getServerTime();return t?Z(t):void 0}getRemainingBufferedTime(){if(!Fo(this.shakaPlayer))return super.getRemainingBufferedTime();const{currentTime:e}=this.state.controller,{audio:t,video:r,total:n}=this.shakaPlayer.getBufferedInfo();return{total:Mn(n,e)||Z(0),video:Mn(r,e)||Z(0),audio:Mn(t,e)||Z(0)}}getSegmentSize(){if(!Fo(this.shakaPlayer))return;const e=this.shakaPlayer.getStreamForTime(this.getCurrentTime());if(!e)return;const{stream:{width:t,height:r}}=e;return t&&r?{width:t,height:r}:void 0}getUtcEndTime(){if(zo(this.shakaPlayer)===Uc.LIVE)return this.getSeekableRange().end;const e=this.getUtcStartTime();return e?bc(e,this.getDuration()):Z(0)}calculateDVRParams(){const{videoType:e}=this.state.controller;if(e!==Uc.LIVE)return super.calculateDVRParams();const{fragmentDuration:t,startTime:r,totalDuration:n}=this.getFragmentsData(),i=Ic(t,1);return{fragmentDuration:t,dvrStartTime:r,dvrDuration:n,skinDVRStartTime:bc(i,r),skinDVRDuration:Pc(n,i)}}handleVideoElementPlayEvent(){var e;null!=(e=this.shakaPlayer)&&e.isBuffering()||super.handleVideoElementPlayEvent()}onVideoResize(){super.onVideoResize(),this.actualizeActiveVariantTrack()}async recoverStream(){return 1===this.recoverHelper.attempt&&this.captureScreenshot(this.props.video).then(()=>{this.handleBackgroundBeforeRecover()}),super.recoverStream()}async play(){if(this.isPauseCalled=!1,this.initMpdEncoderPromise&&await this.initMpdEncoderPromise,this.isPauseCalled)throw new Error("Pause called during play");await super.play()}pause(){this.isPauseCalled=!0,super.pause()}handleBackgroundBeforeRecover(){this.props.setPlayerBackgroundImage(this.previousScreenshotBlobUrl),this.once("CanPlay",()=>{this.props.setPlayerBackgroundImage(),this.clearScreenshot()})}async initMpdEncoder(){var e,t,r,n;this.tryToInjectWidevineCert(),(0,Id.Z$)("drm",Rs(this.props.stream.drmConfig));try{await ko()}catch(pT){const t=new gu(pT,{code:Ad.MPD_SHAKA_INIT_ERROR});throw this.props.onError(t),t}if(this.detachMpdEncoderCalled)return;const i=La(this.video,()=>new shaka.Player(this.video));this.shakaPlayer=i,this.customNetworkingEngine=this.customNetworkingEngine||new iy(null==(e=this.preloader)?void 0:e.copyCachedData()),this.customNetworkingEngine.setup(i,this.onShakaNetworkSuccess,this.onShakaNetworkError),this.playerStore.dispatch(lf(void 0===this.preloader?void 0:{preloadingMethod:this.preloader.getType(),preloaded:this.preloader.preloaded})),this.manifestXML=null==(t=this.preloader)?void 0:t.getManifestXml(),this.preloadedTrack=null==(r=this.preloader)?void 0:r.getCachedVariantTrack(),null==(n=this.preloader)||n.destroy(),this.preloader=void 0,this.subscribeContentImpression(),this.attachShakaEventListeners(i);const o=i.getNetworkingEngine();this.customNetworkingEngine.registerRequestFilter(this.shakaHTTPRequestFilter),o.registerResponseFilter(this.shakaPreviewsHTTPResponseFilter);const{video:a}=this,s=()=>this.useNativeSubtitles;this.configureShaka(i,Is({},this.getInitialShakaConfig(),{textDisplayFactory:function(){return new cA(a,s)}})),this.logLoadToRum();try{if(await this.preventPauseAsync(this.video,async()=>{this.playingStateBeforeLoadShakaSource=this.state.controller.playingState,await Zo({shakaPlayer:i,streamUrl:this.getStreamUrl(),startPosition:this.state.controller.startPosition}),this.playingStateBeforeLoadShakaSource=void 0}),this.preloadedTrack=void 0,this.detachMpdEncoderCalled)return;this.initShakaConfigAutoUpdate(),this.lastTrackBeforeDetach=void 0}catch(pT){if(this.playingStateBeforeLoadShakaSource=void 0,this.detachMpdEncoderCalled)return;if(gs(pT))return void this.onShakaError(pT);this.props.onError(new gu(pT,{code:Ad.SHAKA_LOAD_SOURCE_ERROR,isFatal:!0}))}}findPreloadedVariant(e){var t;const r=this.preloadedTrack||this.lastTrackBeforeDetach;if(void 0!==r&&null!=(t=this.customNetworkingEngine)&&t.hasCachedSegments())return e.find(e=>{let{video:t,audio:n}=e;const i=!t||t.originalId===r.originalVideoId,o=!n||n.originalId===r.originalAudioId;return i&&o})}getPlaybackRate(){return this.state.controller.playbackRate}getInitialShakaConfig(){var e;const{stream:t}=this.props,r=this.getBandwidthEstimate(),n=this.abrManager=new QE({getPlaybackRate:this.getPlaybackRate.bind(this),bandwidthEstimateOffset:null!=(e=this.props.bandwidthEstimateOffset)?e:0,getSegmentDuration:()=>Wo(this.shakaPlayer),getFilterParams:e=>({preloadedVariant:this.findPreloadedVariant(e),restrictions:this.abrRestrictionsHelper.getAbrRestrictions()}),isLowLatencyLive:()=>this.isLowLatencyLive()});return Is({},CE,{abr:Is({},CE.abr,null!=r&&r.value?{defaultBandwidthEstimate:r.value,defaultBandwidthEstimateSource:r.source}:{}),abrFactory:function(){return n},drm:Is({},CE.drm,t.drmConfig),streaming:Is({},CE.streaming,{bufferingGoal:this.getMaxBufferLength(),failureCallback:this.shakaFailureCallback})})}attachShakaEventListeners(e){e.addEventListener("buffering",this.updateBufferingState),e.addEventListener("error",this.onShakaErrorEvent),e.addEventListener("adaptation",this.onShakaAdaptationEvent),e.addEventListener("trackschanged",this.actualizeTracks),e.addEventListener("emsg",this.onShakaEmsgEvent),e.addEventListener("largegap",this.reportLargeGap),e.addEventListener("variantchanged",()=>{this.tryToUpdateStreamingParameters()}),e.addEventListener("trackschanged",()=>{this.tryToUpdateStreamingParameters()}),e.addEventListener("manifestparsed",()=>{this.onManifestParsed(e),this.updateShakaConfig();const t=this.getBandwidthEstimate();ie(t.value)&&((0,Id.Z$)("bandwidthEstimate",io(Oc(t.value,1e3))),this.configureShaka(e,{abr:{defaultBandwidthEstimate:t.value,defaultBandwidthEstimateSource:t.source}}))}),e.addEventListener("trackschanged",ne(this.restoreUserTracks))}tryToUpdateVideoType(){const e=zo(this.shakaPlayer);e&&e!==this.state.controller.videoType&&this.emit("VideoTypeChange",e)}tryToUpdateProgramDateTime(){const e=Xo(this.shakaPlayer,this.manifestXML),t=void 0===e?void 0:Ic(e,1e3);void 0!==t&&t!==this.state.controller.programDateTime&&this.emit("ProgramDateTimeChange",t)}tryToUpdateStreamingParameters(){this.tryToUpdateVideoType(),this.tryToUpdateProgramDateTime()}onManifestParsed(e){this.tryToUpdateStreamingParameters(),this.setShakaAvailabilityWindowOverride(e),this.setPresentationTimelineDelay(e)}isLowLatencyLive(){var e,t;return Boolean(null==(e=this.shakaPlayer)?void 0:e.isLive())&&Boolean(null==(t=this.manifestXML)?void 0:t.querySelector("[availabilityTimeOffset]"))}setPresentationTimelineDelay(e){var t;const r=e.getManifest();if(!r)return;const n=null==(t=this.customNetworkingEngine)?void 0:t.getServerTime();void 0!==n&&r.presentationTimeline.setClockOffset(n-Date.now());const i=this.isLowLatencyLive()?0:this.props.liveOffset+oA;r.presentationTimeline.setDelay(i)}setShakaAvailabilityWindowOverride(e){const t=zo(e);if(void 0===t)return;const r=t===Uc.EVENT?1/0:NaN,{manifest:{availabilityWindowOverride:n}}=e.getConfiguration();r===n||isNaN(r)&&isNaN(n)||this.configureShaka(e,{manifest:{availabilityWindowOverride:r}})}setVariantTrack(e){void 0!==this.shakaPlayer&&void 0!==e&&(this.shakaPlayer.selectVariantTrack(e,!0),this.actualizeTracks())}setAbrEnabled(e){var t;void 0!==this.shakaPlayer&&(null==(t=this.shakaPlayer.getConfiguration().abr)?void 0:t.enabled)!==e&&(this.configureShaka(this.shakaPlayer,{abr:{enabled:e}}),this.updateShakaConfig())}actualizeActiveTracks(){this.actualizeActiveVariantTrack(),this.actualizeActiveTextTrack()}actualizeActiveVariantTrack(){const e=Uo(this.shakaPlayer);if(void 0===e)return;const{originalAudioId:t,originalVideoId:r}=e;this.emit("InternalVideoTrackValueChange",r),this.emit("InternalAudioTrackValueChange",t)}actualizeActiveTextTrack(){if(void 0===this.shakaPlayer)return;const{controller:{textTrackEnabled:e}}=this.state,t=this.getCurrentInternalTextTrack();this.emit("InternalTextTrackValueChange",void 0!==t&&e?this.parseTextTrack(t).value:void 0)}actualizeAvailableTracks(){this.actualizeAvailableTextTracks(),this.actualizeAvailableVariantTracks()}actualizeAvailableTextTracks(){const e=this.getAvailableTextTracks();this.video.classList.toggle(By().video_hiddenSubtitlesBtn,0===e.length),this.emit("TextTracksChange",e)}getAvailableTextTracks(){return this.shakaPlayer?this.shakaPlayer.getTextTracks().map(this.parseTextTrack):[]}actualizeAvailableVariantTracks(){const e=Uo(this.shakaPlayer);if(!e)return;const t=Yo(this.shakaPlayer);if(!t)return;const r=t.variants;if(!Array.isArray(r))return;const n={},i={};r.forEach(t=>{const r=t.video,o=t.audio;if(!o||o.originalId===e.originalAudioId){const t=((e,t)=>{const{bandwidth:r,width:n,height:i,originalId:o}=e;return{name:_s(e,t),value:o,width:n,height:i,bitrate:r?Oc(r,1e3):Bv}})(r,this.videoTrackLabels),{name:i=String(t.height)||""}=t;(void 0===n[i]||t.value===e.originalVideoId||n[i].value!==e.originalAudioId&&n[i].bitrate<t.bitrate)&&(n[i]=t)}if(o&&r.originalId===e.originalVideoId){const t=function(e){let{manifestXml:t,audioStream:{label:r,language:n,originalId:i,bandwidth:o}}=e;const a=Ts(t,i)||n;return{name:r||a||i,value:i,lang:a,bitrate:o?o/1e3:Bv}}({manifestXml:this.manifestXML,audioStream:o}),{name:r}=t;(void 0===i[r]||t.value===e.originalAudioId||i[r].value!==e.originalAudioId&&i[r].bitrate<t.bitrate)&&(i[r]=t)}}),this.emit("VideoTracksChange",Li(n)),this.emit("AudioTracksChange",Li(i))}getCurrentInternalTextTrack(){return void 0===this.shakaPlayer?void 0:this.shakaPlayer.getTextTracks().find($E)}checkDeadChunkServer(e){if(!shaka)return;if(!Hr(this.getStreamUrl()))return;const{code:t,data:r}=e;if(!(t===shaka.util.Error.Code.BAD_HTTP_STATUS||t===shaka.util.Error.Code.HTTP_ERROR||t===shaka.util.Error.Code.TIMEOUT))return;const[n]=r,i=r[r.length-1];if("string"===typeof n&&i===shaka.net.NetworkingEngine.RequestType.SEGMENT){const{hostname:e}=se(n);this.chunkHostnameBlacklist.addHostname(e)}}initShakaConfigAutoUpdate(){this.stopShakaConfigAutoUpdate(),this.shakaConfigAutoUpdateInterval=window.setInterval(()=>{this.updateShakaConfig()},1e3)}updateShakaConfig(){const{shakaPlayer:e}=this;if(void 0!==e)try{const t=this.getMaxBufferLength();if(e.getConfiguration().streaming.bufferingGoal===t)return;this.configureShaka(e,{streaming:{bufferingGoal:t}})}catch(pT){}}stopShakaConfigAutoUpdate(){clearInterval(this.shakaConfigAutoUpdateInterval)}configureShaka(e,t){try{e.configure(t)}catch(pT){this.props.onError(new gu(pT,{isFatal:!1,code:Ad.SHAKA_CONFIGURE_ERROR}))}}checkRepresentationChange(e,t){if(function(e,t){const r=As(e),n=As(t);return Iv()(r,n)}(e,t))return;this.playerStore.dispatch($h(xr(Eu.RepresentationsChange,void 0)));const r=new gu({isFatal:!1,code:Ad.REPRESENTATION_CHANGE});this.props.onError(r),this.recoverStream()}computeVideoPlayingState(e){const t=e.isBuffering();return void 0===this.playingStateBeforeLoadShakaSource?qa(this.video,t):this.playingStateBeforeLoadShakaSource===gd.PAUSE?gd.PAUSE:t?gd.BUFFERING:gd.PLAY}}const _A=function(e){if(void 0===e&&(e=window),ge(e)&&e.navigator){const{platform:t}=e.navigator;if(t&&/iP(hone|od|ad)/.test(t)){const t=e.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return parseInt(t[1],10)}}return-1}();class wA extends Sc{constructor(e,t,r,n){var i;super(),i=this,this.drmConfig=t,this.errorCallback=r,this.withCredentials=n,this.video=void 0,this.loadCertificate=ne(async()=>{try{const{promise:e,abort:t}=Cs({method:"GET",url:this.drmConfig.servers["com.apple.fps.1_0"],responseType:"arraybuffer",retries:3,timeout:1e4,onRetry:this.onRequestRetry(e=>{this.onError(new gu({code:Ad.FAIRPLAY_CERT_LOAD_ERROR,isFatal:!1,details:e}))}),withCredentials:this.withCredentials});this.addDestroyHandler(t);const{response:r}=await e;return new Uint8Array(r)}catch(pT){return this.onError(new gu({isFatal:!0,code:Ad.FAIRPLAY_CERT_LOAD_ERROR,details:pT})),new Uint8Array(0)}}),this.onNeedKey=async function(e){let{initData:t}=void 0===e?{}:e;const{video:r}=i;if(!t||i.isDestroyed)return;const n=i.extractContentId(t);await i.waitForLoadedMetaData(),r.webkitKeys||"function"!==typeof WebKitMediaKeys||r.webkitSetMediaKeys(new WebKitMediaKeys("com.apple.fps.1_0")),r.webkitKeys||i.onError(new gu({code:Ad.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR}));const o=await i.getWebKitMediaKeySessionInitData(t,n),a=i.video.webkitKeys.createSession("video/mp4",o);a||i.onError(new gu({code:Ad.FAIRPLAY_CREATE_KEY_SESSION_ERROR})),i.addDestroyHandler(()=>a.close());i.addDestroyHandler(T(a,"webkitkeymessage",e=>{let{message:t}=e;if(i.isDestroyed)return;const r=t||new ArrayBuffer(0),o=ks({"Content-Type":"application/json"},i.drmConfig.headers),{abort:s,promise:l}=Cs({responseType:"json",method:"POST",url:i.drmConfig.advanced["com.apple.fps.1_0"].processSPCPath,data:JSON.stringify(ks({assetId:n,spc:btoa(Ds(new Uint8Array(r)))},i.drmConfig.requestParams)),headers:o,retries:3,timeout:1e4,onRetry:i.onRequestRetry(e=>{i.onError(new gu({isFatal:!1,code:Ad.FAIRPLAY_SPC_LOAD_ERROR,details:e}))}),withCredentials:i.withCredentials});i.addDestroyHandler(s),l.then(e=>{let{response:{ckc:t}}=e;const r=Ls(atob(t));a.update(new Uint8Array(r))}).catch(e=>{i.onError(new gu({isFatal:!0,code:Ad.FAIRPLAY_SPC_LOAD_ERROR,details:e}))})}));i.addDestroyHandler(T(a,"webkitkeyerror",e=>{let t;const{error:r}=a;if(r){const{code:e,systemCode:n}=r;t={code:e,systemCode:n}}i.onError(new gu({code:Ad.FAIRPLAY_CREATE_KEY_ERROR,isFatal:!1,details:t}))}))},this.onError=e=>{this.isDestroyed||(this.errorCallback.call(this.errorCallback,e),e.isFatal&&this.destroy())},this.onRequestRetry=e=>(t,r)=>{if(418!==r.status)return e(t),!0;const n=hs(r.response);return this.onError(fs(n)),!n.isFatal},this.video=e,this.addDestroyHandler(T(e,"webkitneedkey",this.onNeedKey)),this.loadCertificate()}async getWebKitMediaKeySessionInitData(e,t){const r=await this.loadCertificate(),n=new Uint16Array(Ls(t));let i=0;const o=e.byteLength+4+n.byteLength+4+r.byteLength,a=new ArrayBuffer(o),s=new DataView(a);new Uint8Array(a,i,e.byteLength).set(new Uint8Array(e)),i+=e.byteLength,s.setUint32(i,n.byteLength,!0),i+=4;const l=new Uint16Array(a,i,n.length);l.set(n),i+=l.byteLength,s.setUint32(i,r.byteLength,!0),i+=4;return new Uint8Array(a,i,r.byteLength).set(r),new Uint8Array(a,0,a.byteLength)}extractContentId(e){const t=new Uint8Array(e),r=Ds(new Uint16Array(t.buffer)),[,n]=r.split("//");return n||(this.onError(new gu({isFatal:!1,code:Ad.FAIRPLAY_INVALID_CONTENT_ID})),"")}async waitForLoadedMetaData(){if(!(this.video.readyState>=HTMLMediaElement.HAVE_METADATA))return new Promise(e=>{this.addDestroyHandler(T(this.video,"loadedmetadata",()=>e(),{once:!0}))})}}wA.IS_SUPPORTED="undefined"!==typeof WebKitMediaKeys&&(0,Wl.m)(WebKitMediaKeys.isTypeSupported)&&WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4");class bA extends su{constructor(e){super(),this.video=void 0,this.unsubscribers=[],this.isStrmCatchUpStream=void 0,this.seekableEndFifo=new dE(2),this.destroy=()=>{G(this.unsubscribers)},this.handleProgressEvent=()=>{if(!this.video||!this.video.seekable.length)return;const e=this.video.seekable,t=Z(e.end(e.length-1)),r=this.seekableEndFifo.getAll();t!==r[r.length-1]&&(this.seekableEndFifo.push(t),this.updateVideoType())},this.updateVideoType=()=>{this.emit("VideoTypeChange",this.getVideoType())},this.isStrmCatchUpStream=function(e){if(!Hr(e))return!1;const t=de(se(e).search);return Boolean(t.start)}(e)}setHTMLVideoElement(e){this.destroy(),this.video=e,this.unsubscribers.push(T(e,"timeupdate",this.updateVideoType)),this.unsubscribers.push(T(e,"durationchange",this.updateVideoType)),this.unsubscribers.push(T(e,"progress",this.handleProgressEvent))}getVideoType(){if(!this.video||isFinite(this.video.duration))return Uc.VOD;if(this.isStrmCatchUpStream)return Uc.EVENT;const e=this.seekableEndFifo.getAll();if(!this.video.seekable.length||e.length<2)return Uc.LIVE;const t=this.video.seekable.start(0);return e[1]>e[0]&&t?Uc.LIVE:Uc.EVENT}}const PA=["loadstart","progress","durationchange","loadedmetadata","loadeddata","canplay","playing"];class IA extends nA{initInternalSubscribe(){super.initInternalSubscribe(),this.recoverIosSleepMode(),this.activateVideoTagIosWorkaround()}constructor(e){super(e),this.props=e,this.engine=Kv.NATIVE,this.fairPlayController=void 0,this.isLowLatencyLiveStream=!1}getUtcStartTime(){const e=this.video;if(!this.video.src||0===e.readyState||"function"!==typeof e.getStartDate)return super.getUtcPosition();const t=e.getStartDate();if(!t||"function"!==typeof t.getTime)return super.getUtcPosition();const r=t.getTime();return isNaN(r)?super.getUtcPosition():Oc(r,1e3)}getUtcPosition(){const e=this.getUtcStartTime();return e>0?bc(e,this.getCurrentTime()):super.getUtcPosition()}async attachEncoder(){this.emit("BufferingRangesChange",[]),await super.attachEncoder(),Su.log("hls native mode")}async detachEncoder(){await super.detachEncoder(),this.video.src&&this.video.removeAttribute("src")}shouldSkipVideoTagError(e){return super.shouldSkipVideoTagError(e)||Boolean(this.fairPlayController&&this.fairPlayController.isDestroyed)}getStartPosition(){const{videoTime:e,utc:t}=this.state.controller.startPosition;if(ie(e)||ie(t)){if(this.state.controller.videoType===Uc.LIVE){const e=this.getUtcStartTime();if(e>0&&ie(t)&&t>0)return t-e}return ie(e)?e:void 0}}waitForStartPositionEstablished(){return new Promise((e,t)=>{const r=[];PA.forEach(t=>{r.push(this.addVideoEventListener(t,()=>{this.canSeek()&&(this.applyStartPosition(),G(r),e())},{once:!0}))}),this.once("Detach",()=>{G(r),t()})})}isDvrEnabled(){if(Nm.isSmartTV())return!1;if(Nm.isSafariDesktop())return!0;const{controller:{isFullscreen:e},skin:{nativeControlsVisibility:t}}=this.state;return!e&&!t}setVideoTrack(){Su.log("Unable to set video track on native encoder")}getBandwidthEstimate(){return{value:NaN,source:"default"}}async initDrm(){const{stream:{drmConfig:e}}=this.props;return this.initFairPlay(e)}getStreamUrl(){const e={audio_mbr:"1"},t=super.getStreamUrl(),r=Zy.isLiveStreamUrl(t),n=_A>=14||nE>=15;return this.isLowLatencyLiveStream=r&&n,this.isLowLatencyLiveStream&&(e.lowlatency="1"),e.force_m4s="1",he(t,e,{saveOriginalPath:!0})}isLowLatencyLive(){return this.isLowLatencyLiveStream}initVideoTypeQualifier(){const e=new bA(this.getStreamUrl());this.once("Detach",e.destroy),e.on("VideoTypeChange",e=>{e&&this.emit("VideoTypeChange",e)}),e.setHTMLVideoElement(this.video)}onTick(e){super.onTick(e),this.updateProgramDateTime()}async initFairPlay(e){if(!Ci(e))return void(0,Id.Z$)("drm","none");if((0,Id.Z$)("drm","fairplay"),!wA.IS_SUPPORTED)throw new gu({code:Ad.FAIRPLAY_NOT_SUPPORTED});const{video:t,onError:r}=this.props,n=new wA(t,e,r,this.withCredentials);this.fairPlayController=n,this.emit("DrmSystemChange",jm.fairplay),this.once("Destroy",()=>n.destroy())}recoverIosSleepMode(){if(!$c)return;const e=R(this.getVideoOwnerDocument(),e=>{e&&(cn(this.state)||this.canSeek()&&(this.video.currentTime-=.001))});this.once("Destroy",e)}updateProgramDateTime(){const{videoType:e}=this.state.controller,t=this.getUtcStartTime(),r=(e===Uc.LIVE||e===Uc.EVENT)&&t?Ic(t,1e3):void 0;this.emit("ProgramDateTimeChange",r)}activateVideoTagIosWorkaround(){$c&&this.once("Destroy",T(this.video,"touchstart",()=>{this.video.paused?this.video.pause():Promise.resolve(this.video.play()).catch(d)},{once:!0}))}}const OA=Z(180),CA=e=>void 0!==e.width&&void 0!==e.height;class kA extends su{constructor(){super(...arguments),this.video=void 0,this.previousDuration=0,this.unsubscribers=[],this.destroy=()=>{this.previousDuration=0,G(this.unsubscribers)},this.updateVideoType=()=>{this.emit("VideoTypeChange",this.getVideoType())}}setHTMLVideoElement(e){this.destroy(),this.video=e,this.unsubscribers.push(T(e,"timeupdate",this.updateVideoType)),this.unsubscribers.push(T(e,"durationchange",this.updateVideoType))}getVideoType(){return this.video&&this.video.duration?this.video.duration===1/0?Uc.LIVE:(0===this.previousDuration&&(this.previousDuration=this.video.duration),this.video.duration>this.previousDuration?Uc.EVENT:Uc.VOD):Uc.VOD}}const DA=Hm(),NA=DA?"app":"bro",LA=DA?Mi("YandexSearch")||Mi("YaSearchBrowser")||Mi("YaApp_Android"):Vi();class MA extends Vy{constructor(e){super(),this.lastRpcRequestId=1,this.waiters=Object.create(null),this.send=void 0,this.onRun=void 0,this.serialize=void 0,this.deserialize=void 0,this.send=e.send,this.onRun=e.onRun,this.serialize=e.serialize,this.deserialize=e.deserialize}destroy(){super.destroy(),this.onRun=d;for(const e in this.waiters)this.waiters[e](new Error("Stop on destroy"))}request(e,t){let{method:r,params:n}=e;void 0===t&&(t=3e4);const i=this.getUniqueRpcRequestId();return this.sendMessage(Fs({id:i,method:r,params:n})),this.waitForResponse(i,t)}sendEvent(e){let{method:t,params:r}=e;return this.sendMessage(Fs({method:t,params:r})),Promise.resolve()}getUniqueRpcRequestId(){return String(this.lastRpcRequestId++)}waitForResponse(e,t){const r=setTimeout(()=>{const r=this.waiters[e];void 0!==r&&r(new Error("Timeout fired ("+t+"ms) for id="+e+"."))},t),n=()=>{clearTimeout(r),delete this.waiters[e]};return new Promise((t,r)=>{this.waiters[e]=(e,i)=>(n(),null!==e?r(e):t(i))})}sendMessage(e){this.send(this.serialize(e))}handleRpcRequest(e){let{id:t,method:r,params:n}=e;this.onRun({method:r,params:n},(e,r)=>{t&&this.sendMessage(function(e){let{id:t,error:r,result:n}=e;return r?{jsonrpc:"2.0",id:t,error:r.toJSON()}:{jsonrpc:"2.0",id:t,result:void 0===n?null:n}}({id:t,error:e,result:r}))})}handleRpcResponse(e){const t=this.waiters[e.id];void 0!==t?"error"in e?t(e.error):t(null,e.result):this.emit("Warn",new Error("Response for missed waiter for id="+JSON.stringify(e.id)))}handleMessage(e){try{const t=Gs(this.deserialize(e));"result"in t||"error"in t?this.handleRpcResponse(t):"method"in t&&this.handleRpcRequest(t)}catch(fT){this.emit("Error",fT)}}}class VA{constructor(e){this.playingState=void 0,this.video=void 0,this.jsonRpcMessenger=void 0,this.handleMessage=e=>{e&&s(e.data)&&this.jsonRpcMessenger.handleMessage(e.data)},this.video=e.video,this.playingState=e.playingState,this.jsonRpcMessenger=new MA({onRun:(t,r)=>{if(!Array.isArray(t.params))throw new Error("Unexpected params value");e.onRun(t,r)},send:e=>{this.video.yandexPlayerSend(e)},serialize:JSON.stringify,deserialize:JSON.parse}),this.jsonRpcMessenger.on("Error",e.onError),this.jsonRpcMessenger.on("Warn",Su.warn),this.video.addEventListener("yandexplayermessage",this.handleMessage)}destroy(){this.jsonRpcMessenger.destroy(),this.video.removeEventListener("yandexplayermessage",this.handleMessage)}sendRequest(e,t){let{method:r,params:n}=e;return void 0===t&&(t=3e4),this.playingState!==gd.PLAY&&this.playingState!==gd.BUFFERING?Promise.reject(new Error("Can't send request while playingState is "+this.playingState)):this.jsonRpcMessenger.request({method:r,params:n},t)}sendEvent(e){let{method:t,params:r}=e;return this.playingState!==gd.PLAY&&this.playingState!==gd.BUFFERING?Promise.reject(new Error("Can't send event while playingState is "+this.playingState)):this.jsonRpcMessenger.sendEvent({method:t,params:r})}setPlayingState(e){this.playingState=e}}let xA;!function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"}(xA||(xA={}));class FA extends Error{constructor(e,t){void 0===t&&(t=xA.UNKNOWN_ERROR),super(e),this.message=void 0,this.stack=void 0,this.toJSON=void 0,this.code=void 0,RE()(this,FA.prototype),this.message=e,this.code=t,this.toJSON=()=>({code:this.code,message:this.message,data:this.stack})}toString(){return JSON.stringify(this.toJSON())}}class UA{constructor(e){let{video:t,onError:r,playingState:n}=e;this.yandexRpcMessenger=void 0,this.handleRun=(e,t)=>{t(new FA("Not implemented",xA.METHOD_NOT_FOUND))},this.yandexRpcMessenger=new VA({video:t,onError:r,onRun:this.handleRun,playingState:n})}setPlayingState(e){return this.yandexRpcMessenger.setPlayingState(e)}destroy(){return this.yandexRpcMessenger.destroy()}async setViewPortSize(e){let{width:t,height:r}=e;await this.yandexRpcMessenger.sendRequest({method:"setViewPortSize",params:{width:t,height:r}})}async getVsid(){const e=await this.yandexRpcMessenger.sendRequest({method:"getVsid",params:[]});if(!s(e))throw new Error("Unexpected result in getVsid: "+e);return e}async getPlayerVersion(){const e=await this.yandexRpcMessenger.sendRequest({method:"getPlayerVersion",params:[]});if(!s(e))throw new Error("Unexpected result in getPlayerVersion: "+e);return e}async getBandwidth(){const e=await this.yandexRpcMessenger.sendRequest({method:"getBandwidth",params:[]});if(!ie(e))throw new Error("Unexpected result in getBandwidth: "+e);return e}async getStartDate(){const e=await this.yandexRpcMessenger.sendRequest({method:"getStartDate",params:[]});if(!ie(e))throw new Error("Unexpected result in getStartDate: "+e);return e}}document.createElement("div"),document.createElement("div");const BA=$(1/0);class HA extends nA{constructor(){super(...arguments),this.engine=Kv.YANDEX,this.startDate=Z(Xy),this.yandexRpc=void 0,this.wasSuspendedOnCurrentSource=!1,this.expectedStateAfterRestore=gd.PAUSE,this.waitingForStartPositionEstablished=!1}async attachEncoder(){this.initYandexPlayer();ie(this.getStartPosition())&&(this.waitingForStartPositionEstablished=!0),await super.attachEncoder(),this.restoreYandexPlayer(),this.initYandexRpc(),this.initStartDateUpdater(),this.initBandwidthEstimateUpdater(),this.initAndroidVsidUpdater(),this.initViewPortSizeUpdater(),this.isRecoverablePlaylistHTTPStatus=!1,Su.log("yandex native mode")}play(){return this.expectedStateAfterRestore=gd.PLAY,super.play()}pause(){return this.expectedStateAfterRestore=gd.PAUSE,super.pause()}async detachEncoder(){this.isRecoverablePlaylistHTTPStatus=!0,this.suspendYandexPlayer(),this.detachYandexPlayer(),await super.detachEncoder()}getCapSizes(){const{width:e,height:t,maxWidth:r,maxHeight:n}=super.getCapSizes();return{width:$(Math.min(e,r||BA)),height:$(Math.min(t,n||BA)),maxWidth:BA,maxHeight:BA}}initInternalSubscribe(){super.initInternalSubscribe();let e=mn(this.playerStore.getState().controller.currentTime);this.on("CurrentTimeChange",t=>{if(this.state.controller.encoderState!==Zg.Attached)return;if(this.playerStore.getState().controller.playingState!==gd.PLAY)return;if(this.waitingForStartPositionEstablished)return;const r=mn(t);r!==e&&(e=r,this.playerStore.dispatch(Th({videoTime:t,utc:this.getUtcPosition()})),this.updateYandexPlayerConfig())}),this.once("Destroy",()=>{this.dropDetachedYandexPlayer()})}setVideoTrack(e){const{videoTracks:t}=this.video,r=Array.from(t).findIndex(t=>t.id===e.value);r in t?t[r].selected=!0:this.props.logEvent({event:"VideoTrackNotFound",params:{track:e,videoTracks:Array.from(t)}})}seekInternal(e){const{start:t,end:r}=this.getSeekableRange();qo(this.video,Z(L(e,t,r||0)))}getSeekableRange(){const{videoType:e}=this.state.controller;switch(e){case Uc.LIVE:return{start:this.getUtcStartTime(),end:this.getDuration()};default:return{start:Z(0),end:this.getDuration()}}}getDuration(){const{videoType:e}=this.state.controller;switch(e){case Uc.LIVE:return bc(this.getUtcStartTime(),OA);default:return Z(this.video.duration)}}getUtcStartTime(){return this.startDate}getUtcPosition(){const{videoType:e}=this.state.controller;switch(e){case Uc.LIVE:return this.getCurrentTime();default:return this.getUtcStartTime()?bc(this.getUtcStartTime(),this.getCurrentTime()):super.getUtcPosition()}}getMaxCapAllowedVideoTrack(){const{videoTracks:e}=this.state.controller,t=this.getCapSizes();return((e,t,r)=>{const n=e.filter(CA);return n.sort((e,t)=>e.width>t.width&&e.height>t.height?-1:1).find(e=>{let{width:n,height:i}=e;return n<=t&&i<=r})||n[n.length-1]})(e,t.width,t.height)}getFragmentsData(){if(!this.isDvrEnabled()||!this.video||!this.video.seekable.length)return super.getFragmentsData();const{start:e,end:t}=this.getSeekableRange();return{totalDuration:Pc(t,e),fragmentDuration:Xg,startTime:e}}isDvrEnabled(){return!0}canSeek(){const{video:e}=this.props;return e.readyState>0&&e.duration>0}initVideoTypeQualifier(){const e=new kA;this.once("Detach",e.destroy),e.on("VideoTypeChange",e=>{e&&this.emit("VideoTypeChange",e)}),e.setHTMLVideoElement(this.video)}waitForStartPositionEstablished(){return new Promise((e,t)=>{const{playingState:r,preload:n}=this.state.controller;!1===n&&r===gd.PAUSE&&e();const i=this.addVideoEventListener("durationchange",()=>{if(!this.canSeek())return;const t=this.getStartPosition(),r=this.getCurrentTime();var n,o,a;ie(t)&&(n=t,o=r,void 0===(a=.5)&&(a=mA),Math.abs(n-o)<=a)||this.applyStartPosition(),i(),this.waitingForStartPositionEstablished=!1,e()});this.once("Detach",()=>{i(),t()})})}initDrm(e){return(0,Id.Z$)("drm",e?"android":"none"),Promise.resolve()}async onVideoTagError(){const e=ra(this.video);if(this.state.controller.encoderState!==Zg.Attached)return super.onVideoTagError();this.video.poster=Wc,this.checkPlaylistHTTPStatus();const t=new gu({code:uy[e.code],details:e,isFatal:!0}),n=await this.checkPlaylistHTTPStatusPromise;if(!n||!n.isFatalError())return t.category===yd.MEDIA&&r(()=>Tm.ZP.setItem("videoplayer-yandex-player-last-fatal",String(Date.now()))),void this.props.onError(t);this.props.onError(n.toPlayerError())}onVideoResize(){super.onVideoResize(),this.updateAutoVideoTrackIfNeed()}initYandexRpc(){const e=new UA({video:this.video,onError:e=>{this.props.onError(new gu(e,{isFatal:!1,code:Ad.YANDEX_RPC_ERROR}))},playingState:this.state.controller.playingState});this.on("VideoPlayingStateChange",t=>{e.setPlayingState(t)}),this.yandexRpc=e,this.once("Detach",()=>{e.destroy(),this.yandexRpc=void 0})}initStartDateUpdater(){const{yandexRpc:e}=this;if(!e)return;const t=setInterval(()=>{e.getStartDate().then(e=>{if(!(e>0))return void this.emit("ProgramDateTimeChange",void 0);this.startDate=Z(Math.floor(e/1e3));const{videoType:t}=this.state.controller;switch(t){case Uc.LIVE:return this.emit("ProgramDateTimeChange",0);default:return this.emit("ProgramDateTimeChange",e)}}).catch(d)},5e3);this.once("Detach",()=>{clearInterval(t)})}restoreYandexPlayer(){if(!xs({featureName:"suspend-on-ad"}))return;if(!this.wasSuspendedOnCurrentSource)return;const e=this.video;r(()=>{(0,Wl.m)(e.yandexReattachPlayer)&&(e.yandexReattachPlayer(!e.paused).then(()=>{switch(this.expectedStateAfterRestore){case gd.PLAY:return void super.play();case gd.PAUSE:return void super.pause()}}),Su.log("video.yandexReattachPlayer()"))})}initYandexPlayer(){this.updateYandexPlayerConfig()}updateYandexPlayerConfig(){const e=this.getStartPosition(),t=this.getBandwidthEstimate(),{drmConfig:r}=this.props.stream,{height:n,width:i}=this.getCapSizes(),o={vsid:xs({featureName:"single-vsid-with-android"})?this.state.controller.vsid:void 0,drmConfig:r,bandwidthEstimate:ie(t.value)?Math.floor(t.value):void 0,startPosition:ie(e)?Z(e):void 0,viewPortHeight:ie(n)?$(Math.floor(n)):void 0,viewPortWidth:ie(i)?$(Math.floor(i)):void 0,flags:(ke(),wu),slots:(a=this.props.sourceParams.additionalParams,void 0===a?"":a.slots||""),testIds:Ms(this.props.sourceParams.additionalParams)};var a;this.video.setAttribute("yandexplayer",JSON.stringify(o)),Su.log("this.video.setAttribute('yandexplayer', "+JSON.stringify(o)+")")}initAndroidVsidUpdater(){function e(){t.getVsid().then(e=>{i!==e&&r({event:"YandexAndroidVsidChanged",params:{androidVsid:e}}),i=e}).catch(()=>{n=window.setTimeout(e,1e3)})}const t=this.yandexRpc,{props:{logEvent:r}}=this;let n=0,i="";const o=t=>{t===gd.PLAY&&e()};this.on("VideoPlayingStateChange",o),this.once("Detach",()=>this.off("VideoPlayingStateChange",o)),e(),this.once("Detach",()=>clearTimeout(n))}suspendYandexPlayer(){if(!xs({featureName:"suspend-on-ad"}))return;const e=this.video;(0,Wl.m)(e.yandexDetachPlayer)&&(La(e,()=>e.yandexDetachPlayer()),Su.log("video.yandexDetachPlayer()"),this.wasSuspendedOnCurrentSource=!0)}dropDetachedYandexPlayer(){const e=this.video;(0,Wl.m)(e.yandexDropDetachedPlayer)&&(Su.log("video.yandexDropDetachedPlayer()"),e.yandexDropDetachedPlayer())}detachYandexPlayer(){this.video.removeAttribute("yandexplayer"),Su.log("this.video.removeAttribute('yandexplayer')")}updateAutoVideoTrackIfNeed(){const{videoTracks:e,videoWidth:t,videoHeight:r}=this.video,n=as(ls({videoTracks:e,videoWidth:t,videoHeight:r}));this.emit("InternalVideoTrackValueChange",n?n.value:void 0)}initBandwidthEstimateUpdater(){const{yandexRpc:e}=this;if(!e)return;const t=setInterval(()=>{e.getBandwidth().then(e=>{this.playerStore.dispatch(Zu({value:e,source:"yabro"}))}).catch(d)},6e4);this.once("Detach",()=>{clearInterval(t)})}async updateViewPortSize(e){let{width:t,height:r}=e;const{yandexRpc:n}=this;return n?n.setViewPortSize({width:Math.floor(t),height:Math.floor(r)}).then(()=>({width:t,height:r})).catch(()=>({width:NaN,height:NaN})):{width:NaN,height:NaN}}initViewPortSizeUpdater(){const{yandexRpc:e}=this;if(!e)return;let t=NaN,r=NaN;this.updateViewPortSize(this.getCapSizes()).then(e=>{let{width:n,height:i}=e;t=n,r=i});const n=setInterval(()=>{const{width:e,height:n}=this.getCapSizes();e===t&&n===r||this.updateViewPortSize({width:e,height:n}).then(e=>{let{width:n,height:i}=e;t=n,r=i})},1e3);this.once("Detach",()=>{clearInterval(n)})}}const jA=c(window),YA={};var GA=e(4661),KA=e.n(GA);class WA extends Sc{constructor(e){super(),this.video=void 0,this.playbackQuality=Hy,this.persistedPlaybackQuality=Hy,this.accumulatedPlaybackQuality=Hy,this.video=e,this.addDestroyHandler(()=>{this.reset(),this.video=void 0})}update(){if(!this.video)return;const e=Xa(this.video);this.playbackQuality=e,0!==this.persistedPlaybackQuality.totalVideoFrames&&(this.persistedPlaybackQuality.totalVideoFrames>e.totalVideoFrames&&(this.accumulatedPlaybackQuality={droppedVideoFrames:this.accumulatedPlaybackQuality.droppedVideoFrames+this.persistedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.accumulatedPlaybackQuality.corruptedVideoFrames+this.persistedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.accumulatedPlaybackQuality.totalVideoFrames+this.persistedPlaybackQuality.totalVideoFrames}),this.persistedPlaybackQuality=Hy)}persist(){0!==this.playbackQuality.totalVideoFrames&&(this.persistedPlaybackQuality=this.playbackQuality,this.playbackQuality=Hy)}reset(){this.playbackQuality=Hy,this.persistedPlaybackQuality=Hy,this.accumulatedPlaybackQuality=Hy}getPlaybackQuality(){return this.persistedPlaybackQuality.totalVideoFrames>0?Hy:{droppedVideoFrames:this.playbackQuality.droppedVideoFrames+this.accumulatedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.playbackQuality.corruptedVideoFrames+this.accumulatedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.playbackQuality.totalVideoFrames+this.accumulatedPlaybackQuality.totalVideoFrames}}}const qA=["time","cacheVersion"],zA=2592e5,XA=e(8139),QA=["object"===typeof document&&document&&"onfreeze"in document?"pagehide":"beforeunload","unload"],JA=!Kc&&hm("video/webm")?"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAByhFNm3RAHU27i1OrhBVJqWZTrIHlTbuMU6uEFlSua1OsggEj7AEAAAAAAAC5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAADIq17GDD0JATYCNTGF2ZjU3Ljc2LjEwMFdBjUxhdmY1Ny43Ni4xMDBEiYhASwAAAAAAABZUrmsBAAAAAAAAYq4BAAAAAAAAWdeBAXPFgQGcgQAitZyDdW5khoZBX09QVVNWqoNjLqBWu4QExLQAg4EC4QEAAAAAAAARn4ECtYhA53AAAAAAAGJkgSBjopNPcHVzSGVhZAECOAGAuwAAAAAAH0O2dQEAAAAAAAAt54EAo4eBAACA/P/+o4eBABWA/P/+oAEAAAAAAAAPoYeBACkA/P/+daKDa3KD":"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAMm1kYXTeBABMYXZjNTcuMTA3LjEwMABCIAjBGDghEARgjBwhEARgjBwhEARgjBwAAAMbbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAEsAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAkV0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAEsAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAA1AAAEAAABAAAAAAG9bWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAADgZVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABaG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABLHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAAH0AAAAEYwFgICABRGQVuUABoCAgAECAAAAMHN0dHMAAAAAAAAABAAAAAEAAAQAAAAAAQAABBgAAAABAAAEAAAAAAEAAAHuAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAEAAAAAQAAACRzdHN6AAAAAAAAAAAAAAAEAAAAGAAAAAYAAAAGAAAABgAAABRzdGNvAAAAAAAAAAEAAAAsAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAAAQAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=";let ZA;!function(e){e.AutomaticallyGenerated="AutomaticallyGenerated",e.HardcodedParams="HardcodedParams",e.IOS9OrLess="IOS9OrLess",e.HTML5VideoIsNotSupported="HTML5VideoIsNotSupported",e.WindowHasBeenActive="WindowHasBeenActive",e.RAAStopped="RAAStopped",e.OldIE="OldIE",e.MediaError="MediaError",e.NotRecognized="NotRecognized",e.YaBroAllowedToPlay="YaBroAllowedToPlay"}(ZA||(ZA={}));const $A=(0,tc.N)(),eS=e=>{const{paused:r}=e;return()=>{r&&e.pause(),!r&&e.paused&&t(function(e){if(!Hl)return Promise.reject();const t=(r=e.play).__yaMuffleVideoPlayPromiseOriginalPlay||r;var r;if(n(t))return t.call(e);const a=$s("HTMLVideoElement")||$s("HTMLMediaElement");if(a)return a.call(e);const s=document.createElement("div");s.style.display="none",document.body.appendChild(s);const l=$s("HTMLMediaElement",i(s).contentWindow);if(l){const t=l.call(e);return o(s),t}return e.play()}(e))}},tS=e=>{const t=(e=>{const{muted:t}=e;return()=>{e.muted=t}})(e),r=(e=>{const{volume:t}=e;return()=>{e.volume=t}})(e),n=eS(e);return()=>{t(),r(),n()}};hm("video/webm");var rS,nS;!function(e){e.AutomaticallyGenerated="AutomaticallyGenerated",e.HardcodedParams="HardcodedParams",e.IOS9OrLess="IOS9OrLess",e.HTML5VideoIsNotSupported="HTML5VideoIsNotSupported",e.WindowHasBeenActive="WindowHasBeenActive",e.RAAStopped="RAAStopped",e.OldIE="OldIE",e.MediaError="MediaError",e.NotRecognized="NotRecognized",e.YaBroAllowedToPlay="YaBroAllowedToPlay",e.TizenSmartTVModern="TizenSmartTVModern",e.Tizen23SmartTV="Tizen23SmartTV",e.WebOSSmartTV="WebOSSmartTV",e.TizenAVPlay="TizenAVPlay",e.OrsaySmartTV="OrsaySmartTV",e.PlayStationSmartTV="PlayStationSmartTV"}(rS||(rS={})),function(e){e.VideoTagPaused="VideoTagPaused",e.VideoTagPausedAfterDurationChange="VideoTagPausedAfterDurationChange",e.VideoTagPausedAfterError="VideoTagPausedAfterError",e.PauseEvent="PauseEvent",e.ProgressEvent="ProgressEvent",e.PromiseResolve="PromiseResolve",e.PromiseReject="PromiseReject",e.PlayingEvent="PlayingEvent",e.Timeout="Timeout"}(nS||(nS={}));el({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:rS.AutomaticallyGenerated}),el({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:rS.AutomaticallyGenerated});const iS=$A>-1&&$A<=16,oS=rl({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:ZA.AutomaticallyGenerated}),aS=rl({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:ZA.AutomaticallyGenerated});class sS{constructor(e,t){let{checkSoundEnabled:r,promise:n}=t;if(this.video=e,this.promise=void 0,this.stop=d,this.isStopped=!1,this.revertVideoState=d,this.getIsActiveWindow())return this.promise=Promise.resolve(tl({},aS,{detectionMethod:ZA.WindowHasBeenActive})),this;if(n)return this.promise=n,this;const i=document.createElement("div");i.style.display="none";const a=tS(e),s=La(e,()=>function(e,t){const r={};return x(t).forEach(t=>{r[t]=e.getAttribute(t)}),Ba(e,t),ne(()=>{Ba(e,r)})}(e,{src:JA}));let l;this.revertVideoState=ne(()=>{s(),e.load(),a(),o(i)}),this.promise=new Promise(async(e,t)=>{let n,i,o;if(l=t,r){const e=await this.requestAutoplayAbilityByMuted(!1);i=e.autoplayAbility,n=e.detectionMethod}else i=!1;if(!this.isStopped){if(i)o=!0;else{const e=await this.requestAutoplayAbilityByMuted(!0);o=e.autoplayAbility,n=n&&n!==e.detectionMethod?"DifferentDetectionMethods unmuted=["+n+"] muted=["+e.detectionMethod+"]":e.detectionMethod}this.isStopped||(this.revertVideoState(),this.isStopped=!0,e(rl({canPlayUnMuted:i,canPlayMuted:o,detectionMethod:n||ZA.NotRecognized})))}}),this.stop=()=>{this.isStopped||(this.isStopped=!0,l(new Error("requestAutoplayAbility has been stopped")),this.revertVideoState())}}async requestAutoplayAbilityByMuted(e){const{video:t}=this;if(La(t,()=>{t.load()}),await(async(e,t)=>{let r;try{await new Promise((n,i)=>{t&&t.then(n,i),r=window.setTimeout(n,e)})}finally{window.clearTimeout(r)}})(0),this.isStopped)return{autoplayAbility:!1,detectionMethod:ZA.RAAStopped};t.muted=e,t.volume=e?0:1;const r=await new Promise(e=>{Ya(t,{useProgressEvent:!0,timeoutForNonPromisePlay:500}).then(t=>{e({autoplayAbility:!0,detectionMethod:t})}).catch(r=>{const n=ra(t);n&&n.code===uy.MEDIA_ERR_DECODE?setTimeout(()=>{e({autoplayAbility:!0,detectionMethod:ZA.MediaError})},0):e({autoplayAbility:!1,detectionMethod:r})})});return this.isStopped?{autoplayAbility:!1,detectionMethod:ZA.RAAStopped}:r}getIsActiveWindow(){const e=ws(this.video);if(!e)return!1;const t=Xs(e);return Boolean(t&&t.hasBeenActive)}}let lS;!function(e){e.AutoplayDisabled="AutoplayDisabled",e.RASAborted="RASAborted"}(lS||(lS={}));const dS=["resourceTimings"],cS=document.createElement("video");class uS extends su{get state(){return this.playerStore.getState()}constructor(e,n,i,o){var a;super(),a=this,this.plannedAdViewers=[],this.callbacks=void 0,this.videoController=void 0,this.maxBufferLength=void 0,this.multiroll=aE,this.visibilityDetectPromise=void 0,this.defineAutoplaySettingsPromise=void 0,this.abortRequestAutoplaySettings=d,this.clearRequestAutoplaySettingsTimeout=d,this.onlineMonitor=new uE,this.resourceTimingsMonitor=void 0,this.playbackProgressStorage=new fE,this.visualState=void 0,this.debug=!1,this.container=void 0,this.video=void 0,this.videoSizeSensor=void 0,this.div=void 0,this.adDiv=void 0,this.slotsController=void 0,this.sizeSensor=void 0,this.playbackQualityController=void 0,this.playerStore=void 0,this.externalRequestController=void 0,this.broadcastAd=void 0,this.playCallbacks=[],this.preferNative=void 0,this.disableAndroidPlayer=void 0,this.config=void 0,this.mediaInternalsHistory=void 0,this.currentAdPlaybackQueue=void 0,this.stopLoadSource=d,this.onReady=void 0,this.preloaders=[],this.cachePreloaders=[],this.playDeferred=void 0,this.stopAd=()=>Promise.resolve(),this.setHiddenControls=e=>{e.indexOf(Bc.ALL)>-1?this.playerStore.dispatch(nf(Hc)):this.playerStore.dispatch(nf(e)),this.videoController&&!this.playerStore.getState().ad.adInfo&&this.videoController.updateNativeControlsVisibility()},this.seekToLive=()=>{if(!this.videoController||!this.videoController.isDvrEnabled())return;const{skinDVRStartTime:e,skinDVRDuration:t}=this.state.skin,r=bc(e,t);this.seek({videoTime:r})},this.setPlaybackRate=e=>{const{max:t,min:r}=ci(this.state);this.videoController.setPlaybackRate(L(e,r,t))},this.seek=function(e,t){let{videoTime:r,utc:n}=e;if(void 0===t&&(t=!1),"number"===typeof n){const e=a.videoController.getUtcStartTime(),r=Pc(n,e);a.seekToVideoPosition(r,t)}else"number"===typeof r&&a.seekToVideoPosition(r,t)},this.setVolume=e=>{if(!this.videoController)return this.playerStore.dispatch(sh({muted:this.state.controller.muted,volume:e,changeReason:dm.SetVolume})),void this.abortRequestAutoplaySettings(Vv.VolumeChange);const{muted:t,volume:r}=this.state.controller;let n=e,i=t;if(0===e){const{userVolume:e}=this.state.controller;n=e||r||1,i=!0}this.playerStore.dispatch(sh({volume:n,muted:i,changeReason:dm.SetVolume})),this.currentAdPlaybackQueue&&cn(this.state)?this.currentAdPlaybackQueue.setVolume(e):this.videoController&&(this.videoController.setVolume(n),this.videoController.setMuted(i))},this.setMuted=e=>{const t={volume:this.state.controller.volume,muted:e,changeReason:dm.SetMuted};if(!this.videoController)return this.playerStore.dispatch(sh(t)),void this.abortRequestAutoplaySettings(Vv.MuteChange);this.playerStore.dispatch(sh(t)),this.currentAdPlaybackQueue&&cn(this.state)?this.currentAdPlaybackQueue.setVolume(e?0:this.state.controller.volume):this.videoController&&this.videoController.setMuted(e)},this.playInrollAd=e=>{this.multiroll.inroll.schedule(al({},e,{timeOffset:(null==e?void 0:e.timeOffset)||0}))},this.playAdViewers=async(e,t,r)=>{Nt("player.adsdk.empty."+e),Nt("player.adsdk.start."+e),Nt("player.adsdk.fail."+e);try{await this.playAdViewersInternal(e,t,r)}catch(pT){Nt("player.adsdk.fail."+e),Ei({reason:"PLAY_AD_VIEWERS_ERROR",adSdkVersion:Je(),adSdkLoaderVersion:Qe(),adblockDetected:this.state.ad.adblockDetected,adType:e,bandwidth:io(void 0)}),this.onError(new gu(pT,{code:Ad.PLAY_AD_VIEWERS_ERROR,isFatal:!1,details:{adType:e,adViewersWithData:t,adDisplayConfig:r}}))}},this.handleSizeSensorUpdate=e=>{let{width:t,height:r}=e;this.emit("VisualStateChange",al({},this.visualState.getState(),{width:t,height:r}))},this.defineAutoplaySettingsAndLoadSource=()=>{const e=this.config.source,t=this.playerStore.getState(),{initialAutoplay:r,allowMuted:n,muted:i,volume:o,togglePlaybackOnVisibilityChangeSetting:s}=t.controller;this.defineAutoplaySettings(this.video,{autoplay:r,muted:i||0===o,allowMuted:!(!s||!s.forceAutoplay)||n}),this.loadSource(e,{shouldSaveProgress:!1}).catch(e=>{Su.error("load source error",e),vo(e,iv.INIT),this.onError(e)}).then(()=>{this.onReady(),this.state.controller.autoplay||this.playerStore.dispatch(rf(!0))}).then(()=>{void 0!==e.params.adConfig&&(vd.I?Ft({method:"GET",url:Vp.z,retries:2,checkStatus:e=>e>=200&&e<400}).then(e=>{if(-1===e.responseText.trim().indexOf('<VAST version="3.0">'))throw new Error("Invalid XML in response from ["+Vp.z+"]")}):Promise.resolve()).catch((function(e){let{message:t}=void 0===e?{}:e;a.playerStore.dispatch(Gu(!0)),a.onError(new gu({code:Ad.STRM_ABD_INVALID_RESPONSE,isFatal:!0,details:{reason:t}}))}))})},this.subscribeHandlers=()=>{this.onlineMonitor.on("Online",()=>{this.playerStore.dispatch(Rh(!0)),cn(this.state)||this.videoController&&this.videoController.onOnline(),this.playerStore.dispatch($h(xr(Eu.Offline,void 0)))}),this.onlineMonitor.on("Offline",()=>{this.playerStore.dispatch(Rh(!1)),this.videoController&&this.videoController.onOffline()}),this.on("VideoTypeChange",e=>{this.playerStore.dispatch(hh(e))}),this.on("DurationChange",e=>{this.playerStore.dispatch(ch(e)),this.videoController.updateDVRParams(),this.updateVideoInfo()}),this.on("DvrChange",()=>{this.updateVideoInfo()}),this.on("ProgramDateTimeChange",e=>{this.playerStore.dispatch(wh(e))}),this.on("CurrentTimeChange",this.handleVideoControllerCurrentTimeChange),this.on("BufferingRangesChange",e=>{this.playerStore.dispatch(kh(e))}),this.on("VideoTrackValueChange",e=>{this.playerStore.dispatch(Vh({videoTrackValue:e,isAbrEnabled:this.state.controller.isAbrEnabled}))}),this.on("VideoTrackChange",e=>{this.playerStore.dispatch(xh(e))}),this.on("AudioTrackValueChange",e=>{this.playerStore.dispatch(Uh(e))}),this.on("AudioTracksChange",e=>{this.playerStore.dispatch(Bh(e))}),this.on("TextTrackValueChange",e=>{const{controller:{textTrackEnabled:t,textTrackValue:r}}=this.getState(),n=void 0!==e,i=void 0===e?r:e;this.playerStore.dispatch(Yh(n)),this.playerStore.dispatch(Wh(i));if((t?r:void 0)===(n?e:void 0))return;const o=n?di(this.getState()):void 0;this.callbacks.onTextTrackChange(o)}),this.on("TextTracksChange",e=>{this.playerStore.dispatch(jh(e))}),this.on("VideoPlayingStateChange",e=>{this.playerStore.dispatch(sf(e))});const e=this.logCanPlay(iv.INIT);this.once("CanPlay",e),this.once("SetSource",()=>this.off("CanPlay",e));const t=this.logLoadStartHavingCurrentData(iv.INIT);this.once("LoadedData",t),this.once("SetSource",()=>this.off("LoadedData",t)),this.once("Destroy",()=>{this.off("ContentImpression")});const r=R(this.getContainerDocument(),e=>{this.playerStore.dispatch(Zh(e))});var n;this.once("Destroy",r),this.once("Destroy",(n=e=>{this.callbacks.logEvent({event:vu.DrmSystemsSupportDetected,params:e})},void 0===Jm?(Xm.push(n),()=>{const e=Xm.indexOf(n);-1!==e&&Xm.splice(e,1)}):(n(Jm),d)))},this.setBackgroundImage=e=>{this.div.style.backgroundImage=e?"url('"+e+"')":""},this.setBackgroundVisibility=e=>{this.div.style.backgroundSize=e?"contain":"0  0"},this.shouldCaptureScreenshot=()=>{var e;return this.videoController&&this.videoController.engine===Kv.MPD&&this.state.controller.videoType===Uc.VOD&&!(null!=(e=this.state.controller.stream)&&e.drmConfig)},this.playAdViewersInternal=async(e,r,n)=>{const{ad:{adInfo:i,adSyncInit:o},controller:{isFullscreen:a,isPip:s}}=this.state,l=a&&re(this.getContainerDocument().defaultView,this.video)===this.video,d=l||s?r.filter(e=>{const{adViewer:t}=e;return t.filterAdPodsIndependentOnHtmlControls("StreamPlayer can't play CPC ads: ["+(s?"PiP":l?"FullScreen":"unknown")+"] mode"),t.getAdPodsCount()>0}):r,c=d.map(e=>{let{adViewer:t}=e;return t}),u=function(e){return e.reduce((e,t)=>bc(e,J(t.getAdPodsCount())),J(0))}(c),h=ze(c);if(0===u)return Lt("player.adsdk.empty."+e),Ei({reason:"NO_AD_PODS_TO_PLAY_AD",adSdkVersion:Je(),adSdkLoaderVersion:Qe(),adblockDetected:this.state.ad.adblockDetected,adType:e,bandwidth:io(void 0)}),void this.callbacks.logEvent({event:"NoAdPodsToPlayAd",params:void 0});i&&this.onError(new gu({code:Ad.AD_IS_ALREADY_PLAYING,isFatal:!1,details:{currentAdType:i.adType,adType:e}})),this.prepareBeforeOrAfterAd(!1,e);const f=this.slotsController.createAdElementsSet({adType:e});this.callbacks.logEvent({event:"PlayAdViewers",params:{adType:e,adPodsCount:u}});const p=e===mu.inroll?{cueId:this.state.ad.originalBroadcastAdCueId,startProgramDateTime:Z(this.state.controller.programDateTime/1e3),startVideoTime:Z(this.videoController?this.videoController.getCurrentTime():this.state.controller.currentTime),startTimestamp:Z(Date.now()/1e3)}:{};let g=!1;const v=ne(async r=>{let{data:n,stopAdReason:i}=r;this.shouldCaptureScreenshot()&&(this.resetPosterFitStyle(),this.setBackgroundVisibility(!0),this.once("CanPlay",()=>{this.setBackgroundImage(),this.videoController.clearScreenshot()}));const o=this.state.ad.inStreamPlayingState;g=!0,this.currentAdPlaybackQueue&&(this.currentAdPlaybackQueue.destroy(i),this.currentAdPlaybackQueue=void 0),e!==mu.postroll&&(Su.log("videoController.play()"),o!==gd.PAUSE&&t(this.videoController.play())),this.playerStore.dispatch(Hu(void 0)),this.slotsController.showSkinAndOriginalVideo(),this.playerStore.dispatch($h(xr(Eu.AdEnd,{adType:e}))),this.prepareBeforeOrAfterAd(!0,e);const a=async()=>{Nt("encoder.attach"),await this.attachEncoder(),Lt("encoder.attach",{additional:{engine:this.state.controller.engine}})};if(i===yu.InsertIntoCalled)return a();const{loadPositionAfterAd:s}=n;s&&(this.playerStore.dispatch(Th(s)),await a())});this.stopAd=v;const m=this.getSeekPositionAfterAd({adType:e,adViewersDuration:h});if(this.playerStore.dispatch(Th(m)),e!==mu.preroll&&Nt("encoder.detach"),this.shouldCaptureScreenshot()&&(Nt("capture.screenshot"),this.videoController.captureScreenshot(this.video).then(e=>{Lt("capture.screenshot"),e&&(this.setBackgroundImage(e),this.setBackgroundVisibility(!1))})),await this.detachEncoder(),e!==mu.preroll&&Lt("encoder.detach",{additional:{engine:this.state.controller.engine}}),(()=>{this.playerStore.dispatch(Hu({adType:e,params:p})),this.slotsController.showAdElementsSet(f)})(),g)return;const E=[T(this.video,"firstframedecoded",()=>{Ti("AD",{},o)},{once:!0}),T(this.video,"firstframeshown",()=>{Ri("AD",{},o)},{once:!0})];let y=!1;const A=new Iu({onAdStartRejected:e=>{var t;null==(t=this.playDeferred)||t.reject(e)},onAdSkippableStateChange:e=>{this.callbacks.onAdSkippableStateChange(e)},onAdPodCloseStateChange:e=>{this.callbacks.onAdPodCloseStateChange(e)},onAdVolumeAvailabilityStateChange:e=>{this.callbacks.onAdVolumeAvailabilityStateChange(e)},onAdPodDurationChange:e=>{this.callbacks.onAdPodDurationChange(e)},onAdPodCurrentTimeChange:e=>{this.callbacks.onAdPodCurrentTimeChange(e)},onAdPodTimeToSkipChange:e=>{this.callbacks.onAdPodTimeToSkipChange(e)},onAdInteraction:()=>{this.callbacks.onAdInteraction()},onFirstAdPodStarted:()=>{var t;Si("AD",{adblockDetected:this.state.ad.adblockDetected,adType:e,bandwidth:io(void 0)},this.state.ad.adSyncInit),Lt("player.adsdk.start."+e),this.hidePoster(),e!==mu.postroll&&this.preloadVideoControllerSource(),null==(t=this.playDeferred)||t.resolve()},onLastAdPodStopped:e=>{this.multiroll.dispatchEvent({event:"AdBreakEnd",data:e})},onBeforeAdPodStart:e=>{this.callbacks.onBeforeAdPodStart(e)},onAdPodStarted:t=>{let{isFullyClickable:r}=t;this.playerStore.dispatch(rf(!0)),this.callbacks.onAdPodStart({isFullyClickable:r}),y&&Lt("adsdk.creative.switch."+e)},onAdPodSkipped:()=>{this.callbacks.onAdPodSkip()},onAdPodStopped:()=>{G(E),y=!0,Nt("adsdk.creative.switch."+e),this.playerStore.dispatch($u(void 0)),this.callbacks.onAdPodEnd()},onAdPodPlayingStateChange:e=>{let{playingState:t,expectedStalledReason:r,adType:n}=e;t===gd.BUFFERING&&this.playerStore.dispatch($h(xr(r,{adType:n}))),this.playerStore.dispatch($u(t))},onAdClickThru:()=>{},onAdSizeChange:e=>{this.playerStore.dispatch(uh({videoWidth:$(void 0===e.width?NaN:e.width),videoHeight:$(void 0===e.height?NaN:e.height)}))},getControlsSettings:()=>function(e){const{ad:{nativeAdControlsVisibility:t}}=e;return{controlsVisibility:t?{}:{mute:!1,timeline:!1,play:!1}}}(this.playerStore.getState()),logEvent:this.callbacks.logEvent,onError:e=>this.onError(e),adConfig:this.state.ad.adConfig,playerContainer:this.config.useFriendlyFrame?Zs(this.state.controller.vsid,window.parent.document):document.getElementById("q"),lang:this.config.lang});this.currentAdPlaybackQueue=A,d.forEach(t=>{let{adViewer:r,additionalData:i,adType:o}=t;A.playAdViewers({adType:e,adPodType:o,adViewer:r,additionalData:i,adDisplayConfig:n,adElementsSet:f,posterUrl:this.getPosterUrlForAd()})}),this.plannedAdViewers=[],await A.getDestroyPromise(),Nt("adsdk.player.start."+e),this.once("ContentImpression",()=>{Lt("adsdk.player.start."+e)}),g||await v({stopAdReason:yu.AdCompleted,data:{loadPositionAfterAd:m}})},this.handleVideoControllerCurrentTimeChange=e=>{if(this.state.controller.encoderState!==Zg.Attached)return;!(e<Z(.5)&&this.state.controller.engine===Kv.NATIVE&&this.state.controller.videoType===Uc.LIVE)&&(this.playerStore.dispatch(ph(e)),this.playerStore.getState().ad.adInfo||this.playbackProgressStorage.saveProgress(e)),this.videoController.updateDVRParams(),this.updateVideoInfo()},this.handleVisualStateChange=e=>{let{isPip:t,isFullScreen:r,isVisible:n}=e;this.playerStore.dispatch(Xh(r));const{isSupportedPipMode:i,isYandexPipMode:o,isVisibilitySupported:a}=this.visualState;this.emit("VisualStateChange",al({isPip:t,isVisible:n,isFullScreen:r,isSupportedPipMode:i,isYandexPipMode:o,isVisibilitySupported:a},this.sizeSensor.getSize())),i&&!o&&(this.playerStore.dispatch(Qh(t)),a&&this.playerStore.dispatch(Jh(n)))},this.onRecover=e=>{const t=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(this.getDebugInfo(),dS);this.callbacks.onRecover(al({},e,t)),this.playerStore.dispatch($h(xr(Eu.Recover,{recoverReason:e.reason})))},this.logLoadStartHavingCurrentData=e=>()=>{if(!nc){if(this.video.readyState<this.video.HAVE_CURRENT_DATA){const t=this.logLoadStartHavingCurrentData(e);return this.once("LoadedData",t),void this.once("SetSource",()=>this.off("LoadedData",t))}this.isCanPlayAndStartHavingCurrentDataLog()&&this.emit("ContentImpression")}},this.logCanPlay=e=>()=>{nc||this.isCanPlayAndStartHavingCurrentDataLog()&&(this.callbacks.logEvent({event:vu.CanPlay,params:{stage:e}}),this.emit("ContentImpression"))},this.isCanPlayAndStartHavingCurrentDataLog=()=>!this.state.ad.hasPreroll&&this.state.controller.preload,this.startStream=()=>this.state.controller.encoderState===Zg.Attached?Promise.resolve():this.attachEncoder().catch(Su.error),this.handleFirstContentImpression=()=>{this.resetPosterFitStyle();const{controller:e}=this.playerStore.getState(),t=e.videoTracks.find(t=>{let{value:r}=t;return r===e.videoTrackValue});(0,Id.I8)({browserRtt:so(ve()),calcRtt:so(So())}),Si(this.videoController.engine,{videoType:e.videoType,bandwidth:io(t&&t.bitrate),startWithCapping:fi(t,this.videoController)},this.state.ad.adSyncInit),this.callbacks.logEvent({event:vu.ContentImpression,params:{}}),this.callbacks.onContentImpression({hasPreroll:this.state.ad.adSyncInit,engine:this.state.controller.engine}),this.playerStore.dispatch(rf(!0)),this.hidePoster()},this.setMaxListeners(14),this.container=e,this.preferNative=!0===n.preferNative,this.disableAndroidPlayer=!0===n.disableAndroidPlayer,this.config=n,this.onReady=ne(o);const l=n.source,{params:u}=l,{additionalParams:h}=u,f=n.volume,{togglePlaybackOnVisibilityChange:p}=n;this.callbacks=al({},om,n.callbacks),this.maxBufferLength=n.maxBufferLength,this.resourceTimingsMonitor=new EE(n.resourceTimingsMonitor);const{autoplay:g}=n,v=n.hidden;this.debug=Boolean(n.debug),this.debug&&Su.enableConsole(),this.div=document.createElement("div"),this.div.className=KA().locals.StreamPlayer,s(n.backgroundColor)&&(this.div.style.backgroundColor=n.backgroundColor),this.adDiv=document.createElement("div"),this.adDiv.className=KA().locals.StreamPlayer_ui,this.div.tabIndex=-1,this.container.appendChild(this.div),this.container.appendChild(this.adDiv);const m=Boolean(n.allowMuted),E=al({},n);delete E.callbacks;const y=li(this,{controller:al({},$g,{autoplay:g,initialAutoplay:g,allowMuted:m,preload:n.preload,from:h.from,vsid:h.vsid,volume:n.volume,muted:n.muted,userVolume:void 0===n.volume?NaN:f,isFullscreen:!1,togglePlaybackOnVisibilityChangeSetting:p,isDocumentVisible:A(this.getContainerDocument()),isOnline:!0,isAbrEnabled:n.autoQuality,defaultQuality:n.defaultQuality,feed:n.feed,preview:u.preview,playerConfig:E}),ad:al({},qg,{adblockDetected:vd.I,nativeAdControlsVisibility:n.useNativeAdControls}),skin:al({},Dv,{hiddenControls:v,useNativeSubtitles:!0,nativeControlsVisibility:!jc(v)})});this.playerStore=y,this.updateRumInfo();const S=this.container.getElementsByTagName("video")[0]||function(){const e=document.createElement("video");return window.parent&&window.parent.HTMLVideoElement&&XA(HTMLMediaElement.prototype,window.parent.HTMLVideoElement.prototype),e}();this.video=S,S.poster||(S.poster=Wc),this.playbackQualityController=new WA(S),this.mediaInternalsHistory=new cE(S),this.slotsController=new wE({parentElement:this.div,adElement:this.adDiv,originalVideoElement:S});const _=this.getContainerDocument().getElementsByTagName("head")[0];!function(e,t){const r=document.createElement("style");r.textContent+=e,t?t.appendChild(r):c(window).appendChild(r)}(KA().toString(),_),j(S,KA().locals.player__video),this.videoSizeSensor=new Cc(S),r(()=>window.Ya.Rum.sendHeroElement()),function(e){e.setAttribute("playsinline","playsinline"),e.setAttribute("webkit-playsinline","webkit-playsinline")}(S),this.visualState=i.visualState,this.visualState.setVideoElement(S),this.on("VisualStateChange",e=>{e&&this.callbacks.onVisualStateChange(e)});const w=function(e,t,r){let n,i=0;const o=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.call(r,...n)};return function(){const e=Date.now(),r=e-i;clearTimeout(n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];r<t?n=window.setTimeout(o,t-r,...s):(i=e,o(...s))}}(this.handleSizeSensorUpdate,500);this.sizeSensor=this.videoSizeSensor,this.sizeSensor.onResize.add(e=>{let{width:t,height:r}=e;return w({width:$(t),height:$(r)})}),w(this.sizeSensor.getSize()),this.once("Destroy",()=>this.sizeSensor.destroy()),p&&this.visualState.isYandexPipMode&&Eo(window,!1,this.video),this.visualState.observe(this.handleVisualStateChange),this.handleVisualStateChange(this.visualState.getState()),this.visibilityDetectPromise=Promise.resolve(this.visualState.getState()),this.defineAutoplaySettingsAndLoadSource(),Promise.resolve().then(()=>{this.initEventSubscribes(n,S)})}recoverStream(){return this.videoController?this.videoController.recoverStream():Promise.resolve()}getRecoverHelper(){if(this.videoController)return this.videoController.recoverHelper}toggleNativeSubtitles(e){this.videoController&&this.videoController.toggleNativeSubtitles(e)}updateVideoControllerNativeControlsVisibility(){this.videoController&&this.videoController.updateNativeControlsVisibility()}getMultiroll(){return this.multiroll}getConnectionQuality(){return this.videoController?this.videoController.getConnectionQuality():Sv.UNKNOWN}setPictureInPictureEnabled(e){Eo(window,e,this.video)}setFeed(e){this.playerStore.dispatch(Kh(e))}getRemainingBufferedTime(){return this.videoController?this.videoController.getRemainingBufferedTime():{total:Z(0)}}getSegmentSize(){var e;return null==(e=this.videoController)?void 0:e.getSegmentSize()}getVideoPlaybackQuality(){return this.playbackQualityController.getPlaybackQuality()}getMaxCapAllowedVideoTrack(){if(this.videoController)return this.videoController.getMaxCapAllowedVideoTrack()}getContainerSize(){var e;return null==(e=this.videoController)?void 0:e.getContainerSize()}getVideoTrack(){return Wn(this.state)}getVideoTracks(){return this.state.controller.videoTracks}getAudioTrack(){return pn(this.state)}getAudioTracks(){return this.state.controller.audioTracks}getTextTrack(){return function(e){const{textTrackEnabled:t}=e.controller;if(t)return di(e)}(this.state)}getTextTracks(){return this.state.controller.textTracks}setNativeTextTrackVisibility(e){this.playerStore.dispatch(Gh(e))}setNativeAdControlsVisibility(e){this.playerStore.dispatch(Ju(e))}getMuted(){return this.state.controller.muted}getLiveLatency(){return void 0===this.videoController?void 0:this.videoController.getLiveLatency()}getPlayingState(){return this.state.controller.playingState}getDuration(){return this.state.controller.duration}getCurrentTime(){return this.state.controller.currentTime}getTimelineInfo(){const{controller:{duration:e,currentTime:t},skin:{skinDVRStartTime:r,skinDVRDuration:n}}=this.state;return{currentTime:t,duration:e,utcStartTime:this.getUtcStartTime(),dvrStartTime:r,dvrDuration:n}}getWatchedTime(){return this.state.controller.watchedTime}getExpectedStalled(){return this.state.controller.expectedStalled}getPreloadDetails(){const{preloadDetails:e}=this.state.controller;if((null==e?void 0:e.preloadingMethod)!==am.Internal)return e}getBandwidthEstimate(){return(void 0===this.videoController?this.state.controller.lastKnownBandwidthEstimate:this.videoController.getBandwidthEstimate())||void 0}setExternalRequestController(e){this.externalRequestController&&this.externalRequestController.destroy(),this.externalRequestController=e}getCurrentStream(){return this.state.controller.stream}setVideoStyle(e){this.playerStore.dispatch(af(e)),M(this.video,e)}setSource(e,t){let{shouldSaveProgress:r=!1}=void 0===t?{}:t;this.loadSource(e,{shouldSaveProgress:r}).catch(e=>{vo(e,iv.SET_SOURCE),this.onError(e)}),this.emit("SetSource",e);const n=this.logCanPlay(iv.SET_SOURCE);this.once("CanPlay",n),this.once("SetSource",()=>this.off("CanPlay",n));const i=this.logLoadStartHavingCurrentData(iv.SET_SOURCE);this.once("LoadedData",i),this.once("SetSource",()=>this.off("LoadedData",i))}getSourceId(){return this.playerStore.getState().controller.sourceId}getUtcPosition(){return this.videoController?this.videoController.getUtcPosition():Xy}planAdViewers(e){this.plannedAdViewers=e}play(){var e,t;if(this.performPlayCallbacks(),this.currentAdPlaybackQueue&&cn(this.state))return this.currentAdPlaybackQueue.resumeAd(),null==(e=this.playDeferred)||e.resolve(),Promise.resolve();if(this.plannedAdViewers.length>0)return this.playAdViewers(mu.postPauseroll,this.plannedAdViewers,{}),null==(t=this.playDeferred)||t.resolve(),Promise.resolve();if(!this.videoController||this.state.controller.encoderState!==Zg.Attached)return this.playerStore.dispatch(rh(!0)),this.playerStore.dispatch(nh(Jg.starting)),this.abortRequestAutoplaySettings(Vv.ApiPlay),this.playDeferred||(this.playDeferred=new qc,this.playDeferred.promise.catch(d).then(()=>this.playDeferred=void 0)),this.playDeferred.promise;const r=this.videoController.getCurrentTime(),n=this.videoController.getDuration();n>0&&r>=n&&this.seek({videoTime:Z(0)}),Su.log("StreamPlayer.play() -> videoController.play()");const i=this.videoController.play();return i.then(()=>{var e;return null==(e=this.playDeferred)?void 0:e.resolve()},e=>{var t;return null==(t=this.playDeferred)?void 0:t.reject(e)}),i}pause(){var e;mi(),this.playerStore.dispatch(rf(!0)),this.state.controller.startStage!==Jg.started&&(this.playerStore.dispatch(rh(!1)),this.playerStore.dispatch(nh(Jg.waitForUserPlay))),null==(e=this.playDeferred)||e.reject(new Error("playing rejected cause of #pause()")),this.currentAdPlaybackQueue&&cn(this.state)?this.currentAdPlaybackQueue.pauseAd():this.videoController&&this.state.controller.encoderState===Zg.Attached?this.videoController.pause():this.playerStore.dispatch(rh(!1))}getPlaybackRate(){return this.state.controller.playbackRate}setVideoTrack(e){const t=this.getVideoTrack();if(ol(t,e))return;this.playerStore.dispatch(Mh(e===Yv.value));const r=e===Yv.value&&this.state.controller.isAbrSupported?Yv:this.state.controller.videoTracks.find(t=>t.value===String(e)),{videoHeight:n}=this.state.controller,i=((null==r?void 0:r.height)||0)>n;r&&r.value!==Yv.value&&i&&function(e,t){void 0===t&&(t=xv),t in Ky?Ky[t].preferHd=e:Ky[t]={preferHd:e},Rm.setItem("videoplayer-prefer-hd",JSON.stringify(Ky))}(!0,this.state.controller.from),this.playerStore.dispatch(Fh({name:r&&r.value!==Yv.value&&r.name||void 0,height:r&&r.height?$(r.height):void 0})),r&&(this.videoController.setVideoTrack(r),this.playerStore.dispatch($h(xr(Eu.VideoTrackChange,{newTrack:r,oldTrack:t}))),Su.log("SELECTED VIDEO TRACK: ",r))}setAudioTrack(e){const t=this.getAudioTrack();if(ol(t,e))return;const r=this.state.controller.audioTracks.find(t=>t.value===String(e));r&&(this.playerStore.dispatch(Hh({name:r.name||void 0,lang:r.lang||void 0})),this.videoController.setAudioTrack(r),this.playerStore.dispatch($h(xr(Eu.AudioTrackChange,{newTrack:r,oldTrack:t}))),Su.log("SELECTED AUDIO TRACK: ",r))}getDebugInfo(){const{resourceTimingsMonitor:e}=this,t=this.videoController;return{recoverHelperState:t?t.getRecoverHelperState():sm.OFF,state:this.getState(),remainingBufferedTime:Vn(this.state),resourceTimings:e.getAllResourcesTimings(),connectionQuality:t?t.getConnectionQuality():Sv.UNKNOWN,mediaInternalsHistory:this.mediaInternalsHistory.getHistory()}}getState(){return this.state}setTextTrack(e){const{textTracks:t,userTextTrackLang:r,userTextTrackName:n,textTrackEnabled:i,textTrackValue:o}=this.state.controller;if(i&&o===e)return;if("auto"===e)return void this.playerStore.dispatch(zh());const a=void 0===e?void 0:t.find(t=>t.value===e),s={enabled:Boolean(a),lang:a?a.lang||void 0:r,name:a?a.name||void 0:n};this.playerStore.dispatch(qh(s)),a?(this.videoController.setTextTrack(a),Su.log("SELECTED TEXT TRACK: ",a)):(this.videoController.disableTextTrack(),Su.log("DISABLE TEXT TRACK"))}getVolume(){return this.state.controller.volume}setFullscreen(e){if(e)try{this.visualState.changeFullscreenState({isFullScreen:!0})}catch(pT){Su.error("Request fullscreen for element:",pT)}else try{this.visualState.changeFullscreenState({isFullScreen:!1})}catch(pT){Su.error("Exit fullscreen for element:",pT)}}async destroy(){this.stopAd({stopAdReason:yu.PlayerDestroy,data:{loadPositionAfterAd:void 0}}),this.stopLoadSource(lm.destroy),this.multiroll.destroy(),this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.destroy(yu.PlayerDestroy),this.onlineMonitor.destroy(),this.visualState.destroy(),this.resourceTimingsMonitor.destroy(),this.mediaInternalsHistory.destroy(),this.playbackQualityController.destroy(),this.emit("Destroy"),await this.destroyVideoController(),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(this.container)}skipAdPod(){this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.skipAdPod()}stop(){this.seek({videoTime:Z(0)}),this.pause()}preloadSource(e){this.callbacks.logEvent({event:vu.PreloadSource,params:{source:e}});let t=d,r=!1;return{promise:this.preloadSourceImpl(e,()=>r,e=>t=e),abort:()=>{r||(r=!0,t())}}}initEventSubscribes(e,t){this.once("Destroy",T(this.getMainContainer(),"click",t=>{if(this.state.controller.watchedTime>0)return;if(void 0!==this.state.ad.inStreamPlayingState)return;void 0!==e.shouldPlayOnFirstClick&&e.shouldPlayOnFirstClick&&this.play()},{once:!0})),rc&&this.once("Destroy",Qs(()=>this.destroy())),this.once("Destroy",T(this.div,"selectstart",e=>{e.preventDefault(),e.stopPropagation()})),this.once("Destroy",z(()=>{this.playerStore.dispatch(Qu())})),this.once("Destroy",T(this.getMainContainer(),"click",t=>{this.state.controller.watchedTime>0||void 0===this.state.ad.inStreamPlayingState&&e.shouldPlayOnFirstClick&&this.play()},{once:!0})),rc&&this.once("Destroy",Qs(()=>this.destroy())),this.once("Destroy",()=>{this.off("VisualStateChange")}),this.initClickerEventListener(this.div),this.initTouchZoomPreventor(this.div),this.once("Destroy",T(this.video,"volumechange",()=>{(this.videoController||this.currentAdPlaybackQueue)&&this.updateVolumeInfo()})),this.subscribeHandlers()}initClickerEventListener(e){const t=new du(e);this.once("Destroy",()=>t.destroy()),t.on("Event",e=>{let{type:t,event:r}=e;if(cn(this.state))return;const n=al({},r);n.preventDefault=void 0,this.callbacks.onVideoClickerEvent({type:t,event:n})})}initTouchZoomPreventor(e){const t=new fu(e);this.once("Destroy",()=>t.destroy())}updateRumInfo(){const{controller:e}=this.state;(0,Id.I8)({apiVersion:2,bundle:"modern",isMobile:this.config.isMobile,useFriendlyFrame:this.config.useFriendlyFrame,slowConnection:this.config.slowConnection,vsid:e.vsid,from:e.from,saveData:lo()})}requestAutoplaySettings(e,t,n){return function(e){return void 0===e&&(e=window),jd(e).some(e=>{const{hasBeenActive:t}=r(()=>Xs(e))||{hasBeenActive:!1};return t})}(window)?{promise:Promise.resolve({autoplay:t.autoplay,muted:t.muted,detectionMethod:"ACTIVATED_WINDOW"}),abort:d,skipCacheUpdate:!0}:il(al({},t,n,{videoSlot:e}))}defineAutoplaySettings(e,t){if(this.state.controller.autoplay&&!this.state.controller.isDocumentVisible)return this.playerStore.dispatch(nh(Jg.waitForDocumentVisibility)),this.playerStore.dispatch(rh(!1)),void(this.defineAutoplaySettingsPromise=Promise.resolve());let n;C("detect.autoplay");const i=zs(t),{promise:o,skipCacheUpdate:a=!1,abort:s}=this.requestAutoplaySettings(e,t,i);o.then(()=>{k("detect.autoplay")});const{promise:l,clear:d}=Nc(500);this.clearRequestAutoplaySettingsTimeout=()=>{d()},l.then(()=>{this.state.controller.startStage===Jg.init&&this.playerStore.dispatch(nh(Jg.waitForUserPlay))});const c=oe();this.abortRequestAutoplaySettings=e=>{void 0===n&&this.callbacks.logEvent({event:"PlayWithoutRAAResults",params:{delay:c(),reason:e}}),s()},this.runRequestAutoplaySettingsLogger(o,t,i),o.then(e=>{var n,o;a||(o=e,function(e,t){return!t||e.allowMuted!==t.allowMuted||e.autoplay!==t.autoplay||e.muted!==t.muted}(n=t,i)&&r(()=>{Rm.setItem(qs(n),JSON.stringify(Ws({},o,{cacheVersion:2,time:Date.now()})))}))}),this.defineAutoplaySettingsPromise=Promise.all([o,this.visibilityDetectPromise]).then(e=>{let[t]=e;n=t,this.clearRequestAutoplaySettingsTimeout();const{isVisible:r}=this.state.controller;Su.log("Autoplay settings defined",n);const{autoplay:i,muted:o,autoplayImpossible:a,requireAllowMutedToAutoplay:s}=n;this.playerStore.dispatch(sh({muted:o,volume:this.state.controller.volume,changeReason:dm.RequestAutoplaySettings}));const l=function(e){const{controller:{togglePlaybackOnVisibilityChangeSetting:t,muted:r}}=e;return!!t&&!(t.onlyMuted&&!r)}(this.state)&&!1===r;l&&this.callbacks.logEvent({event:"HiddenAutoplayPrevented",params:{autoplaySettingsRequestResult:n}});const d=i&&!l&&this.state.controller.autoplay;Su.log("autoplay status:",i),Su.log("isVisible",r),Su.log("preventHiddenAutoplay",l);const c=d?Jg.starting:Jg.waitForUserPlay;var u;(this.playerStore.dispatch(nh(c)),d)?this.playerStore.dispatch(ih(!0)):(mi(),null==(u=this.playDeferred)||u.reject(new Error("playing rejected cause of autoplay-false")));if(this.playerStore.dispatch(rh(d)),a){this.playerStore.dispatch(lh(!0)),this.callbacks.logEvent({event:"AutoplayImpossible",params:{autoplaySettingsRequestResult:n}});try{console.warn("Cannot autoplay video"+(s?" with sound":"")+" in this environment."+(s?" Use autoplay={allowMuted: true} if you prefer mute video and enable autoplay.":""))}catch(h){}}})}createVideoController(e,t){let{stream:r,supportInfo:n}=e;const i={playerStore:this.playerStore,video:this.video,videoSizeSensor:this.videoSizeSensor,stream:r,sourceParams:t,debug:this.debug,liveOffset:this.config.liveOffset,slowConnection:this.config.slowConnection,maxBufferLength:this.maxBufferLength,defaultQuality:this.state.controller.defaultQuality,maxRecoverAttempts:this.config.maxRecoverAttempts,bandwidthEstimateOffset:this.config.bandwidthEstimateOffset,resourceTimingsMonitor:this.resourceTimingsMonitor,setPlayerBackgroundImage:this.setBackgroundImage,setPlayerBackgroundVisibility:this.setBackgroundVisibility,onError:e=>this.onError(e),onRecover:this.onRecover,logEvent:this.callbacks.logEvent,onSubtitlesChange:this.callbacks.onSubtitlesChange,onThumbnailTileGeneralMetaInfoChange:this.callbacks.onThumbnailTileGeneralMetaInfoChange,getPipWindowSize:()=>this.visualState.getPipWindowSize()},o=(a=n.engine,s=i,l=this.getPreloader(r,t),a===Kv.YANDEX?new HA(s):a===Kv.HLS?new eA(s):a===Kv.MPD?new RA(s,l):a===Kv.MP4?new iA(s):new IA(s));var a,s,l;this.cleanCachePreloaders();const d=e=>{this.videoController=e,this.playerStore.dispatch(th(n.engine)),this.callbacks.onEngineChange(n.engine,this.playerStore.getState().controller.sourceId),(0,Id.Z$)("engine",n.engine),e.on("VideoPlayingStateChange",e=>this.emit("VideoPlayingStateChange",e)),e.on("MetadataChange",e=>this.emit("MetadataChange",e)),e.on("CurrentTimeChange",e=>this.emit("CurrentTimeChange",e)),e.on("DurationChange",e=>this.emit("DurationChange",e)),e.on("DvrChange",()=>this.emit("DvrChange")),e.on("DVRDurationChange",e=>this.callbacks.onDVRDurationChange(e)),e.on("DVRStartTimeChange",e=>this.callbacks.onDVRStartTimeChange(e)),e.on("ProgramDateTimeChange",e=>this.emit("ProgramDateTimeChange",e)),e.on("BufferingRangesChange",e=>this.emit("BufferingRangesChange",e)),e.on("CanPlay",()=>this.emit("CanPlay")),e.on("ContentImpression",()=>this.emit("ContentImpression")),e.on("DrmSystemChange",this.callbacks.onDrmSystemChange),e.on("LoadedData",()=>this.emit("LoadedData")),e.on("VideoTypeChange",e=>this.emit("VideoTypeChange",e)),e.on("VideoTrackValueChange",e=>this.emit("VideoTrackValueChange",e)),e.on("AudioTrackValueChange",e=>this.emit("AudioTrackValueChange",e)),e.on("TextTrackValueChange",e=>this.emit("TextTrackValueChange",e)),e.on("VideoTracksChange",e=>this.emit("VideoTrackChange",e)),e.on("AudioTracksChange",e=>this.emit("AudioTracksChange",e)),e.on("TextTracksChange",e=>this.emit("TextTracksChange",e))};return Dc(o)?Promise.resolve().then(async()=>d(await o)):d(o)}cleanCachePreloaders(){for(;this.cachePreloaders.length>0&&this.config.cacheSourcesCount<this.cachePreloaders.length;)this.cachePreloaders[0].destroy(),this.cachePreloaders.splice(0,1)}getPreloader(e,t){const r=oo(e.url),n=this.preloaders.filter(e=>oo(e.getSource().stream.url)===r);var i;n.push(...this.cachePreloaders.filter(e=>oo(e.getSource().stream.url)===r)),n.sort((i=t.startPosition.videoTime||Z(0),function(e,t){const{total:r,audio:n,video:o}=$i(e.getBufferedInfo(),i),{total:a,audio:s,video:l}=$i(t.getBufferedInfo(),i);return r!==a?a-r:o!==l?l-o:s-n}));const o=n[0];if(void 0===o)return;let a=this.preloaders.indexOf(o);return a>-1?this.preloaders.splice(a,1):(a=this.cachePreloaders.indexOf(o),a>-1&&this.cachePreloaders.splice(a,1)),o}getPreparedSourceParams(e,t,r){return al({},Uv,t,{startPosition:this.getInitialStartPosition(t,r),withCredentials:ao(e,t)})}getInitialStartPosition(e,t){const r=e&&e.startPosition||Uv.startPosition;if(r){if(x(r).some(e=>ie(r[e])))return r}const n=null==t?void 0:t.getProgress();return void 0===n?r:{videoTime:n}}async loadSource(e,t){let{shouldSaveProgress:n}=t;Su.log("loadSource start",e),this.callbacks.onEngineChange(void 0,this.playerStore.getState().controller.sourceId),this.callbacks.onDrmSystemChange(void 0);const i=n?"LoadSourceWithSaveProgress":"LoadSource";this.callbacks.logEvent({event:i,params:{source:e}}),yi(),this.shouldCaptureScreenshot()&&(this.setBackgroundImage(),this.setBackgroundVisibility(!1),this.videoController.clearScreenshot()),this.stopAd({stopAdReason:yu.LoadSource,data:{loadPositionAfterAd:void 0}}),this.plannedAdViewers=[],this.stopLoadSource(lm.setSource),this.playbackProgressStorage.clearVideoContentId(),this.playerStore.dispatch(Sh(void 0)),this.playerStore.dispatch(mh(void 0)),this.playerStore.dispatch(Eh(void 0)),this.playerStore.dispatch(Ah(e.streams)),this.playerStore.dispatch(rf(!1));const{preferredAudioLangs:o,preferredTextLangs:a}=e.params.preferredTracks;o.length>0&&this.playerStore.dispatch(Hh({lang:o[0],name:void 0})),a.length>0&&this.playerStore.dispatch(qh({lang:a[0],name:void 0,enabled:!0}));const s=new Rf;this.stopLoadSource=e=>s.stop(e);try{this.multiroll.destroy()}catch(fT){!function(e,t){r(()=>window.Ya.Rum.logError(hi({},e,{additional:(0,Id.B6)()}),t))}({message:"Can not destroy multiroll instance",method:"loadSource",source:"multiroll",sourceMethod:"destroy",type:"logic"},fT)}this.multiroll=aE;const l=!this.videoController,{streams:d}=e,c=Ji({streams:d,video:this.video,preferNative:this.preferNative,disableAndroidPlayer:this.disableAndroidPlayer}),u=no(e.params),h=function(e){return(0,Ql.K)(e)&&!1===e.hasPreroll}(u);this.playerStore.dispatch(Xu((0,Ql.K)(u)&&(!h||!1!==u.hasPreroll)));let f=h?null:this.initMultirollModule(u,s);(0,Id.Z$)("hasPreroll",!h);const p=this.destroyVideoController(),g=await c;if(this.playerStore.dispatch(Sh(g.streamsWithSupportInfo)),s.stopReason)return void this.callbacks.logEvent({event:vu.StreamStopWhileChoosingStream,params:void 0});if("error"===g.status)throw g.error;const{supportedStream:v}=g;var m;(m=v).supportInfo.engine===Kv.MPD?Ks(GE):m.supportInfo.engine===Kv.HLS&&Ks(YE);const{stream:E}=v;this.playbackProgressStorage.setVideoContentId(this.config.restoreTabSessionPlaybackProgress?e.params.videoInfo.videoContentId:void 0);const y=this.getPreparedSourceParams(E,e.params,this.playbackProgressStorage);if(await p,s.stopReason)return void this.callbacks.logEvent({event:vu.StreamStopWhileDestroyVideoController,params:void 0});if(this.resetPlayerStore(E,y,{shouldSaveProgress:n,isFirstLoad:l}),await Promise.race([this.defineAutoplaySettingsPromise,s.stopPromise]),s.stopReason)return void this.callbacks.logEvent({event:vu.StreamStopDuringDefineAutoplaySettings,params:void 0});const A=this.createVideoController(v,y);if(Dc(A)&&(await Promise.race([A,s.stopPromise]),s.stopReason))return;this.state.ad.hasPreroll||!this.state.controller.preload&&!this.state.controller.autoplay||this.preloadVideoControllerSource(),(0,Id.Z$)("bandwidthEstimate",io(Oc(this.videoController.getBandwidthEstimate().value,1e3))),(0,Id.Z$)("drm","none"),l?(Promise.resolve().then(()=>{this.initBroadcastAd()}),to(E.url,Boolean(y.withCredentials)).then(e=>{this.playerStore.dispatch(Gu(e||vd.I))}),this.setMuted(this.state.controller.muted),this.setVolume(this.state.controller.volume)):this.prepareNextSource(E,y),this.setPosterFitStyle(),this.once("ContentImpression",this.handleFirstContentImpression),this.once("SetSource",()=>this.off("ContentImpression",this.handleFirstContentImpression));const S=async()=>{f||(f=this.initMultirollModule(u,s));const e=await f;if(s.stopReason)return this.callbacks.logEvent({event:vu.StreamStopWhileLoadingMultiroll,params:{streamStopReason:s.stopReason}}),void e.destroy();this.multiroll=e};if(h){const{adInitOffset:e=0}=u||{};new Promise(t=>{let r=!1;const n=()=>{this.off("CurrentTimeChange",i),this.off("ContentImpression",o)},i=()=>{if(!r)return;this.getWatchedTime()<=e||(n(),t())},o=()=>r=!0;this.on("ContentImpression",o),this.on("CurrentTimeChange",i),this.once("SetSource",n)}).then(()=>{s.stopReason||S()})}else await S();s.stopReason||this.startPrerollAndContent(s,l)}async preloadSourceImpl(e,t,r){const{streams:n}=e,i=Ji({streams:n,video:cS,preferNative:this.preferNative,disableAndroidPlayer:this.disableAndroidPlayer}),o=await i;if(t())throw new Error("abort preloadSource");if("error"===o.status)throw o.error;const{supportedStream:a}=o,{stream:s,supportInfo:l}=a,d=new fE;d.setVideoContentId(this.config.restoreTabSessionPlaybackProgress?e.params.videoInfo.videoContentId:void 0);const c=this.getPreparedSourceParams(s,e.params,d),u=co({stream:s,sourceParams:c}),h=this.preloaders.find(e=>co(e.getSource())===u);if(h)return r(()=>h.destroy()),h.preload();const f=function(e){let{engine:t,source:r,getState:n,getCapSizes:i}=e;switch(t){case Kv.MPD:return new dy({source:r,getState:n,getCapSizes:i,type:am.Api});case Kv.YANDEX:return void new cy(r);default:return}}({engine:l.engine,source:{stream:s,sourceParams:c},getState:()=>this.playerStore.getState(),getCapSizes:()=>{var e;return null==(e=this.videoController)?void 0:e.getCapSizes()}});if(!f)throw new Error("can not create preloader");return this.preloaders.splice(0,0,f),this.preloaders=this.preloaders.filter(e=>!e.isDestroyed).slice(0,10),r(()=>f.destroy()),f.preload()}async initMultirollModule(e,r){let n=aE;if(!e)return n;Ai("AD",!0);try{const i=Vt(window,e,this.state.controller.vsid),o=await Promise.race([i,r.stopPromise.then(()=>{})]);if(void 0===o)return n;const{loadMultiroll:a}=o,s={adSdkVersion:Je(window),adSdkLoaderVersion:Qe(window)};(0,Id.Z$)("adSdkVersion",s.adSdkVersion),(0,Id.Z$)("adSdkLoaderVersion",s.adSdkLoaderVersion),this.callbacks.onAdSDKVersionDefined(s);const l=a(al({},e,{secureMode:"Safe",getSTRMChunkHost:()=>{const e=Nn(this.resourceTimingsMonitor.getAllResourcesTimings());if(0===e.length)return;const{hostname:t,protocol:r}=se(e[0]);return r+"//"+t+"/"}}),{preroll:{shouldPreload:()=>{const{preload:e,startStage:t}=this.state.controller;return e&&(t===Jg.waitForUserPlay||t===Jg.waitForDocumentVisibility)}},midroll:{preloadOffset:20,preloadMinTime:Z(5)},postroll:{preloadOffset:20,preloadMinTime:Z(5)},getPreloadParams:()=>{const e={videoSlot:this.video};if(!this.videoController||!this.state.ad.nextAdInfo)return e;const t=this.videoController.getBandwidthEstimate();return t.value?al({},e,{desiredBitrate:t.value/1e3}):e}});t(r.stopPromise.then(()=>l).then(e=>e.destroy()));const d=await Promise.race([l,r.stopPromise.then(()=>{})]);if(void 0===d)return n;n=d}catch(fT){Ei({reason:"MULTIROLL_INIT_ERROR",adSdkVersion:Je(),adSdkLoaderVersion:Qe(),adblockDetected:this.state.ad.adblockDetected,bandwidth:io(void 0)}),this.onError(new gu({isFatal:(0,Wl.m)(zd)&&("0"===String(fT.code)||!fT.code),code:Ad.MULTIROLL_INIT_ERROR,details:{error:fT,adConfig:e}}))}return n}async startPrerollAndContent(e,t){Su.log("startPrerollAndContent");let r=[];const n=ne(()=>this.startStream()),i=ne(async()=>{this.multiroll!==aE&&Nt("adsdk.loadviewers.preroll");const t=this.multiroll.preroll.loadViewers({}),n=await Promise.race([t,e.stopPromise.then(()=>{})]);if(void 0===n)return;r=n,this.multiroll!==aE&&Lt("adsdk.loadviewers.preroll");const i=r.length>0;this.playerStore.dispatch(zu(i)),i&&this.callbacks.logEvent({event:vu.PrerollInit,params:{}})}),{startStage:o,preload:a}=this.state.controller;if(o===Jg.waitForUserPlay||o===Jg.waitForDocumentVisibility){if(Su.log("Waiting for "+(o===Jg.waitForUserPlay?"user gesture":"document visibility")),this.callbacks.logEvent({event:o===Jg.waitForUserPlay?vu.WaitForUserGesture:vu.WaitForDocumentVisibility,params:{preload:a}}),a){if(Su.log("Preload preroll in player"),await Promise.race([i(),e.stopPromise]),e.stopReason)return void this.callbacks.logEvent({event:vu.StreamStopWhilePreloadingPreroll,params:{streamStopReason:e.stopReason}});this.state.ad.hasPreroll||(Su.log("No preroll, preload content"),n())}if(o===Jg.waitForDocumentVisibility&&await function(e,t){return A(e)===t?Promise.resolve():new Promise(r=>{R(e,e=>{e===t&&r()})})}(this.getContainerDocument(),!0),this.state.controller.startStage===Jg.waitForUserPlay&&await this.waitForPlay(),e.stopReason)return void this.callbacks.logEvent({event:o===Jg.waitForUserPlay?vu.StreamStopWhileWaitingForPlay:vu.StreamStopWhileWaitingForDocumentVisibility,params:{streamStopReason:e.stopReason}})}if(Su.log("Start playing"),t&&this.playerStore.dispatch(rh(!0)),await Promise.race([i(),e.stopPromise]),e.stopReason)this.callbacks.logEvent({event:vu.StreamStopWhileLoadingPreroll,params:{streamStopReason:e.stopReason}});else{if(!this.state.ad.hasPreroll)return await n(),this.playAfterWaitingForDocumentVisibility(),void this.performPlayCallbacks();this.playerStore.dispatch(ih(!0)),Su.log("Start preroll"),this.playAdViewers(mu.preroll,Re(r,mu.preroll),{videoSlotCanAutoPlay:o!==Jg.waitForDocumentVisibility||void 0})}}waitForPlay(){const e=oe();return new Promise(t=>{let r=d,n=0;const i=i=>{r(),clearInterval(n),this.callbacks.logEvent({event:vu.WaitForPlayCompleted,params:{reason:i,timeout:e()}}),this.playerStore.getState().controller.startStage!==Jg.started&&this.playerStore.dispatch(nh(Jg.starting)),t()};this.video.paused?(this.playCallbacks.push(()=>{i(Gv.PlayCallback)}),r=T(this.video,"play",()=>{i(Gv.VideoPlayEvent)}),n=window.setInterval(()=>{this.video.paused||i(Gv.DetectByInterval)},250)):i(Gv.VideoIsNotPausedOnInit)})}initBroadcastAd(){const{video:e,playerStore:t}=this;if(this.broadcastAd=new Tf(e,e.parentElement,t,this,e=>this.onError(e)),this.videoController&&this.videoController.engine===Kv.NATIVE){let t=0;e.addEventListener("timeupdate",()=>{const{currentTime:r}=e;this.isLive()&&r<t&&this.broadcastAd&&this.playerStore.dispatch(Ku({})),t=r})}this.on("MetadataChange",e=>{const{fragmentMetadataArray:t,fragmentStart:r}=e;if(Su.log("receive metadata: ",t),!this.broadcastAd)return;const{programDateTime:n}=this.state.controller;if(void 0===n)return;const i=bc(n,Ic(r,1e3));let o;Math.random()<.01&&this.callbacks.logEvent({event:vu.StreamPlayerReceivedMetadata,params:e}),t.forEach(e=>{try{const t=JSON.parse(e);if(!function(e){return(0,Ql.K)(e)&&s(e.cue_id)&&ie(e.offset)}(t))return;o=al({},t,{pts:i})}catch(pT){Su.log("metadata is not valid ["+e+"]")}}),o&&this.broadcastAd.handleInrollFrame(o).catch(e=>{Su.error(e),this.onError(new gu(e,{code:Ad.BROADCAST_AD_BLOCK_INIT_ERROR,isFatal:!1,details:{code:e.code,message:e.message,id:e.id,details:e.details,stack:e.stack,metadata:{cueId:o.cue_id,podStart:i+o.offset}}}))})}),this.broadcastAd.on("AdIntervalRemoved",e=>{this.playerStore.dispatch(qu(e))}),this.broadcastAd.on("AdIntervalUpdated",e=>{let{cueId:t,start:r,end:n}=e;this.playerStore.dispatch(Wu({cueId:t,start:Oc(r,1e3),end:Oc(n,1e3)}))}),this.broadcastAd.on("InrollAdPlayRequest",e=>{this.playAdViewers(mu.inroll,e,{})})}getPosterUrlForAd(){var e;const t=null==(e=this.state.controller.sourceParams)?void 0:e.preview;return t&&t!==Wc?t:null}prepareBeforeOrAfterAd(e,t){this.broadcastAd&&t!==mu.inroll&&this.broadcastAd.setEnabled(e)}getSeekPositionAfterAd(e){let{adType:t,adViewersDuration:r}=e;const n=this.getUtcPosition();if(t===mu.inroll){const e=bc(this.state.controller.currentTime,r);return{utc:n?bc(n,r):void 0,videoTime:e}}return t===mu.preroll?this.state.controller.startPosition:t===mu.midroll||t===mu.postPauseroll?{utc:Z(n)||void 0,videoTime:Z(this.videoController.getCurrentTime())}:t===mu.postroll?{videoTime:Z(0)}:{}}updateVideoInfo(){cn(this.state)?this.playbackQualityController.persist():this.playbackQualityController.update()}resetPlayerStore(e,t,r){let{shouldSaveProgress:n,isFirstLoad:i}=r;this.playerStore.dispatch(yh()),this.playerStore.dispatch(mh(e)),this.playerStore.dispatch(Eh(t));const o=this.getStartPositionForLoadSource(t,{shouldSaveProgress:n});if(this.playerStore.dispatch(Th(o)),n||this.playerStore.dispatch(ch($g.duration)),this.playerStore.dispatch(ph(o.videoTime||$g.currentTime)),!i){const{additionalParams:e=Fv}=t,{from:r=xv}=e;this.playerStore.dispatch(vh(r)),this.playerStore.dispatch(ef(t.preview||Uv.preview)),this.playerStore.dispatch(kh($g.bufferingRanges)),n||this.playerStore.dispatch(tf($g.watchedTime)),this.playerStore.dispatch(hh(void 0)),this.playerStore.dispatch(wh(void 0)),this.playerStore.dispatch(xh($g.videoTracks)),this.playerStore.dispatch(Uh($g.audioTrackValue)),this.playerStore.dispatch(Bh($g.audioTracks)),this.playerStore.dispatch(Yh($g.textTrackEnabled)),this.playerStore.dispatch(Wh($g.textTrackValue)),this.playerStore.dispatch(jh($g.textTracks)),this.callbacks.onSubtitlesChange([]),this.callbacks.onThumbnailTileGeneralMetaInfoChange(void 0),this.playerStore.dispatch(Ku({})),this.state.controller.playingState===gd.END&&this.playerStore.dispatch(fh(gd.PAUSE)),this.playerStore.dispatch($u(void 0)),this.playerStore.dispatch(zu(!1)),this.playerStore.dispatch(eh(void 0)),this.playerStore.dispatch(lf($g.preloadDetails))}this.playerStore.dispatch(Bu(no(t)))}prepareNextSource(e,t){this.playerStore.dispatch(Dh({})),this.emit("DurationChange",Z(NaN)),this.playerStore.dispatch(ih(!0)),this.playbackQualityController.reset(),this.playCallbacks=[],this.playerStore.dispatch(Vh({videoTrackValue:$g.videoTrackValue,isAbrEnabled:this.state.controller.isAbrEnabled})),this.broadcastAd&&this.playerStore.dispatch(Ku({})),this.playerStore.dispatch($h(xr(Eu.SetSource,{stream:e,params:t})))}performPlayCallbacks(){this.playCallbacks.length>0&&(G(this.playCallbacks),this.playCallbacks=[])}seekToVideoPosition(e,t){Number.isNaN(e)||(cn(this.state)&&!t?this.playerStore.dispatch(Th({videoTime:e})):this.videoController.seek(e))}isLive(){return this.state.controller.videoType===Uc.LIVE}getStartPositionForLoadSource(e,t){let{shouldSaveProgress:r}=t;const{controller:{currentTime:n,watchedTime:i}}=this.state,o=this.getUtcStartTime(),a=void 0===o?void 0:bc(o,n),s=(0,Ql.K)(e.startPosition)?e.startPosition:{};return r&&i>0?{videoTime:n,utc:a}:s}getUtcStartTime(){const{controller:{programDateTime:e}}=this.state;return void 0===e?void 0:Oc(e,1e3)}onError(e){const t=e instanceof gu?e:new gu(e,{code:e.code||Ad.DEFAULT_ERROR});this.playerStore.dispatch(Dh({error:t})),t.isFatal&&(this.callbacks.logEvent({event:"MediaInternalsHistoryOnFatal",params:{history:this.mediaInternalsHistory.getHistory()}}),!cn(this.state)&&this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.destroy(yu.PlayerError),this.playerStore.dispatch(sf(gd.PAUSE)),this.resourceTimingsMonitor.updateInfo(),this.destroyVideoController())}async detachEncoder(){this.videoController&&(await this.videoController.detachEncoder(),this.playerStore.dispatch(oh(Zg.Detached)))}async attachEncoder(){this.state.controller.isOnline||await new Promise(e=>this.onlineMonitor.once("Online",e)),this.playerStore.dispatch(oh(Zg.Attaching));try{await this.videoController.attachEncoder()}catch(fT){throw this.playerStore.dispatch(oh(Zg.Detached)),fT}this.playerStore.dispatch(oh(Zg.Attached)),this.updateVolumeInfo();const e=this.state.controller.playingState,t=this.videoController.getPlayingState();t&&e!==t&&this.emit("VideoPlayingStateChange",t)}async destroyVideoController(){this.videoController&&(this.cacheVideoController(),await this.videoController.destroy(),this.playerStore.dispatch(oh(Zg.Detached)))}cacheVideoController(){if(this.config.cacheSourcesCount<=0)return;if(!this.videoController)return;if(this.state.controller.videoType!==Uc.VOD)return;const e=this.videoController.createCachePreloader();if(!e)return;const t=oo(this.videoController.getStreamUrl()),r=this.cachePreloaders.findIndex(e=>oo(e.getSource().stream.url)===t);r>-1&&(this.cachePreloaders[r].destroy(),this.cachePreloaders.splice(r,1)),this.cachePreloaders.push(e)}runRequestAutoplaySettingsLogger(e,t,r){e.then(e=>{this.callbacks.logEvent({event:e.autoplay?"AutoplayAllowed":"AutoplayDisabled",params:{autoplaySettingsRequestResult:e,initialAutoplayParams:t,cachedAutoplayParams:r}})})}async playAfterWaitingForDocumentVisibility(){const{videoController:e}=this,{startStage:t,initialAutoplay:r}=this.state.controller;if(t===Jg.waitForDocumentVisibility&&r&&e){this.callbacks.logEvent({event:vu.PlayAfterWaitingForDocumentVisibility,params:{}});try{var n;this.performPlayCallbacks(),await e.play(),null==(n=this.playDeferred)||n.resolve()}catch(pT){var i,o;if(null!=(i=this.state.controller.errorInfo.error)&&i.isFatal)return void(null==(o=this.playDeferred)||o.reject(pT));const{allowMuted:r,muted:n}=this.state.controller;if(!(r&&!n))return;this.setMuted(!0),e.play().then(()=>{var e;return null==(e=this.playDeferred)?void 0:e.resolve()},e=>{var t;return null==(t=this.playDeferred)?void 0:t.reject(e)})}}}getContainerDocument(){return this.container.ownerDocument||document}getMainContainer(){return this.config.useFriendlyFrame?this.container:document}setPosterFitStyle(){M(this.video,al({objectFit:"cover"},this.playerStore.getState().controller.videoElementStyle))}resetPosterFitStyle(){M(this.video,al({objectFit:"contain"},this.playerStore.getState().controller.videoElementStyle))}hidePoster(){this.video.poster=Wc}preloadVideoControllerSource(){void 0!==this.videoController?(this.callbacks.logEvent({event:vu.PreloadSource,params:{whileAd:!0}}),t(this.videoController.preloadSource())):console.warn("preloadVideoControllerSource: videoController is undefined")}updateVolumeInfo(){this.playerStore.dispatch(sh({volume:this.video.volume,muted:this.video.muted,changeReason:dm.VolumeChangeEvent}))}}class hS{constructor(e,t){void 0===e&&(e=window),this.handlers=[],this.onDestroy=new Tc,this.fullscreenElement=null,this.setFullScreenElementFromAPI=()=>{const e=re(this.win,this.video);this.setFullscreenElement(e)},this.win=e,this.video=t,t&&$c&&(this.onDestroy.addOne(T(t,"webkitbeginfullscreen",()=>{this.setFullscreenElement(t)})),this.onDestroy.addOne(T(t,"webkitendfullscreen",()=>{this.setFullscreenElement(null)}))),this.names=te(e,t),this.names&&(this.onDestroy.addOne(T(this.win.document,this.names.events.change,this.setFullScreenElementFromAPI)),this.setFullScreenElementFromAPI())}requestFullscreenForElement(e,t){if(void 0===this.names)throw new this.win.Error("Fullscreen is not supported");{const{request:r}=this.names;if(!(r in e))throw new this.win.Error("Fullscreen is not supported");e[r](t)}}isFullscreen(){return null!==this.fullscreenElement}exit(){if(void 0===this.names)throw new Error("Fullscreen is not supported");this.video&&this.fullscreenElement===this.video?this.video[this.names.exit]():this.win.document[this.names.exit]()}getFullscreenElement(){return this.fullscreenElement}addHandler(e){if("function"!==typeof e)throw new this.win.Error("Fullscreen handler must be a function");this.handlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e)}destroy(){this.handlers.length=0,this.onDestroy.dispatch(void 0)}setFullscreenElement(e){this.fullscreenElement=e,this.handlers.forEach(t=>t(e))}}var fS=e(8558);class pS{constructor(e){this.args=e,this.runningCount=0,this.callback=(e,t)=>{const r=e+1;t?r===this.strategies.length?this.args.callback(t):r===this.runningCount&&this.startNext():(this.stopUntil(r),this.args.callback(t))},this.strategies=(0,fS.U)(e.strategyFactories,(e,t)=>e(e=>this.callback(t,e)))}static from(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{const r=[];for(const n of t){let t=()=>null;const i=n(sl({},e,{callback:e=>t(e)}));if(!i)return null;r.push(e=>(t=e,i))}return new pS({callback:e.callback,strategyFactories:r})}}start(){!this.runningCount&&this.strategies.length&&this.startNext()}stop(){this.stopUntil(0)}get isDetermined(){for(const e of this.strategies)if(!e.isDetermined)return!1;return!0}getIsVisible(){for(let e=0;e<this.strategies.length;e++)if(!this.strategies[e].getIsVisible())return!1;return!0}startNext(){this.strategies[this.runningCount++].start()}stopUntil(e){for(;this.runningCount>e;)this.strategies[--this.runningCount].stop()}}const gS=(e,t,r,n)=>function(){try{return t.apply(r||this,arguments)}catch(pT){if((0,Wl.m)(n)&&n(pT),!0===pT.preventProtect)throw pT;gS.log(pT,e)}};gS.log=function(e,t){console.log("LOG:"+t+":"+e)},gS.setTimeout=(e,t,r,n)=>window.setTimeout(gS("timeout",e,r,n),t);class vS{}vS.YaContextCallbacks=ll("Ya.C","ontext._callbacks"),vS.YaContextCallbacksCalls=ll("Ya.C","ontext._callbacks_call"),vS.AdvManager=ll("A","dvManager"),vS.AdvBlock=ll("A","dvBlock"),vS.RTB=ll("R","TB"),vS.Rtb=ll("R","tb"),vS.MetrikaAdtune=ll("metrika_a","dtune");let mS="hidden",ES="visibilitychange";if(!(mS in document)){const e=["webkit","moz","ms","o"];for(const t of e){const e=t+"Hidden";if(e in document){mS=e,ES=t+"visibilitychange";break}}}const yS=new class{constructor(e){void 0===e&&(e=window),this.windowObj=e,this.initYaBrowserApi()}canUseYaBroApi(){return Boolean(this.yaBroApiInstance&&this.yaBroApiInstance.isInCustoPage)}isPageHiddenYaBroApi(){return!(this.yaBroApiInstance&&this.yaBroApiInstance.pageVisible)}initYaBrowserApi(){this.windowObj.browser&&this.windowObj.browser.BrowserEmbeddedApi&&this.windowObj.browser.BrowserEmbeddedApi.getInstance().then(e=>{this.yaBroApiInstance=e})}};class AS{constructor(e){this.args=e,this.isDetermined=!0,this.onVisibilityChangeCallback=()=>{this.args.callback(this.getIsVisible())}}static factory(e){return new AS(e)}start(){this.timer=window.setTimeout(()=>{this.onVisibilityChangeCallback(),this.subscription=function(e,t,r,n,i){if(!e||!r)return null;let o=ul(gS("handler:"+t,r,n));const a={un(){kd(e,t,o)}};var s;return i&&i.once&&!Dd&&(s=o,o=function(e){s.call(this,e),hl(a)}),Cd(e,t,o,Nd?i:i&&i.capture),a}(document,ES,this.onVisibilityChangeCallback)})}stop(){window.clearTimeout(this.timer),hl(this.subscription)}getIsVisible(){return!(yS.canUseYaBroApi()?yS.isPageHiddenYaBroApi():Boolean(document[mS]))}}const SS=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent;return-1!==t.indexOf("Opera Mini")||(-1!==t.indexOf("; wv)")&&-1!==t.indexOf(" OPR/")||-1!==t.indexOf(" OPiOS/"))}();class TS{constructor(e){this.args=e,this.isDetermined=!0,this.callback=e=>{const t=e[0].intersectionRatio>=this.observer.thresholds[0];this.args.callback(t)},this.threshold=Math.max(2**-149,this.args.portion),this.observer=new IntersectionObserver(this.callback,{threshold:this.threshold})}static factory(e){return"undefined"===typeof IntersectionObserver?null:"thresholds"in IntersectionObserver.prototype&&e.element?new TS(e):null}start(){this.observer.observe(this.args.element)}stop(){this.observer.disconnect()}getIsVisible(){return e=this.args.element,t=this.threshold,SS?e.offsetWidth>0&&e.offsetHeight>0:pl(e)>=(t||Number.MIN_VALUE);var e,t}}let RS;!function(e){e.PiP="PiP",e.YaBroEarly="YaBroEarly",e.YaBroAttrLegacy="YaBroAttrLegacy",e.YaBroAttrCurrent="YaBroAttrCurrent",e.OperaPopOut="OperaPopOut",e.SafariPresentationMode="SafariPresentationMode"}(RS||(RS={}));const _S={[RS.PiP]:{isSupported:e=>{if("pictureInPictureEnabled"in e.document){if(vl()){const t=gl(e);return 20===t.major&&t.minor>4||t.major>20}return!0}return!1},getCurrent:e=>e.document.pictureInPictureElement||null,observe:(e,t,r)=>t?(t.addEventListener("enterpictureinpicture",r),t.addEventListener("leavepictureinpicture",r),()=>{t.removeEventListener("enterpictureinpicture",r),t.removeEventListener("leavepictureinpicture",r)}):d,getPipWindow:e=>e.pictureInPictureWindow||null},[RS.YaBroEarly]:{isSupported:(e,t)=>"broughtOut"in t,getCurrent:(e,t)=>t&&"broughtOut"in t&&t.broughtOut?t:null,observe:(e,t,r)=>t?(t.addEventListener("oowvideobringin",r),t.addEventListener("oowvideobringout",r),()=>{t.removeEventListener("oowvideobringin",r),t.removeEventListener("oowvideobringout",r)}):d},[RS.YaBroAttrCurrent]:{isSupported:e=>{if(vl()){const t=gl(e);return 18===t.major&&t.minor>=6||t.major>18}return!1}},[RS.YaBroAttrLegacy]:{isSupported:e=>vl()&&gl(e).major<18},[RS.SafariPresentationMode]:{isSupported:(e,t)=>"webkitPresentationMode"in t,getCurrent:(e,t)=>t&&"picture-in-picture"===t.webkitPresentationMode?t:null,observe:(e,t,r)=>t?(t.addEventListener("webkitpresentationmodechanged",r),()=>t.removeEventListener("webkitpresentationmodechanged",r)):d},[RS.OperaPopOut]:{isSupported:(e,t)=>"onoperadetachedviewcontrol"in t&&"onoperadetachedviewchange"in t}},wS=[RS.PiP,RS.YaBroEarly,RS.YaBroAttrCurrent,RS.YaBroAttrLegacy,RS.SafariPresentationMode,RS.OperaPopOut];class bS extends su{constructor(e,t){void 0===e&&(e=window),super(),this.api=null,this.apiName=null,this.window=void 0,this.pipWindow=null,this.currentElement=null,this.unsubscribeFromApi=d,this.handlePipEvent=e=>{var t;const r=e.target;this.digestCurrentElement(r);const n=Boolean(this.getCurrentElement());this.pipWindow=(null==(t=this.api)||null==t.getPipWindow?void 0:t.getPipWindow(e))||null,this.emit("Change",n)},this.window=e;const r=t||window.HTMLVideoElement.prototype;for(let n=0;n<wS.length;n++){const e=wS[n],t=_S[e];try{if(t.isSupported(this.window,r)){this.api=t,this.apiName=e;break}}catch(pT){}}this.digestCurrentElement(t),this.api&&this.api.observe&&(this.unsubscribeFromApi=this.api.observe(this.window,t,this.handlePipEvent))}getSupportedApiName(){return this.apiName}getCurrentElement(){return this.currentElement}addHandler(e){return this.api&&this.api.observe?(this.on("Change",e),()=>this.off("Change",e)):null}getPipWindowSize(){if(!this.pipWindow)return null;const{width:e,height:t}=this.pipWindow;return e&&t?{width:e,height:t}:null}destroy(){this.currentElement=null;const e=this.window.document;null!=e&&e.pictureInPictureElement&&(null==e.exitPictureInPicture||e.exitPictureInPicture()),this.off("Change"),this.unsubscribeFromApi()}digestCurrentElement(e){this.api&&this.api.getCurrent&&(this.currentElement=this.api.getCurrent(this.window,e))}}let PS,IS=null;try{"undefined"!==typeof IntersectionObserver&&(IS=pS.from(TS.factory,AS.factory))}catch(gT){}class OS extends su{constructor(e){super(),this.isSupportedPipMode=!0,this.isYandexPipMode=!1,this.isVisibilitySupported=Boolean(IS),this.window=void 0,this.element=void 0,this.fullscreenApi=void 0,this.pipApi=void 0,this.video=void 0,this.state={isPip:!1,isFullScreen:!1,isVisible:!0},this.observe=e=>(this.on("Change",e),()=>this.off("Change")),this.fireVisualStateHandlers=()=>{const{isPip:e,isVisible:t,isFullScreen:r}=this.state,n={isPip:e,isVisible:t,isFullScreen:r,isSupportedPipMode:this.isSupportedPipMode,isVisibilitySupported:this.isVisibilitySupported,isYandexPipMode:this.isYandexPipMode};this.emit("Change",n)},this.handleVisibilityChange=e=>{this.state.isVisible!==e&&(this.state.isVisible=e,this.fireVisualStateHandlers())},this.handlePipChange=e=>{this.state.isPip!==e&&(this.state.isPip=e,this.state.isFullScreen=this.getFullscreenStateProperty(this.fullscreenApi.getFullscreenElement()),this.fireVisualStateHandlers())},this.getFullscreenStateProperty=e=>ml(this.video.ownerDocument,this.video)||this.video===e,this.handleFullscreenChange=e=>{const t=this.getFullscreenStateProperty(e);this.state.isFullScreen!==t&&(this.state.isFullScreen=t,this.fireVisualStateHandlers())},this.element=e,this.window=bs(this.element)}setVideoElement(e){void 0===this.video&&(this.video=e,this.observeFullscreen(),this.observePip())}setExternalVisibility(e){this.handleVisibilityChange(e)}setExternalFullscreen(e){this.state.isFullScreen!==e&&(this.state.isFullScreen=e,this.fireVisualStateHandlers())}changeFullscreenState(e){e.isFullScreen!==this.state.isFullScreen&&(e.isFullScreen?this.fullscreenApi.requestFullscreenForElement(this.video,{navigationUI:"hide"}):this.fullscreenApi.exit())}changePipState(e){e.isPip!==this.state.isPip&&(e.isPip||this.pipApi.destroy())}destroy(){this.emit("Destroy"),this.off("Destroy")}getState(){const{isPip:e,isVisible:t,isFullScreen:r}=this.state;return{isPip:e,isVisible:t,isFullScreen:r,isSupportedPipMode:this.isSupportedPipMode,isVisibilitySupported:this.isVisibilitySupported,isYandexPipMode:this.isYandexPipMode}}getPipWindowSize(){return this.pipApi.getPipWindowSize()}observePip(){this.pipApi=new bS(bs(this.video),this.video),this.pipApi.addHandler(this.handlePipChange),this.once("Destroy",()=>{this.pipApi.destroy()});const e=this.pipApi.getSupportedApiName();this.isSupportedPipMode=e!==RS.OperaPopOut,this.isYandexPipMode=e===RS.YaBroAttrCurrent||e===RS.YaBroAttrLegacy}observeFullscreen(){this.fullscreenApi=new hS(this.window,this.video),this.fullscreenApi.addHandler(this.handleFullscreenChange),this.once("Destroy",()=>{this.fullscreenApi.destroy()})}}!function(e){e.Unknown="Unknown",e.ExternalApi="ExternalApi",e.VisiblePlayback="VisiblePlayback",e.RestoreAfterInsertInto="RestoreAfterInsertInto",e.WaitForSourceConfigUpdate="WaitForSourceConfigUpdate",e.CompletedRecoverSourceConfig="CompletedRecoverSourceConfig"}(PS||(PS={}));class CS extends Error{constructor(e,t){const r="object"===typeof e?e:{message:String(e)};if(super(String(r.message)),this.message=void 0,this.messageDetails=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.vsid=void 0,RE()(this,CS.prototype),this.message=r.message||this.message,this.messageDetails=r.messageDetails,this.code=r.code||0,this.category=E(this.code),this.details=r.details,this.isFatal=void 0===r.isFatal||r.isFatal,this.stack=r.stack&&"?:?:?"!==r.stack?r.stack:this.details&&this.details.stack||((e,t)=>{const{url:r,line:n,col:i,fileName:o,columnNumber:a,lineNumber:s}=e;return String(t||(r||o||"?")+":"+(n||s||"?")+":"+(i||a||"?"))})(r,this.stack),!this.stack||this.stack===ed)try{throw new Error(this.message)}catch(pT){this.stack=pT.stack||ed}this.vsid=t||r.vsid}toString(){return JSON.stringify(this.toJSON())}toJSON(){const e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid};return El({},e,{raw:JSON.stringify(e)})}}class kS{setTimeout(e,t){if(t<=0)return void r(e,yl);const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}now(){return od()}}class DS{constructor(e,t){void 0===t&&(t=new kS),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.setTimeout(()=>this.knock(this.lastNow+this.lastTimeout),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||this.setTimeout(()=>this.knock(e+t),t)}cancelTimeout(){void 0!==this.cancel&&this.cancel(),this.cancel=void 0}setTimeout(e,t){this.cancelTimeout();const r=this.clock.setTimeout(e,t);void 0!==r&&(this.cancelTimeout(),this.cancel=r)}}const NS=[0,1,4,5];let LS=Z(0);const MS=NS.map(e=>(LS=bc(Z(e),LS),LS)),VS=Ic(MS[MS.length-1],1e3),xS=[Eu.Init];const FS=["from","vsid"],US=["playready-proxy.ott.yandex.ru","playready-proxy-preproduction.ott.yandex.ru","widevine-proxy.ott.yandex.ru","widevine-proxy-preproduction.ott.yandex.ru","fairplay-proxy.ott.yandex.ru","fairplay-proxy-preproduction.ott.yandex.ru","drm.yandex-team.ru"],BS=e=>{let t=e;return vc(e)?[].concat(e).map(e=>BS(e)):tv(e)?new Date(e.getTime()):(!(0,Wl.m)(e)&&(0,Ql.K)(e)&&(t={},U(e,(e,r)=>{t[r]=BS(e)})),t)};let HS;!function(e){e.play="play",e.pause="pause",e.seek="seek",e.setSource="setSource",e.preloadSource="preloadSource",e.abortPreloadSource="abortPreloadSource",e.setVolume="setVolume",e.setMuted="setMuted",e.setFullscreen="setFullscreen",e.setPictureInPicture="setPictureInPicture",e.setPlaybackRate="setPlaybackRate",e.setVideoTrack="setVideoTrack",e.setAudioTrack="setAudioTrack",e.setTextTrack="setTextTrack",e.changeAdditionalParams="changeAdditionalParams",e.setNativeTextTrackVisibility="setNativeTextTrackVisibility",e.setNativeAdControlsVisibility="setNativeAdControlsVisibility",e.setHiddenControls="setHiddenControls",e.setVideoStyle="setVideoStyle",e.setPictureInPictureEnabled="setPictureInPictureEnabled",e.setFeed="setFeed",e.setExternalVisualState="setExternalVisualState",e.getExternalVisualState="getExternalVisualState",e.getConfig="getConfig",e.requestDebugInfo="requestDebugInfo",e.xhrRequest="xhrRequest",e.stopAd="stopAd",e.playInrollAd="playInrollAd",e.skipAdPod="skipAdPod",e.destroy="destroy",e.logDelta="logDelta"}(HS||(HS={}));let jS=0;const YS=["requestId"];class GS extends su{getDataFromPostMessageEvent(e){let{data:t}=e;if("object"!==typeof t)return;const{id:r,batch:n}=t;return"string"===typeof r&&0!==r.length&&n&&Array.isArray(n)?{id:r,batch:n}:void 0}constructor(e){let{id:t,sender:r,receiver:n,syncMode:i=!1,internal:o=!1}=e;super(),this.id=void 0,this.key=void 0,this.abortRequestMap=Object.create(null),this.sender=void 0,this.receiver=void 0,this.sendPromise=void 0,this.messagesBatch=[],this.receiverCallback=void 0,this.id=t,this.key=i?"handle_data_"+t:void 0,this.sender=r,this.receiver=n;const a=e=>{const{id:t,batch:r}=e;t===this.id&&r.forEach(e=>{let{answer:t,command:r,event:n}=e;if(t&&void 0!==t.requestId&&this.emit("Answer",t),n&&this.emit("Event",n),!r)return;const a=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(r,YS),s=_l({},o&&i?BS(a):a,{sendAnswer:e=>{this.sendAnswer(e,r.requestId)}});this.emit("Command",s)})};this.receiverCallback=e=>{const t=this.getDataFromPostMessageEvent(e);void 0!==t&&a(t)},this.key&&(n[this.key]=a),n.addEventListener("message",this.receiverCallback)}sendEvent(e,t){let{data:r,sourceId:n}=t;const i={eventName:e,data:r,sourceId:n};this.sendPostMessage({event:i})}sendCommand(e,t){const r={commandName:e,params:t};this.sendPostMessage({command:r})}sendRequest(e,t,r){void 0===r&&(r=6e4);const n={commandName:e,params:t,requestId:jS++},i=this.waitForAnswer(n,r);return this.sendPostMessage({command:n}),i}destroy(){this.receiver.removeEventListener("message",this.receiverCallback),this.off("Command"),this.off("Answer"),this.off("Event"),this.off("Error"),U(this.abortRequestMap,e=>e())}flush(){if(this.sendPromise=void 0,0===this.messagesBatch.length)return;const e={id:this.id,batch:[...this.messagesBatch]};this.messagesBatch=[];try{this.sender.postMessage(e,"*")}catch(pT){this.safeSendClonedData(e,"*")}}waitForAnswer(e,t){let r,n=d;const i=()=>{clearTimeout(r),n(),delete this.abortRequestMap[e.requestId]};return new Promise(o=>{r=window.setTimeout(()=>{const t=this.abortRequestMap[e.requestId];"function"===typeof t&&t()},t);const a=t=>{t.requestId===e.requestId&&(i(),o(t.data))};this.on("Answer",a),n=()=>this.off("Answer",a),this.abortRequestMap[e.requestId]=i})}sendAnswer(e,t){void 0===t&&(t=-1);const r={data:e,requestId:t};this.sendPostMessage({answer:r})}sendPostMessage(e){let{event:t,command:r,answer:n}=e;if(this.key)try{const e={id:this.id,batch:[{event:t,answer:n,command:r}]};return void this.sender[this.key](e)}catch(gT){}this.messagesBatch.push({event:t,answer:n,command:r}),this.planRealSend()}safeSendClonedData(e,t){try{this.sender.postMessage(JSON.parse(JSON.stringify(e)),t)}catch(fT){this.emit("Error",fT)}}planRealSend(){void 0===this.sendPromise&&(this.sendPromise=Promise.resolve().then(()=>this.flush()))}}const KS=se(window.location.href).hostname.split(".").reverse()[0];class WS{static performRealRequest(e){const t=Cs(bl({},e,{url:wl(e.url)}));return{promise:t.promise.then(e=>e.responseText).catch(e=>{throw e.status=t.getStatus(),e}),abort:t.abort}}constructor(e){let{sender:t,receiver:r}=e;this.postMessenger=void 0,this.postMessenger=new GS({id:"external-request-controller",sender:t,receiver:r}),this.attachListeners()}destroy(){this.postMessenger.destroy()}request(e){return this.postMessenger.sendRequest(HS.xhrRequest,e).then(e=>{let{success:t,error:r,data:n}=e;if(r)throw n;return n})}attachListeners(){this.postMessenger.on("Command",e=>{e.commandName===HS.xhrRequest&&WS.performRealRequest(e.params).promise.then(t=>{e.sendAnswer({success:!0,data:t})}).catch(t=>{const r={message:t.message,stack:t.stack,status:t.status};e.sendAnswer({error:!0,data:r})})})}}const qS=e=>void 0===e?void 0:String(e),zS={state:nv.NOT_PLAYING,type:void 0,adParams:{}},XS={sourceId:NaN,data:void 0};class QS extends Sc{constructor(e,t){super(),this.onTick=e,this.onFlush=t,this.wasFirstFlush=!1,this.lastFlushTime=void 0,this.startTime=void 0,this.timer=void 0,this.handleTimeout=()=>{this.onTick(),this.handleFlush(),this.nextTick()},this.startTime=this.lastFlushTime=cd(),this.timer=window.setTimeout(()=>{this.onTick(),this.nextTick()},0)}next(){this.isDestroyed||(window.clearTimeout(this.timer),this.handleFlush(),this.nextTick())}destroy(){super.destroy(),window.clearTimeout(this.timer)}nextTick(){this.isDestroyed||(window.clearTimeout(this.timer),this.timer=window.setTimeout(this.handleTimeout,this.getTimeout()))}handleFlush(){this.needFlush()&&(this.onFlush(),this.lastFlushTime=this.wasFirstFlush?cd():this.startTime,this.wasFirstFlush=!0)}needFlush(){const e=cd();return this.wasFirstFlush?e-this.lastFlushTime>=3e4:e-this.startTime>=1e4}getTimeout(){return cd()-this.startTime<1e4?1e3:5e3}}class JS extends Sc{constructor(e){super(),this.props=e,this.prevState=void 0,this.states=[],this.timer=void 0,this.timer=new QS(()=>{this.writeState()},()=>{this.flushStates()})}destroy(){super.destroy(),this.timer.destroy(),this.flushStates()}getStates(){return[...this.states]}flushStates(){const e=this.getStates();e.length>0&&this.props.onFlushStates(e),this.states.length=0}writeStateManually(){this.writeState(),this.timer.next()}writeState(){const e=this.props.getState();void 0!==e&&(Iv()(this.prevState,e)||(this.prevState=e,this.states.push(Ml({},e,{timestamp:J(Date.now())}))))}}const ZS={remainingBufferedTime:Q(Z(0)),state:gd.BUFFERING,currentTime:Q(zg),watchedTime:Q(Z(0)),duration:Q($g.duration)},$S=kl(window.location),eT=$S.vsid,tT="true"===$S.use_friendly_frame,rT=tT;var nT;let iT;nT=$S,(0,Ql.K)(nT)&&r(()=>{!function(e){Ru.flagsInited||(Ru.flagsInited=!0,(0,Ql.K)(e)&&(0,Ql.K)(e.flags)&&r(()=>{U(e.flags,(e,t)=>{wu[t]=String(e)})}))}({flags:JSON.parse(nT.flags)})});const oT=new GS({id:eT,sender:window.parent,receiver:window,syncMode:rT,internal:!0}),aT=new WS({sender:window.parent,receiver:window}),sT=e=>{oT.sendEvent("onLogEvent",{sourceId:-1,data:e})},lT=new class extends su{constructor(e,t){super(),this.getPlayerExpectedStalled=e,this.getPreloadDetails=t,this.isBuffering=!1,this.timer=void 0,this.stalledId=1,this.currentStalled=void 0,this.stalledTime=Z(0),this.stalledCount=0}setBuffering(e){var t;if(e!==this.isBuffering)if(this.isBuffering=e,this.isBuffering)this.timer=new DS(e=>{let{count:t}=e;const r=this.getExpectedStalled();if(t>0){const e=Z(MS[t-1]),n=this.currentStalled?this.currentStalled.id:this.stalledId++;this.currentStalled||this.stalledCount++,this.currentStalled={id:n,expectedStalled:r,duration:e,getElapsedTime:oe()},this.send(!1,r,e,n)}return t>=NS.length?(this.destroyTimer(),1/0):1e3*NS[t]}),this.timer.start();else{if(this.currentStalled){const{expectedStalled:e,id:r}=this.currentStalled,n=void 0===(t=this.currentStalled)?Z(0):bc(t.duration,Oc(t.getElapsedTime(),1e3));this.send(!0,e,n,r),this.currentStalled=void 0,this.stalledTime=bc(n,this.stalledTime)}this.destroyTimer()}}getStalledHistory(){const{stalledCount:e,stalledTime:t}=this;return{stalledCount:J(e),stalledTime:Q(t)}}clearStalledHistory(){this.stalledCount=0,this.stalledTime=Z(0)}destroy(){this.destroyTimer()}getCurrentStalledReason(){var e;return null==(e=this.currentStalled)?void 0:e.expectedStalled.reason}isExpiredStalled(e){const{getElapsedTime:t,reason:r}=e;return!(xS.indexOf(r)>-1)&&((!this.currentStalled||this.currentStalled.expectedStalled!==e)&&t()>=VS)}getExpectedStalled(){const e=this.getPlayerExpectedStalled();return this.isExpiredStalled(e)?xr(Eu.Other,void 0):e}destroyTimer(){this.timer&&(this.timer.destroy(),this.timer=void 0)}send(e,t,r,n){const{reason:i,details:o}=t,a={id:n,isStalledEnd:e,reason:i,stalledDuration:r,details:Al({},o,i===Eu.SetSource&&this.getPreloadDetails())};this.emit("SendStalled",a)}}(()=>void 0===iT?xr(Eu.Other,void 0):iT.getExpectedStalled(),()=>{var e;return null==(e=iT)?void 0:e.getPreloadDetails()});lT.on("SendStalled",e=>{var t,r,n;sT({event:e.isStalledEnd?"StalledEnd":"Stalled",params:xl({},e.details,{stalledDuration:e.stalledDuration,remainingBufferedTime:null==(t=iT)?void 0:t.getRemainingBufferedTime(),videoTrack:null==(r=iT)?void 0:r.getVideoTrack(),stalledId:e.id,isMuted:null==(n=iT)?void 0:n.getMuted()}),additionalStatsLabels:{reason:e.reason}})});const dT=e=>{const t=Dl(e),r=t.isFatal?y(t.code,uT):void 0,n=Dl(new CS(xl({},t,{messageDetails:r})));oT.sendEvent("onError",{sourceId:Fl(),data:n})};let cT=PS.Unknown,uT=vd.I;Pe(window).playerJsLoaded=!0;const hT={};(async()=>{const e=async function(e){const t=tT&&Tu.initialStreamPlayerParams?BS(Tu.initialStreamPlayerParams):await e.sendRequest(HS.getConfig,void 0);return xl({},t,{maxRecoverAttempts:t.maxRecoverAttempts,env:t.env,device:t.device,bandwidthEstimateOffset:t.bandwidthEstimateOffset,maxBufferLength:t.maxBufferLength,skinConfig:t.skinConfig,backgroundColor:t.backgroundColor,togglePlaybackOnVisibilityChange:t.togglePlaybackOnVisibilityChange})}(oT),t={onDrmSystemChange:e=>{oT.sendEvent("onDrmSystemChange",{sourceId:Fl(),data:e})},onChangeStream:e=>{oT.sendEvent("onChangeStream",{sourceId:Fl(),data:e}),e&&(Ll({preview:a.preview,adConfig:a.adConfig,additionalParams:i},e.url),a.stream=e)},onError:dT,onRecover:e=>{oT.sendEvent("onRecover",{sourceId:Fl(),data:e})},onStateChange:e=>{const t=Fl();e===gd.BUFFERING?lT.setBuffering(!0):lT.setBuffering(!1),a.playingState!==e&&(a.playingState=e,oT.sendEvent("onStateChange",{sourceId:t,data:{playingState:e,reason:cT}}),cT=PS.Unknown,l.writeStateManually())},onAdStateChange:e=>{const{adState:t,playingState:r}=a;t.state===nv.NOT_PLAYING&&e.state===nv.PLAYING&&lT.setBuffering(!1);t.state===nv.PLAYING&&e.state===nv.NOT_PLAYING&&r===gd.BUFFERING&&lT.setBuffering(!0),t.state!==e.state&&(cT=PS.Unknown),a.adState=e,oT.sendEvent("onAdStateChange",{sourceId:Fl(),data:e})},onBeforeAdPodStart:e=>{rT&&oT.sendEvent("onBeforeAdPodStart",{sourceId:Fl(),data:e})},onAdPodStart:e=>{oT.sendEvent("onAdPodStart",{sourceId:Fl(),data:e})},onAdPodSkip:()=>{oT.sendEvent("onAdPodSkip",{sourceId:Fl(),data:void 0})},onAdPodEnd:()=>{oT.sendEvent("onAdPodEnd",{sourceId:Fl(),data:void 0})},onAdSkippableStateChange:e=>{oT.sendEvent("onAdSkippableStateChange",{sourceId:Fl(),data:e})},onAdPodCloseStateChange:e=>{oT.sendEvent("onAdPodCloseStateChange",{sourceId:Fl(),data:e})},onAdPodDurationChange:e=>{oT.sendEvent("onAdPodDurationChange",{sourceId:Fl(),data:e})},onAdPodCurrentTimeChange:e=>{oT.sendEvent("onAdPodCurrentTimeChange",{sourceId:Fl(),data:e})},onAdPodTimeToSkipChange:e=>{oT.sendEvent("onAdPodTimeToSkipChange",{sourceId:Fl(),data:e})},onAdVolumeAvailabilityStateChange:e=>{oT.sendEvent("onAdVolumeAvailabilityStateChange",{sourceId:Fl(),data:e})},onAdInteraction:()=>{oT.sendEvent("onAdInteraction",{sourceId:Fl(),data:void 0})},onVideoTypeChange:e=>{oT.sendEvent("onVideoTypeChange",{sourceId:Fl(),data:e})},onDVRStartTimeChange:()=>{void 0!==iT&&oT.sendEvent("onTimelineInfoChange",{sourceId:Fl(),data:iT.getTimelineInfo()})},onDVRDurationChange:()=>{void 0!==iT&&oT.sendEvent("onTimelineInfoChange",{sourceId:Fl(),data:iT.getTimelineInfo()})},onCurrentTimeChange:()=>{void 0!==iT&&(oT.sendEvent("onPositionChange",{sourceId:Fl(),data:{time:iT.getCurrentTime(),utcTime:iT.getUtcPosition(),watchedTime:iT.getWatchedTime(),videoPlaybackQuality:iT.getVideoPlaybackQuality(),liveLatency:iT.getLiveLatency()}}),oT.sendEvent("onTimelineInfoChange",{sourceId:Fl(),data:iT.getTimelineInfo()}))},onFullScreenChange:e=>{oT.sendEvent("onFullScreenChange",{sourceId:Fl(),data:e})},onVolumeChange:e=>{oT.sendEvent("onVolumeChange",{sourceId:Fl(),data:e})},onVideoTrackChange:e=>{oT.sendEvent("onVideoTrackChange",{sourceId:Fl(),data:e})},onVideoTracksChange:e=>{oT.sendEvent("onVideoTracksChange",{sourceId:Fl(),data:e})},onAudioTrackChange:e=>{oT.sendEvent("onAudioTrackChange",{sourceId:Fl(),data:e})},onAudioTracksChange:e=>{oT.sendEvent("onAudioTracksChange",{sourceId:Fl(),data:e})},onTextTrackChange:e=>{oT.sendEvent("onTextTrackChange",{sourceId:Fl(),data:e})},onTextTracksChange:e=>{oT.sendEvent("onTextTracksChange",{sourceId:Fl(),data:e})},onSubtitlesChange:e=>{oT.sendEvent("onSubtitlesChange",{sourceId:Fl(),data:e})},onPlaybackRateChange:e=>{oT.sendEvent("onPlaybackRateChange",{sourceId:Fl(),data:e})},onThumbnailTileGeneralMetaInfoChange:e=>{oT.sendEvent("onThumbnailTileGeneralMetaInfoChange",{sourceId:Fl(),data:e})},onOriginalBroadcastAdStateChange:e=>{oT.sendEvent("onOriginalBroadcastAdStateChange",{sourceId:Fl(),data:e})},onAdblockDetected:e=>{uT=e,r(()=>{window.Ya.Rum.updateErrors({blocker:uT}),window.Ya.Rum.setVars({"-blocker":uT}),N(Pd,window.Ya.Rum.getTime(),!1,{[Pd]:Number(uT)})})},onContentImpression:e=>{oT.sendEvent("onContentImpression",{sourceId:Fl(),data:e})},onResourcesIdle:()=>{oT.sendEvent("onResourcesIdle",{sourceId:Fl(),data:void 0})},onVisualStateChange:e=>{oT.sendEvent("onVisualStateChange",{sourceId:Fl(),data:e})},onBufferingRangesChange:e=>{oT.sendEvent("onBufferingRangesChange",{sourceId:Fl(),data:e})},onStartStageChange:e=>{oT.sendEvent("onStartStageChange",{sourceId:Fl(),data:e})},onVideoSizeChange:e=>{oT.sendEvent("onVideoSizeChange",{sourceId:Fl(),data:e})},onNextAdRemainingTimeChange:e=>{oT.sendEvent("onNextAdRemainingTimeChange",{sourceId:Fl(),data:e})},onVideoClickerEvent:e=>{oT.sendEvent("onVideoClickerEvent",{sourceId:Fl(),data:e})},logEvent:sT,onAdSDKVersionDefined:e=>{oT.sendEvent("onAdSDKVersionDefined",{sourceId:Fl(),data:e})},onStreamsWithSupportInfoChange:e=>{oT.sendEvent("onStreamsWithSupportInfoChange",{sourceId:Fl(),data:e})},onEngineChange:(e,t)=>{oT.sendEvent("onEngineChange",{sourceId:t,data:e})},onNetworkStatusChange:e=>{oT.sendEvent("onNetworkStatusChange",{sourceId:Fl(),data:e})},onBandwidthEstimateChange:e=>{oT.sendEvent("onBandwidthEstimateChange",{sourceId:Fl(),data:e})}},n=await e.then(e=>xl({},e,{callbacks:t}));let i=n.source.params.additionalParams;n.env&&Nm.setDeviceType(n.env.deviceType),oT.sendEvent("onInit",XS);const o=function(e){const t=tT?window.parent.document.getElementById(Js(eT)):document.getElementById("q");if(!t)throw new CS({code:Sd.PLAYER_CONTAINER_NOT_FOUND,isFatal:!1,details:e,message:"Player container was not found"});return t}(n);(function(e){return void 0===e&&(e=window),me(e.document.querySelectorAll("style[data-ya-player-style]"))})().forEach(e=>function(e,t){ws(e)!==ws(t)&&t.appendChild(e)}(e,o)),function(e){if(e.source.streams.some(e=>{let{url:t}=e;return Hr(t)})){const e=c(window),t=document.createElement("link");t.rel="preconnect",t.href="https://strm.yandex.ru",e.appendChild(t)}}(n);const a=function(e){const[t]=e.source.streams;return{playingState:void 0,startPosition:e.source.params.startPosition.videoTime,env:e.env,withCredentials:e.source.params.withCredentials,preview:e.source.params.preview,stream:t,adConfig:e.source.params.adConfig,adState:zS}}(n),s=new OS(o),l=function(e,t,r,n){const i=new JS({getState:()=>{var r;const i=Vl({},ZS,{isMuted:n.muted,saveData:lo()},t.getStalledHistory()),o=e();if(void 0===o)return i;const a=o.getVideoTrack(),s=o.getAudioTrack(),{droppedVideoFrames:l,totalVideoFrames:d}=o.getVideoPlaybackQuality(),c=o.getState(),{videoWidth:u,videoHeight:h}=c.controller,f=o.getBandwidthEstimate(),p=o.getVideoTracks()[0],g=o.getMaxCapAllowedVideoTrack(),v=o.getLiveLatency(),m=o.getRemainingBufferedTime(),E=null==(r=c.ad.adInfo)?void 0:r.adType,y=!E,A=o.getPlayingState(),S=o.getSegmentSize(),T=o.getContainerSize();return Vl({},i,{isVisible:c.controller.isVisible,currentTime:Q(o.getCurrentTime()),watchedTime:Q(o.getWatchedTime()),duration:Q(isNaN(o.getDuration())?Z(0):o.getDuration()),liveLatency:void 0===v?void 0:Q(v),isMuted:c.controller.muted,ad:E,remainingBufferedTime:Q(m.total),remainingVideoBufferedTime:void 0===m.video?void 0:Q(m.video),remainingAudioBufferedTime:void 0===m.audio?void 0:Q(m.audio),state:A,auto:void 0===a?void 0:a.auto,bitrate:a&&a.bitrate?J(Ic(a.bitrate,1e3)):void 0,width:J(u)||void 0,height:J(h)||void 0,maxWidth:y&&null!=p&&p.width?J($(p.width)):void 0,maxHeight:y&&null!=p&&p.height?J($(p.height)):void 0,capWidth:y&&null!=g&&g.width?J($(g.width)):void 0,capHeight:y&&null!=g&&g.height?J($(g.height)):void 0,containerWidth:void 0!==T?J(T.width):void 0,containerHeight:void 0!==T?J(T.height):void 0,audioBitrate:s&&s.bitrate?J(Ic(s.bitrate,1e3)):void 0,audioTrack:s&&s.value||void 0,audioLang:s&&s.lang||void 0,droppedFrames:J(l)||void 0,shownFrames:J(d-l)||void 0,bandwidthEstimate:void 0===f||isNaN(f.value)?void 0:J(Math.round(f.value)),bandwidthSource:(null==f?void 0:f.source)||void 0,rtt:ve()||void 0,stalledReason:t.getCurrentStalledReason(),segmentWidth:y&&S?J(S.width):void 0,segmentHeight:y&&S?J(S.height):void 0})},onFlushStates:e=>{r({event:"PlayerAlive",params:{states:e}})}}),o=R(document,e=>{e||i.flushStates()});return i.addDestroyHandler(o),i}(()=>iT,lT,sT,n);iT=new uS(o,n,{visualState:s},()=>oT.sendEvent("onReady",XS)),iT.setExternalRequestController(aT),N(bd),oT.on("Command",e=>{switch(e.commandName){case HS.pause:cT=e.params,void 0!==iT&&iT.pause(),e.sendAnswer();break;case HS.play:cT=e.params,iT?iT.play().then(()=>{e.sendAnswer(!0)}).catch(()=>{e.sendAnswer(!1)}):e.sendAnswer(!1);break;case HS.seek:iT.seek({videoTime:e.params});break;case HS.setPlaybackRate:iT.setPlaybackRate(e.params);break;case HS.changeAdditionalParams:l.flushStates();break;case HS.setSource:const{sourceConfig:t,shouldSaveProgress:o}=e.params;if(!t)throw new CS("setSource method receives an object");l.flushStates(),lT.clearStalledHistory(),e.sendAnswer(),oT.flush(),a.adConfig=t.params.adConfig,a.startPosition=t.params.startPosition.videoTime,a.withCredentials=t.params.withCredentials,a.stream=t.streams[0],a.preview=t.params.preview;const{additionalParams:d}=t.params;d&&(i=d),t.streams=t.streams.map(e=>xl({},e,{drmConfig:e.drmConfig?Rl(e.drmConfig,i.vsid):void 0,url:Sl({url:e.url,adConfig:a.adConfig,additionalParams:i})})),Ll(t,t.streams[0].url),iT.setSource(t,{shouldSaveProgress:o});break;case HS.preloadSource:const{sourceConfig:c,requestId:u}=e.params,{additionalParams:h}=c.params;c.streams=c.streams.map(e=>xl({},e,{drmConfig:e.drmConfig?Rl(e.drmConfig,h.vsid):void 0,url:Sl({url:e.url,adConfig:c.params.adConfig,additionalParams:h})}));const{promise:f,abort:p}=iT.preloadSource(c);hT[u]=p,f.then(()=>{oT.sendEvent("onPreloadSourceResolve",{sourceId:-1,data:u})}).catch(()=>{oT.sendEvent("onPreloadSourceReject",{sourceId:-1,data:u})}).then(()=>{delete hT[u]});break;case HS.abortPreloadSource:const g=hT[e.params];(0,Wl.m)(g)&&(g(),delete hT[e.params]);break;case HS.setVolume:e.params>0&&iT.setMuted(!1),iT.setVolume(e.params);break;case HS.setMuted:iT.setMuted(e.params);break;case HS.setVideoTrack:iT.setVideoTrack(e.params);break;case HS.setAudioTrack:iT.setAudioTrack(e.params);break;case HS.setTextTrack:iT.setTextTrack(e.params);break;case HS.setNativeTextTrackVisibility:iT.setNativeTextTrackVisibility(e.params);break;case HS.setNativeAdControlsVisibility:iT.setNativeAdControlsVisibility(e.params);break;case HS.setFullscreen:iT.setFullscreen(e.params);break;case HS.setPictureInPicture:s.changePipState({isPip:e.params});break;case HS.setHiddenControls:iT.setHiddenControls(e.params);break;case HS.setVideoStyle:iT.setVideoStyle(e.params);break;case HS.setPictureInPictureEnabled:iT.setPictureInPictureEnabled(e.params);break;case HS.setFeed:iT.setFeed(e.params);break;case HS.requestDebugInfo:e.sendAnswer(function(){let e={};void 0!==iT&&(e=iT.getDebugInfo());const{playingState:t}=a;return xl({},e,a,{playingState:t,vsid:eT,version:"1.0-9279",utcPosition:iT.getUtcPosition(),currentTime:iT.getCurrentTime(),system:Cl(),clientTimestamp:Date.now(),streamUrl:a.stream.url,internalInitialConfig:n})}());break;case HS.stopAd:iT.stopAd({stopAdReason:yu.InsertIntoCalled,data:{loadPositionAfterAd:void 0}}).then(()=>{e.sendAnswer()});break;case HS.playInrollAd:iT.playInrollAd(e.params);break;case HS.skipAdPod:iT.skipAdPod();break;case HS.destroy:s.destroy(),lT.destroy(),l.destroy(),aT.destroy(),void 0!==iT&&iT.destroy(),e.sendAnswer(e.params);break;case HS.setExternalVisualState:"boolean"===typeof e.params.isVisible&&s.setExternalVisibility(e.params.isVisible),"boolean"===typeof e.params.isFullscreen&&s.setExternalFullscreen(e.params.isFullscreen);break;case HS.logDelta:!function(e,t,n){void 0===n&&(n={}),_()&&r(()=>{const{additional:r,initSubpage:i=!1,sampled:o=!1}=n,a=O(n,Bd);if(i&&P()>0)return;if(o&&!Vd)return;const s=b(),l=(0,Ql.K)(s)?s.additional:void 0;window.Ya.Rum.sendDelta(e,t,I({},s,a,{"-additional":(0,Ql.K)(r)?(0,Id.B6)(I({},l,r)):(0,Id.B6)(l)}))})}(e.params.deltaId,e.params.value,e.params.params);break;default:throw new Error("IFrameApi Error: unexpected command in MessageEvent: "+e.commandName)}}),oT.on("Error",e=>{const t=new pu(e,{code:Sd.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR,details:{},isFatal:!1});oT.sendEvent("onError",{sourceId:Fl(),data:t.toJSON()})}),C("detect.visibility"),"boolean"===typeof Tu.initialVisibility?(s.setExternalVisibility(Tu.initialVisibility),k("detect.visibility")):oT.sendRequest(HS.getExternalVisualState,void 0).then(e=>{let{isVisible:t}=e;s.setExternalVisibility(t),k("detect.visibility")})})().catch(e=>{oT.sendEvent("onInitError",{sourceId:1,data:Dl(new pu(e,{isFatal:"boolean"!==typeof e.isFatal||e.isFatal,code:e.code||Sd.ON_PLAYER_INIT_ERROR}))})})})()})();